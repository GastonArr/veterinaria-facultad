{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/lib/firebaseAdmin.js"],"sourcesContent":["\nimport admin from 'firebase-admin';\n\n\nif (!admin.apps.length) {\n  try {\n    admin.initializeApp();\n  } catch (error) {\n    console.error('Error en la inicialización de Firebase Admin SDK:', error);\n  }\n}\n\n/**\n * Verifica la cookie de sesión de Firebase y devuelve el UID del usuario.\n * @param {string} sessionCookie La cadena de la cookie de sesión.\n * @returns {Promise<string|null>} El UID del usuario o null si la cookie no es válida.\n */\nexport async function getUserIdFromSession(sessionCookie) {\n  if (!sessionCookie) {\n    return null;\n  }\n  try {\n    const decodedClaims = await admin.auth().verifySessionCookie(sessionCookie, true);\n    return decodedClaims.uid;\n  } catch (error) {\n    console.error('Error al verificar la cookie de sesión:', error.code);\n    return null;\n  }\n}\n\n\nexport default admin;\n"],"names":[],"mappings":";;;;;;AACA;;AAGA,IAAI,CAAC,sIAAK,CAAC,IAAI,CAAC,MAAM,EAAE;IACtB,IAAI;QACF,sIAAK,CAAC,aAAa;IACrB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qDAAqD;IACrE;AACF;AAOO,eAAe,qBAAqB,aAAa;IACtD,IAAI,CAAC,eAAe;QAClB,OAAO;IACT;IACA,IAAI;QACF,MAAM,gBAAgB,MAAM,sIAAK,CAAC,IAAI,GAAG,mBAAmB,CAAC,eAAe;QAC5E,OAAO,cAAc,GAAG;IAC1B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2CAA2C,MAAM,IAAI;QACnE,OAAO;IACT;AACF;uCAGe,sIAAK","debugId":null}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/api/auth/session/route.js"],"sourcesContent":["\nimport { NextResponse } from 'next/server';\nimport admin from '@/lib/firebaseAdmin';\n\n// Duración de la cookie de sesión (5 días en segundos)\nconst expiresIn = 60 * 60 * 24 * 5;\n\n/**\n * Maneja la creación de la cookie de sesión (Login).\n */\nexport async function POST(request) {\n  try {\n    const { idToken } = await request.json();\n\n    if (!idToken) {\n      return NextResponse.json({ error: 'ID token is required.' }, { status: 400 });\n    }\n\n    // Verificamos el ID token y creamos la cookie de sesión.\n    const sessionCookie = await admin.auth().createSessionCookie(idToken, { expiresIn: expiresIn * 1000 });\n\n    // Preparamos la respuesta.\n    const response = NextResponse.json({ status: 'success' });\n\n    // Configuramos la cookie en la respuesta.\n    response.cookies.set('__session', sessionCookie, {\n      httpOnly: true,     \n      secure: process.env.NODE_ENV === 'production', \n      maxAge: expiresIn,  \n      path: '/',         \n      sameSite: 'lax',\n    })   \n\n    return response;\n\n  } catch (error) {\n    console.error('Error creating session cookie:', error);\n    return NextResponse.json({ error: 'Failed to create session.' }, { status: 401 });\n  }\n}\n\nexport async function DELETE() {\n  try {\n\n    const response = NextResponse.json({ status: 'success' });\n\n    response.cookies.set('__session', '', {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === 'production',\n      maxAge: 0,\n      path: '/',\n      sameSite: 'lax',\n    });\n\n    return response;\n\n  } catch (error) {\n    console.error('Error clearing session cookie:', error);\n    return NextResponse.json({ error: 'Failed to clear session.' }, { status: 500 });\n  }\n}\n\nexport async function GET() {\n  return NextResponse.json({ status: 'success' });\n}"],"names":[],"mappings":";;;;;;;;AACA;AACA;;;AAEA,uDAAuD;AACvD,MAAM,YAAY,KAAK,KAAK,KAAK;AAK1B,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEtC,IAAI,CAAC,SAAS;YACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAwB,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QAEA,yDAAyD;QACzD,MAAM,gBAAgB,MAAM,wIAAK,CAAC,IAAI,GAAG,mBAAmB,CAAC,SAAS;YAAE,WAAW,YAAY;QAAK;QAEpG,2BAA2B;QAC3B,MAAM,WAAW,gJAAY,CAAC,IAAI,CAAC;YAAE,QAAQ;QAAU;QAEvD,0CAA0C;QAC1C,SAAS,OAAO,CAAC,GAAG,CAAC,aAAa,eAAe;YAC/C,UAAU;YACV,QAAQ,oDAAyB;YACjC,QAAQ;YACR,MAAM;YACN,UAAU;QACZ;QAEA,OAAO;IAET,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA4B,GAAG;YAAE,QAAQ;QAAI;IACjF;AACF;AAEO,eAAe;IACpB,IAAI;QAEF,MAAM,WAAW,gJAAY,CAAC,IAAI,CAAC;YAAE,QAAQ;QAAU;QAEvD,SAAS,OAAO,CAAC,GAAG,CAAC,aAAa,IAAI;YACpC,UAAU;YACV,QAAQ,oDAAyB;YACjC,QAAQ;YACR,MAAM;YACN,UAAU;QACZ;QAEA,OAAO;IAET,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA2B,GAAG;YAAE,QAAQ;QAAI;IAChF;AACF;AAEO,eAAe;IACpB,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,QAAQ;IAAU;AAC/C","debugId":null}}]
}