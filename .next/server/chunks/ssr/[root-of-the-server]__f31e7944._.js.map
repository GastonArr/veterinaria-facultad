{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/lib/firebaseConfig.js"],"sourcesContent":["export const firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n};"],"names":[],"mappings":";;;;AAAO,MAAM,iBAAiB;IAC5B,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP","debugId":null}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/lib/firebase.js"],"sourcesContent":["import { initializeApp, getApps, getApp } from 'firebase/app';\nimport { getFirestore } from 'firebase/firestore';\nimport { getAuth } from 'firebase/auth';\nimport { firebaseConfig } from './firebaseConfig';\n\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\nconst db = getFirestore(app);\nconst auth = getAuth(app);\n\nexport { app, db, auth };"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;;;;;AAEA,MAAM,MAAM,CAAC,IAAA,2KAAO,IAAG,MAAM,GAAG,IAAA,iLAAa,EAAC,8IAAc,IAAI,IAAA,0KAAM;AACtE,MAAM,KAAK,IAAA,iLAAY,EAAC;AACxB,MAAM,OAAO,IAAA,6KAAO,EAAC","debugId":null}},
    {"offset": {"line": 161, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/contexts/AuthContext.js"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport { \n    onAuthStateChanged,\n    GoogleAuthProvider,\n    signInWithPopup,\n    signOut,\n    signInWithEmailAndPassword,\n    createUserWithEmailAndPassword,\n    sendPasswordResetEmail,\n    updatePassword,\n    EmailAuthProvider,\n    reauthenticateWithCredential\n} from 'firebase/auth';\nimport { auth } from '@/lib/firebase';\nimport { useRouter } from 'next/navigation';\n\n// SE ELIMINA LA IMPORTACIÓN DE LA SERVER ACTION\n// import { completarPerfil } from '@/app/actions';\n\nconst AuthContext = createContext();\n\nexport const useAuth = () => useContext(AuthContext);\n\nexport const AuthProvider = ({ children }) => {\n    // El nombre correcto de la propiedad es 'user', no 'currentUser'\n    const [user, setUser] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const router = useRouter();\n\n    const loginWithGoogle = async () => {\n        const provider = new GoogleAuthProvider();\n        try {\n            return await signInWithPopup(auth, provider);\n        } catch (error) {\n            console.error(\"Error durante el inicio de sesión con Google:\", error);\n        }\n    };\n\n    const loginWithEmail = async (email, password) => {\n        try {\n            return await signInWithEmailAndPassword(auth, email, password);\n        } catch (error) {\n            console.error(\"Error durante el inicio de sesión con email y contraseña:\", error);\n            throw error;\n        }\n    };\n\n    /**\n     * Esta función AHORA solo se encarga de crear el usuario en Firebase Auth.\n     * Ya no necesita los datos del perfil.\n     */\n    const registerWithEmailAndPassword = async (email, password) => {\n        try {\n            // Solo crea el usuario y devuelve el resultado.\n            const result = await createUserWithEmailAndPassword(auth, email, password);\n            return result;\n        } catch (error) {\n            console.error(\"Error durante el registro:\", error);\n            throw error;\n        }\n    };\n\n    const resetPassword = async (email) => {\n        try {\n            await sendPasswordResetEmail(auth, email);\n        } catch (error) {\n            console.error(\"Error al enviar el correo de restablecimiento de contraseña:\", error);\n            throw error;\n        }\n    };\n\n\n    const changePassword = async (currentPassword, newPassword) => {\n        const user = auth.currentUser;\n        if (!user || !user.email) {\n            throw new Error(\"No hay un usuario autenticado para realizar esta operación.\");\n        }\n\n        const credential = EmailAuthProvider.credential(user.email, currentPassword);\n\n        try {\n            await reauthenticateWithCredential(user, credential);\n            await updatePassword(user, newPassword);\n        } catch (error) {\n            console.error(\"Error al cambiar la contraseña:\", error);\n            throw error;\n        }\n    };\n\n    const logout = async () => {\n        try {\n            await signOut(auth);\n            await fetch('/api/auth/session', { method: 'DELETE' });\n            // Redirigir a la raíz para un estado limpio.\n            window.location.href = '/';\n        } catch (error) {\n            console.error(\"Error durante el cierre de sesión:\", error);\n        }\n    };\n\n    useEffect(() => {\n        const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\n            setLoading(true);\n            if (currentUser) {\n                const idToken = await currentUser.getIdToken();\n                await fetch('/api/auth/session', {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ idToken }),\n                });\n                setUser(currentUser);\n            } else {\n                await fetch('/api/auth/session', { method: 'DELETE' }).catch(() => {});\n                setUser(null);\n            }\n            setLoading(false);\n        });\n\n        return () => unsubscribe();\n    }, []);\n\n    const value = {\n        user, // La propiedad se llama 'user'\n        loading,\n        loginWithGoogle,\n        loginWithEmail,\n        registerWithEmailAndPassword,\n        resetPassword,\n        changePassword,\n        logout,\n    };\n\n    return (\n        <AuthContext.Provider value={value}>\n            {children}\n        </AuthContext.Provider>\n    );\n};\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AAYA;AACA;AAhBA;;;;;;AAkBA,gDAAgD;AAChD,mDAAmD;AAEnD,MAAM,4BAAc,IAAA,sNAAa;AAE1B,MAAM,UAAU,IAAM,IAAA,mNAAU,EAAC;AAEjC,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAE;IACrC,iEAAiE;IACjE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,+IAAS;IAExB,MAAM,kBAAkB;QACpB,MAAM,WAAW,IAAI,wLAAkB;QACvC,IAAI;YACA,OAAO,MAAM,IAAA,qLAAe,EAAC,8HAAI,EAAE;QACvC,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,iDAAiD;QACnE;IACJ;IAEA,MAAM,iBAAiB,OAAO,OAAO;QACjC,IAAI;YACA,OAAO,MAAM,IAAA,gMAA0B,EAAC,8HAAI,EAAE,OAAO;QACzD,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,6DAA6D;YAC3E,MAAM;QACV;IACJ;IAEA;;;KAGC,GACD,MAAM,+BAA+B,OAAO,OAAO;QAC/C,IAAI;YACA,gDAAgD;YAChD,MAAM,SAAS,MAAM,IAAA,oMAA8B,EAAC,8HAAI,EAAE,OAAO;YACjE,OAAO;QACX,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,8BAA8B;YAC5C,MAAM;QACV;IACJ;IAEA,MAAM,gBAAgB,OAAO;QACzB,IAAI;YACA,MAAM,IAAA,4LAAsB,EAAC,8HAAI,EAAE;QACvC,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,gEAAgE;YAC9E,MAAM;QACV;IACJ;IAGA,MAAM,iBAAiB,OAAO,iBAAiB;QAC3C,MAAM,OAAO,8HAAI,CAAC,WAAW;QAC7B,IAAI,CAAC,QAAQ,CAAC,KAAK,KAAK,EAAE;YACtB,MAAM,IAAI,MAAM;QACpB;QAEA,MAAM,aAAa,uLAAiB,CAAC,UAAU,CAAC,KAAK,KAAK,EAAE;QAE5D,IAAI;YACA,MAAM,IAAA,kMAA4B,EAAC,MAAM;YACzC,MAAM,IAAA,oLAAc,EAAC,MAAM;QAC/B,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,mCAAmC;YACjD,MAAM;QACV;IACJ;IAEA,MAAM,SAAS;QACX,IAAI;YACA,MAAM,IAAA,6KAAO,EAAC,8HAAI;YAClB,MAAM,MAAM,qBAAqB;gBAAE,QAAQ;YAAS;YACpD,6CAA6C;YAC7C,OAAO,QAAQ,CAAC,IAAI,GAAG;QAC3B,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,sCAAsC;QACxD;IACJ;IAEA,IAAA,kNAAS,EAAC;QACN,MAAM,cAAc,IAAA,wLAAkB,EAAC,8HAAI,EAAE,OAAO;YAChD,WAAW;YACX,IAAI,aAAa;gBACb,MAAM,UAAU,MAAM,YAAY,UAAU;gBAC5C,MAAM,MAAM,qBAAqB;oBAC7B,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;oBAAmB;oBAC9C,MAAM,KAAK,SAAS,CAAC;wBAAE;oBAAQ;gBACnC;gBACA,QAAQ;YACZ,OAAO;gBACH,MAAM,MAAM,qBAAqB;oBAAE,QAAQ;gBAAS,GAAG,KAAK,CAAC,KAAO;gBACpE,QAAQ;YACZ;YACA,WAAW;QACf;QAEA,OAAO,IAAM;IACjB,GAAG,EAAE;IAEL,MAAM,QAAQ;QACV;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACJ;IAEA,qBACI,8OAAC,YAAY,QAAQ;QAAC,OAAO;kBACxB;;;;;;AAGb","debugId":null}},
    {"offset": {"line": 299, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/Header.jsx"],"sourcesContent":["'use client';\n\nimport { useAuth } from '@/contexts/AuthContext';\nimport Link from 'next/link';\nimport Image from 'next/image';\n\n// Función para obtener iniciales para el avatar de fallback\nconst getInitials = (name) => {\n  if (!name) return '?';\n  const names = name.split(' ');\n  if (names.length === 1) return names[0].charAt(0).toUpperCase();\n  return (names[0].charAt(0) + names[names.length - 1].charAt(0)).toUpperCase();\n};\n\nexport default function Header() {\n    const { user, logout, loading } = useAuth();\n    // CORRECCIÓN: Usamos `displayName` del objeto de usuario de Firebase\n    const displayName = user?.displayName ? user.displayName.split(' ')[0] : 'Usuario';\n\n    return (\n        <header className=\"bg-white shadow-sm sticky top-0 z-50 w-full\">\n            <nav className=\"max-w-screen-xl mx-auto px-6 lg:px-8\">\n                <div className=\"flex items-center justify-between h-24\">\n                    \n                    <div className=\"flex-shrink-0\">\n                        <Link href=\"/\">\n                            <Image \n                                src=\"/LOGO.svg\" \n                                alt=\"Logo de Veterinaria Magali Martin\"\n                                width={200}\n                                height={55}\n                                priority\n                            />\n                        </Link>\n                    </div>\n\n                    <div className=\"flex-grow\"></div>\n\n                    <div className=\"flex items-center gap-4 min-w-[250px] justify-end\">\n                        {!loading && (\n                            user ? (\n                                <div className=\"flex items-center gap-4\">\n                                    <span className=\"hidden lg:inline text-md font-medium text-gray-700\">Hola, {displayName}</span>\n                                    <div className=\"flex items-center justify-center bg-violet-100 rounded-full h-14 w-14 text-violet-700 font-bold text-xl overflow-hidden\">\n                                        {/* CORRECCIÓN: Usamos `photoURL` para la imagen */}\n                                        {user.photoURL ? (\n                                            <Image src={user.photoURL} alt=\"Avatar del usuario\" width={56} height={56} />\n                                        ) : (\n                                            /* CORRECIÓN: Pasamos `displayName` para las iniciales */\n                                            <span>{getInitials(user.displayName)}</span>\n                                        )}\n                                    </div>\n                                    <button onClick={logout} className=\"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-5 rounded-lg transition-colors text-base\">\n                                        Logout\n                                    </button>\n                                </div>\n                            ) : (\n                                <Link href=\"/login\">\n                                    <span className=\"bg-violet-600 hover:bg-violet-700 text-white font-bold py-3 px-6 rounded-lg transition-colors text-base\">Iniciar Sesión</span>\n                                </Link>\n                            )\n                        )}\n                    </div>\n                </div>\n            </nav>\n        </header>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,4DAA4D;AAC5D,MAAM,cAAc,CAAC;IACnB,IAAI,CAAC,MAAM,OAAO;IAClB,MAAM,QAAQ,KAAK,KAAK,CAAC;IACzB,IAAI,MAAM,MAAM,KAAK,GAAG,OAAO,KAAK,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,WAAW;IAC7D,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,MAAM,CAAC,KAAK,KAAK,CAAC,MAAM,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,EAAE,EAAE,WAAW;AAC7E;AAEe,SAAS;IACpB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,yIAAO;IACzC,qEAAqE;IACrE,MAAM,cAAc,MAAM,cAAc,KAAK,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG;IAEzE,qBACI,8OAAC;QAAO,WAAU;kBACd,cAAA,8OAAC;YAAI,WAAU;sBACX,cAAA,8OAAC;gBAAI,WAAU;;kCAEX,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC,uKAAI;4BAAC,MAAK;sCACP,cAAA,8OAAC,wIAAK;gCACF,KAAI;gCACJ,KAAI;gCACJ,OAAO;gCACP,QAAQ;gCACR,QAAQ;;;;;;;;;;;;;;;;kCAKpB,8OAAC;wBAAI,WAAU;;;;;;kCAEf,8OAAC;wBAAI,WAAU;kCACV,CAAC,WAAW,CACT,qBACI,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAK,WAAU;;wCAAqD;wCAAO;;;;;;;8CAC5E,8OAAC;oCAAI,WAAU;8CAEV,KAAK,QAAQ,iBACV,8OAAC,wIAAK;wCAAC,KAAK,KAAK,QAAQ;wCAAE,KAAI;wCAAqB,OAAO;wCAAI,QAAQ;;;;;+CAEvE,uDAAuD,iBACvD,8OAAC;kDAAM,YAAY,KAAK,WAAW;;;;;;;;;;;8CAG3C,8OAAC;oCAAO,SAAS;oCAAQ,WAAU;8CAAoG;;;;;;;;;;;iDAK3I,8OAAC,uKAAI;4BAAC,MAAK;sCACP,cAAA,8OAAC;gCAAK,WAAU;0CAA0G;;;;;;;;;;gCAGtI;;;;;;;;;;;;;;;;;;;;;;AAMxB","debugId":null}}]
}