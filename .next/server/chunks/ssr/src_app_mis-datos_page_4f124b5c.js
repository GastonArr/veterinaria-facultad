module.exports=[73916,a=>{"use strict";a.s(["default",()=>k]);var b=a.i(87924),c=a.i(31626),d=a.i(49975),e=a.i(50944),f=a.i(72131),g=a.i(6704);a.i(69387);var h=a.i(60574),i=a.i(16121);let j=({id:a,name:c,type:d,placeholder:e,value:f,onChange:g,required:h=!0,label:i})=>(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:a,children:i}),(0,b.jsx)("input",{className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",id:a,name:c,type:d,placeholder:e,value:f,onChange:g,required:h})]});function k(){let{user:a,loading:k,changePassword:l}=(0,d.useAuth)(),m=(0,e.useRouter)(),[n,o]=(0,f.useState)(null),[p,q]=(0,f.useState)(!0),[r,s]=(0,f.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,f.useEffect)(()=>{if(!k){if(!a)return void m.push("/login");(async()=>{let b=(0,h.doc)(i.db,"users",a.uid),c=await (0,h.getDoc)(b);c.exists()&&o(c.data()),q(!1)})()}},[a,k,m]);let t=a=>{let{name:b,value:c}=a.target;s(a=>({...a,[b]:c}))},u=async a=>{a.preventDefault();let{currentPassword:b,newPassword:c,confirmPassword:d}=r;if(c!==d)return void g.toast.error("La nueva contraseña y su confirmación no coinciden.");if(c.length<6)return void g.toast.error("La nueva contraseña debe tener al menos 6 caracteres.");let e=g.toast.loading("Cambiando contraseña...");try{await l(b,c),g.toast.success("¡Contraseña actualizada con éxito!",{id:e}),s({currentPassword:"",newPassword:"",confirmPassword:""})}catch(a){console.error(a),"auth/wrong-password"===a.code?g.toast.error("La contraseña actual es incorrecta.",{id:e}):g.toast.error("Hubo un error al cambiar la contraseña.",{id:e})}};return k||p?(0,b.jsxs)("div",{className:"jsx-141d105922663a28 flex justify-center items-center h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"jsx-141d105922663a28 loader"}),(0,b.jsx)(c.default,{id:"141d105922663a28",children:".loader.jsx-141d105922663a28{border:4px solid #f3f3f3;border-top-color:#3498db;border-radius:50%;width:40px;height:40px;animation:1s linear infinite spin}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"})]}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6 lg:p-8",children:[(0,b.jsx)(g.Toaster,{position:"bottom-center"}),(0,b.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,b.jsxs)("div",{className:"bg-white shadow-lg rounded-2xl p-6 sm:p-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-8 border-b pb-4",children:"Mis Datos"}),n?(0,b.jsxs)("div",{className:"space-y-4 text-gray-700 mb-10",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Nombre:"})," ",n.nombre," ",n.apellido]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"DNI:"})," ",n.dni]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Email:"})," ",a.email]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Dirección:"})," ",n.direccion,", ",n.barrio]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Teléfono:"})," ",n.telefonoPrincipal]})]}):(0,b.jsx)("p",{className:"text-gray-600 mb-10",children:"No se encontraron datos de perfil adicionales."}),(0,b.jsxs)("div",{className:"mt-8 pt-8 border-t",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Cambiar Contraseña"}),(0,b.jsxs)("form",{onSubmit:u,className:"max-w-md",children:[(0,b.jsx)(j,{id:"currentPassword",name:"currentPassword",type:"password",label:"Contraseña Actual",placeholder:"••••••••••",value:r.currentPassword,onChange:t}),(0,b.jsx)(j,{id:"newPassword",name:"newPassword",type:"password",label:"Nueva Contraseña",placeholder:"Mínimo 6 caracteres",value:r.newPassword,onChange:t}),(0,b.jsx)(j,{id:"confirmPassword",name:"confirmPassword",type:"password",label:"Confirmar Nueva Contraseña",placeholder:"Repite la nueva contraseña",value:r.confirmPassword,onChange:t}),(0,b.jsx)("button",{type:"submit",className:"w-full mt-4 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline transition-transform transform hover:scale-105",children:"Guardar Cambios"})]})]})]})})]})}}];

//# sourceMappingURL=src_app_mis-datos_page_4f124b5c.js.map