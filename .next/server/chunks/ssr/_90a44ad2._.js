module.exports=[47927,a=>{"use strict";a.s(["default",()=>h]);var b=a.i(87924),c=a.i(72131),d=a.i(49975),e=a.i(50944);a.i(69387);var f=a.i(60574),g=a.i(16121);function h({children:a}){let{user:h,loading:i}=(0,d.useAuth)(),j=(0,e.useRouter)(),k=(0,e.usePathname)(),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{if(!i){if(!h){"/login"!==k&&j.push("/login"),o(!1);return}(async()=>{try{let a=(0,f.doc)(g.db,"users",h.uid),b=await (0,f.getDoc)(a);b.exists()&&b.data().profileCompleted?m(!0):(m(!1),"/completar-perfil"!==k&&j.push("/completar-perfil"))}catch(a){console.error("Error al verificar el perfil:",a),m(!1),"/completar-perfil"!==k&&j.push("/completar-perfil")}finally{o(!1)}})()}},[h,i,j,k]),i||n)?(0,b.jsx)("div",{children:"Cargando..."}):(h||"/login"!==k)&&!l&&(l||"/completar-perfil"!==k)?null:a}},42343,a=>{"use strict";a.s(["GenIcon",()=>i],42343);var b=a.i(72131),c={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},d=b.default.createContext&&b.default.createContext(c),e=["attr","size","title"];function f(){return(f=Object.assign.bind()).apply(this,arguments)}function g(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function h(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?g(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):g(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function i(a){return c=>b.default.createElement(j,f({attr:h({},a.attr)},c),function a(c){return c&&c.map((c,d)=>b.default.createElement(c.tag,h({key:d},c.attr),a(c.child)))}(a.child))}function j(a){var g=c=>{var d,{attr:g,size:i,title:j}=a,k=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){if(b.indexOf(d)>=0)continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,e),l=i||c.size||"1em";return c.className&&(d=c.className),a.className&&(d=(d?d+" ":"")+a.className),b.default.createElement("svg",f({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},c.attr,g,k,{className:d,style:h(h({color:a.color||c.color},c.style),a.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),j&&b.default.createElement("title",null,j),a.children)};return void 0!==d?b.default.createElement(d.Consumer,null,a=>g(a)):g(c)}},97818,a=>{"use strict";a.s(["default",()=>j],97818);var b=a.i(87924),c=a.i(72131),d=a.i(49975),e=a.i(69699),f=a.i(33575),g=a.i(5050),h=(0,g.createServerReference)("40f04a978b523f8db9a71e69d2ff55b681f0c487bd",g.callServer,void 0,g.findSourceMapURL,"solicitarTurnoPeluqueria"),i=a.i(71682);function j({mascotas:a,ocupacion:g,disabledDays:j,maxTurnosManana:k,maxTurnosTarde:l}){let{user:m}=(0,d.useAuth)(),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)({cepillado:!1,rapado:!1,corteTijera:!1}),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!1),J=j.map(a=>"string"==typeof a?new Date(a+"T12:00:00"):a);(0,c.useEffect)(()=>{if(p){let a=g[p.toISOString().split("T")[0]];G(a&&a.manana>=k),I(a&&a.tarde>=l),("manana"===r&&F||"tarde"===r&&H)&&s("")}},[p,g,k,l,r,F,H]);let K=a=>u(b=>({...b,[a.target.name]:a.target.checked})),L=async b=>{if(b.preventDefault(),!m||!n||!p||!r||!x)return void A("Por favor, completa todos los campos, incluido el método de pago.");E(!0),A(""),C("");let c=Object.keys(t).filter(a=>t[a]),d=a.find(a=>a.id===n),e={clienteId:m.uid,mascotaId:n,tamañoMascota:d?.tamaño,fecha:p.toISOString().split("T")[0],turno:r,servicios:c,transporte:v,metodoPago:x,tipo:"peluqueria"};try{let a=await h(e);a.success?(C("¡Solicitud de turno enviada con éxito! Nos pondremos en contacto para confirmar."),o(""),q(null),s(""),w(!1),y(""),u({cepillado:!1,rapado:!1,corteTijera:!1})):A(a.error||"No se pudo procesar la solicitud.")}catch(a){A("Ocurrió un error inesperado.")}finally{E(!1)}};return(0,b.jsxs)("form",{onSubmit:L,className:"max-w-xl mx-auto bg-white p-8 rounded-2xl shadow-xl space-y-7",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-800",children:"Solicitar Turno de Peluquería"}),z&&(0,b.jsx)("p",{className:"text-sm text-red-600 bg-red-100 p-3 rounded-md text-center font-semibold",children:z}),B&&(0,b.jsx)("p",{className:"text-sm text-green-700 bg-green-100 p-3 rounded-md text-center font-semibold",children:B}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"mascota",className:"block text-sm font-medium text-gray-700 mb-1",children:"Elige tu mascota"}),(0,b.jsxs)("select",{id:"mascota",value:n,onChange:a=>o(a.target.value),required:!0,className:"w-full input",children:[(0,b.jsx)("option",{value:"",children:"Selecciona una mascota"}),a.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.nombre," (",a.tamaño,")"]},a.id))]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1. Selecciona el día"}),(0,b.jsx)(e.DayPicker,{mode:"single",selected:p,onSelect:q,locale:f.es,disabled:J,className:"bg-violet-50 p-4 rounded-lg",modifiersClassNames:{selected:"bg-violet-600 text-white",today:"text-violet-700 font-bold"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"2. Selecciona el turno disponible"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>s("manana"),disabled:F||!p,className:`py-3 rounded-lg text-sm font-semibold transition-all duration-200 ${"manana"===r?"bg-violet-600 text-white shadow-lg ring-2 ring-violet-400":"bg-gray-200 text-gray-700"} ${F||!p?"bg-gray-100 text-gray-400 cursor-not-allowed opacity-70":"hover:bg-violet-500 hover:text-white"}`,children:"Turno Mañana (8hs - 12hs)"}),(0,b.jsx)("button",{type:"button",onClick:()=>s("tarde"),disabled:H||!p,className:`py-3 rounded-lg text-sm font-semibold transition-all duration-200 ${"tarde"===r?"bg-violet-600 text-white shadow-lg ring-2 ring-violet-400":"bg-gray-200 text-gray-700"} ${H||!p?"bg-gray-100 text-gray-400 cursor-not-allowed opacity-70":"hover:bg-violet-500 hover:text-white"}`,children:"Turno Tarde (13hs - 17hs)"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"3. Elige el método de pago"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>y("efectivo"),className:`flex items-center justify-center py-3 rounded-lg text-sm font-semibold transition-all duration-200 ${"efectivo"===x?"bg-green-500 text-white shadow-lg ring-2 ring-green-300":"bg-gray-200 text-gray-700"} hover:bg-green-400 hover:text-white`,children:[(0,b.jsx)(i.FaMoneyBillWave,{className:"mr-2"}),"Efectivo"]}),(0,b.jsxs)("button",{type:"button",onClick:()=>y("mercado_pago"),className:`flex items-center justify-center py-3 rounded-lg text-sm font-semibold transition-all duration-200 ${"mercado_pago"===x?"bg-sky-500 text-white shadow-lg ring-2 ring-sky-300":"bg-gray-200 text-gray-700"} hover:bg-sky-400 hover:text-white`,children:[(0,b.jsx)(i.FaCreditCard,{className:"mr-2"}),"Mercado Pago"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Servicios Adicionales (Opcional)"}),(0,b.jsxs)("div",{className:"space-y-2 bg-gray-50 p-4 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("input",{id:"cepillado",name:"cepillado",type:"checkbox",checked:t.cepillado,onChange:K,className:"h-4 w-4 text-violet-600 focus:ring-violet-500 border-gray-300 rounded"}),(0,b.jsx)("label",{htmlFor:"cepillado",className:"ml-3 block text-sm text-gray-800",children:"Cepillado"})]}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("input",{id:"rapado",name:"rapado",type:"checkbox",checked:t.rapado,onChange:K,className:"h-4 w-4 text-violet-600 focus:ring-violet-500 border-gray-300 rounded"}),(0,b.jsx)("label",{htmlFor:"rapado",className:"ml-3 block text-sm text-gray-800",children:"Rapado Parejo"})]}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("input",{id:"corteTijera",name:"corteTijera",type:"checkbox",checked:t.corteTijera,onChange:K,className:"h-4 w-4 text-violet-600 focus:ring-violet-500 border-gray-300 rounded"}),(0,b.jsx)("label",{htmlFor:"corteTijera",className:"ml-3 block text-sm text-gray-800",children:"Corte a Tijera"})]})]})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"flex items-center bg-gray-50 p-4 rounded-lg",children:[(0,b.jsx)("input",{id:"transporte",name:"transporte",type:"checkbox",checked:v,onChange:a=>w(a.target.checked),className:"h-4 w-4 text-violet-600 focus:ring-violet-500 border-gray-300 rounded"}),(0,b.jsx)("label",{htmlFor:"transporte",className:"ml-3 block text-sm font-medium text-gray-800",children:"¿Necesitas transporte? (Opcional)"})]})}),(0,b.jsx)("button",{type:"submit",disabled:D||!p||!r||!n||!x,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-full shadow-sm text-sm font-medium text-white bg-violet-600 hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:D?"Enviando Solicitud...":"Solicitar Turno"})]})}}];

//# sourceMappingURL=_90a44ad2._.js.map