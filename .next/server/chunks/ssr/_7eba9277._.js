module.exports=[47927,a=>{"use strict";a.s(["default",()=>h]);var b=a.i(87924),c=a.i(72131),d=a.i(49975),e=a.i(50944);a.i(69387);var f=a.i(60574),g=a.i(16121);function h({children:a}){let{user:h,loading:i}=(0,d.useAuth)(),j=(0,e.useRouter)(),k=(0,e.usePathname)(),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{if(!i){if(!h){"/login"!==k&&j.push("/login"),o(!1);return}(async()=>{try{let a=(0,f.doc)(g.db,"users",h.uid),b=await (0,f.getDoc)(a);b.exists()&&b.data().profileCompleted?m(!0):(m(!1),"/completar-perfil"!==k&&j.push("/completar-perfil"))}catch(a){console.error("Error al verificar el perfil:",a),m(!1),"/completar-perfil"!==k&&j.push("/completar-perfil")}finally{o(!1)}})()}},[h,i,j,k]),i||n)?(0,b.jsx)("div",{children:"Cargando..."}):(h||"/login"!==k)&&!l&&(l||"/completar-perfil"!==k)?null:a}},42343,a=>{"use strict";a.s(["GenIcon",()=>i],42343);var b=a.i(72131),c={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},d=b.default.createContext&&b.default.createContext(c),e=["attr","size","title"];function f(){return(f=Object.assign.bind()).apply(this,arguments)}function g(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function h(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?g(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):g(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function i(a){return c=>b.default.createElement(j,f({attr:h({},a.attr)},c),function a(c){return c&&c.map((c,d)=>b.default.createElement(c.tag,h({key:d},c.attr),a(c.child)))}(a.child))}function j(a){var g=c=>{var d,{attr:g,size:i,title:j}=a,k=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){if(b.indexOf(d)>=0)continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,e),l=i||c.size||"1em";return c.className&&(d=c.className),a.className&&(d=(d?d+" ":"")+a.className),b.default.createElement("svg",f({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},c.attr,g,k,{className:d,style:h(h({color:a.color||c.color},c.style),a.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),j&&b.default.createElement("title",null,j),a.children)};return void 0!==d?b.default.createElement(d.Consumer,null,a=>g(a)):g(c)}},31228,a=>{"use strict";a.s(["default",()=>g],31228);var b=a.i(87924),c=a.i(72131),d=a.i(27348),e=a.i(5050),f=(0,e.createServerReference)("4023f484cfc7978ffe72ebc27cb3ef35fdf337c6d4",e.callServer,void 0,e.findSourceMapURL,"cancelarTurnoUsuario");function g({turno:a}){let[e,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),l=new Date;l.setHours(0,0,0,0);let m=new Date(a.fecha+"T12:00:00");if(!(("pendiente"===a.estado||"confirmado"===a.estado)&&m>=l))return null;let n=async()=>{if(window.confirm("¿Estás seguro de que quieres cancelar este turno? Esta acción no se puede deshacer.")){g(!0),i(""),k("");try{let b=await f(a.id);b.success?k("Turno cancelado con éxito."):i(b.error||"No se pudo cancelar el turno.")}catch(a){i("Error de conexión al intentar cancelar.")}finally{g(!1)}}};return(0,b.jsxs)("div",{className:"flex-shrink-0 self-center mt-4 sm:mt-0",children:[h&&(0,b.jsx)("p",{className:"text-xs text-red-600 mb-2 text-center",children:h}),j&&(0,b.jsx)("p",{className:"text-xs text-green-600 mb-2 text-center",children:j}),!j&&(0,b.jsxs)("button",{onClick:n,disabled:e,className:"flex items-center justify-center px-4 py-2 border border-red-300 text-sm font-medium rounded-full text-red-600 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,b.jsx)(d.FiTrash2,{className:"mr-2 h-4 w-4"}),e?"Cancelando...":"Cancelar Turno"]})]})}}];

//# sourceMappingURL=_7eba9277._.js.map