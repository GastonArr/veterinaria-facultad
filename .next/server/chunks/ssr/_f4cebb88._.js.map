{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/PrivateRoute.js"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useRouter, usePathname } from 'next/navigation';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\n\nexport default function PrivateRoute({ children }) {\n  const { user, loading } = useAuth();\n  const router = useRouter();\n  const pathname = usePathname();\n  const [isProfileComplete, setIsProfileComplete] = useState(false);\n  const [checkingProfile, setCheckingProfile] = useState(true);\n\n  useEffect(() => {\n    if (loading) return;\n\n    // If no user, redirect to login, but avoid loop if already there\n    if (!user) {\n      if (pathname !== '/login') {\n        router.push('/login');\n      }\n      // Set checking to false since we've made our decision\n      setCheckingProfile(false);\n      return;\n    }\n\n    const checkUserProfile = async () => {\n      try {\n        // Corrected collection from 'clientes' to 'users'\n        const userDocRef = doc(db, 'users', user.uid);\n        const userDoc = await getDoc(userDocRef);\n        \n        // Use the 'profileCompleted' flag for a more robust check\n        if (userDoc.exists() && userDoc.data().profileCompleted) {\n          setIsProfileComplete(true);\n        } else {\n          setIsProfileComplete(false);\n          if (pathname !== '/completar-perfil') {\n            router.push('/completar-perfil');\n          }\n        }\n      } catch (error) {\n        console.error(\"Error al verificar el perfil:\", error);\n        // On error, we'll assume profile is incomplete to be safe\n        setIsProfileComplete(false);\n        if (pathname !== '/completar-perfil') {\n          router.push('/completar-perfil');\n        }\n      } finally {\n        setCheckingProfile(false);\n      }\n    };\n\n    checkUserProfile();\n\n  }, [user, loading, router, pathname]);\n\n  // Show a loading indicator while we verify auth and profile status\n  if (loading || checkingProfile) {\n    return <div>Cargando...</div>; // Or a more sophisticated spinner/skeleton component\n  }\n\n  // If user is not logged in, and we are on a public route like /login, show the page\n  if (!user && pathname === '/login'){\n    return children;\n  }\n\n  // If the profile is complete, show the requested page\n  if (isProfileComplete) {\n    return children;\n  }\n  \n  // If the profile is not complete, but we are on the page to complete it, show the page\n  if (!isProfileComplete && pathname === '/completar-perfil') {\n    return children;\n  }\n\n  // In other cases (like waiting for redirect), return null to prevent content flash\n  return null;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AACA;AANA;;;;;;;AAQe,SAAS,aAAa,EAAE,QAAQ,EAAE;IAC/C,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,yIAAO;IACjC,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,IAAA,iJAAW;IAC5B,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAC;IAC3D,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IAEvD,IAAA,kNAAS,EAAC;QACR,IAAI,SAAS;QAEb,iEAAiE;QACjE,IAAI,CAAC,MAAM;YACT,IAAI,aAAa,UAAU;gBACzB,OAAO,IAAI,CAAC;YACd;YACA,sDAAsD;YACtD,mBAAmB;YACnB;QACF;QAEA,MAAM,mBAAmB;YACvB,IAAI;gBACF,kDAAkD;gBAClD,MAAM,aAAa,IAAA,wKAAG,EAAC,4HAAE,EAAE,SAAS,KAAK,GAAG;gBAC5C,MAAM,UAAU,MAAM,IAAA,2KAAM,EAAC;gBAE7B,0DAA0D;gBAC1D,IAAI,QAAQ,MAAM,MAAM,QAAQ,IAAI,GAAG,gBAAgB,EAAE;oBACvD,qBAAqB;gBACvB,OAAO;oBACL,qBAAqB;oBACrB,IAAI,aAAa,qBAAqB;wBACpC,OAAO,IAAI,CAAC;oBACd;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,iCAAiC;gBAC/C,0DAA0D;gBAC1D,qBAAqB;gBACrB,IAAI,aAAa,qBAAqB;oBACpC,OAAO,IAAI,CAAC;gBACd;YACF,SAAU;gBACR,mBAAmB;YACrB;QACF;QAEA;IAEF,GAAG;QAAC;QAAM;QAAS;QAAQ;KAAS;IAEpC,mEAAmE;IACnE,IAAI,WAAW,iBAAiB;QAC9B,qBAAO,8OAAC;sBAAI;;;;;kBAAmB,qDAAqD;IACtF;IAEA,oFAAoF;IACpF,IAAI,CAAC,QAAQ,aAAa,UAAS;QACjC,OAAO;IACT;IAEA,sDAAsD;IACtD,IAAI,mBAAmB;QACrB,OAAO;IACT;IAEA,uFAAuF;IACvF,IAAI,CAAC,qBAAqB,aAAa,qBAAqB;QAC1D,OAAO;IACT;IAEA,mFAAmF;IACnF,OAAO;AACT","debugId":null}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/turnos/peluqueria/page.js"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport PrivateRoute from \"@/app/components/PrivateRoute\";\nimport Footer from \"@/app/components/Footer\";\nimport { useAuth } from '@/contexts/AuthContext';\nimport { collection, query, where, getDocs } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\nimport { useRouter } from 'next/navigation';\n\nexport default function PeluqueriaPage() {\n  const { user } = useAuth();\n  const router = useRouter();\n  const [mascotas, setMascotas] = useState([]);\n  const [loadingMascotas, setLoadingMascotas] = useState(true);\n  const [selectedMascota, setSelectedMascota] = useState('');\n  const [fecha, setFecha] = useState('');\n  const [hora, setHora] = useState('');\n  const [notas, setNotas] = useState('');\n\n  useEffect(() => {\n    if (!user) return;\n\n    const fetchMascotas = async () => {\n      try {\n        const q = query(collection(db, 'mascotas'), where('dueño_uid', '==', user.uid));\n        const querySnapshot = await getDocs(q);\n        const listaMascotas = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n        setMascotas(listaMascotas);\n      } catch (error) {\n        console.error(\"Error al cargar las mascotas: \", error);\n      } finally {\n        setLoadingMascotas(false);\n      }\n    };\n\n    fetchMascotas();\n  }, [user]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // Lógica para guardar el turno en Firestore\n    console.log({ selectedMascota, fecha, hora, notas });\n    alert('Turno de peluquería solicitado (simulación)');\n  };\n\n  return (\n    <PrivateRoute>\n      <main className=\"container mx-auto px-4 py-8\">\n        <div className=\"flex justify-between items-center mb-8\">\n            <h1 className=\"text-3xl font-bold\">Turno de Peluquería</h1>\n            <button onClick={() => router.push('/')} className=\"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg\">\n              Volver\n            </button>\n        </div>\n        <form onSubmit={handleSubmit} className=\"max-w-lg mx-auto bg-white p-8 rounded-lg shadow-md\">\n          \n          <div className=\"mb-4\">\n            <label htmlFor=\"mascota\" className=\"block text-gray-700 font-bold mb-2\">Mascota</label>\n            <select id=\"mascota\" value={selectedMascota} onChange={(e) => setSelectedMascota(e.target.value)} className=\"w-full px-3 py-2 border rounded-lg\" required disabled={loadingMascotas}>\n              <option value=\"\">{loadingMascotas ? 'Cargando...' : 'Selecciona una mascota'}</option>\n              {mascotas.map(m => <option key={m.id} value={m.id}>{m.nombre}</option>)}\n            </select>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n            <div>\n              <label htmlFor=\"fecha\" className=\"block text-gray-700 font-bold mb-2\">Fecha</label>\n              <input type=\"date\" id=\"fecha\" value={fecha} onChange={(e) => setFecha(e.target.value)} className=\"w-full px-3 py-2 border rounded-lg\" required />\n            </div>\n            <div>\n              <label htmlFor=\"hora\" className=\"block text-gray-700 font-bold mb-2\">Hora</label>\n              <input type=\"time\" id=\"hora\" value={hora} onChange={(e) => setHora(e.target.value)} className=\"w-full px-3 py-2 border rounded-lg\" required />\n            </div>\n          </div>\n\n          <div className=\"mb-6\">\n            <label htmlFor=\"notas\" className=\"block text-gray-700 font-bold mb-2\">Notas Adicionales</label>\n            <textarea id=\"notas\" value={notas} onChange={(e) => setNotas(e.target.value)} rows=\"3\" className=\"w-full px-3 py-2 border rounded-lg\" placeholder=\"Corte especial, comportamiento, etc.\"></textarea>\n          </div>\n\n          <button type=\"submit\" className=\"w-full bg-violet-500 hover:bg-violet-700 text-white font-bold py-3 px-4 rounded-lg\">\n            Solicitar Turno\n          </button>\n        </form>\n      </main>\n      <Footer />\n    </PrivateRoute>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 379, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}