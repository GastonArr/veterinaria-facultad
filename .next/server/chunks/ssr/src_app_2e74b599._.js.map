{"version":3,"sources":["turbopack:///[project]/src/app/components/PrivateRoute.js","turbopack:///[project]/src/app/turnos/page.js"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useRouter, usePathname } from 'next/navigation';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\n\nexport default function PrivateRoute({ children }) {\n  const { user, loading } = useAuth();\n  const router = useRouter();\n  const pathname = usePathname();\n  const [isProfileComplete, setIsProfileComplete] = useState(false);\n  const [checkingProfile, setCheckingProfile] = useState(true);\n\n  useEffect(() => {\n    if (loading) return;\n\n\n    if (!user) {\n      if (pathname !== '/login') {\n        router.push('/login');\n      }\n\n      setCheckingProfile(false);\n      return;\n    }\n\n    const checkUserProfile = async () => {\n      try {\n\n        const userDocRef = doc(db, 'users', user.uid);\n        const userDoc = await getDoc(userDocRef);\n        \n\n        if (userDoc.exists() && userDoc.data().profileCompleted) {\n          setIsProfileComplete(true);\n        } else {\n          setIsProfileComplete(false);\n          if (pathname !== '/completar-perfil') {\n            router.push('/completar-perfil');\n          }\n        }\n      } catch (error) {\n        console.error(\"Error al verificar el perfil:\", error);\n\n        setIsProfileComplete(false);\n        if (pathname !== '/completar-perfil') {\n          router.push('/completar-perfil');\n        }\n      } finally {\n        setCheckingProfile(false);\n      }\n    };\n\n    checkUserProfile();\n\n  }, [user, loading, router, pathname]);\n\n  \n  if (loading || checkingProfile) {\n    return <div>Cargando...</div>; \n  }\n\n  \n  if (!user && pathname === '/login'){\n    return children;\n  }\n\n\n  if (isProfileComplete) {\n    return children;\n  }\n  \n  \n  if (!isProfileComplete && pathname === '/completar-perfil') {\n    return children;\n  }\n\n \n  return null;\n}\n","'use client';\n\nimport PrivateRoute from \"@/app/components/PrivateRoute\";\nimport Footer from \"@/app/components/Footer\";\n\nexport default function MisTurnosPage() {\n  return (\n    <PrivateRoute>\n      <main className=\"container mx-auto px-4 py-8\">\n        <h1 className=\"text-3xl font-bold text-center mb-8\">Mis Turnos</h1>\n        {/* Aquí se mostrará la lista de turnos del usuario */}\n      </main>\n      <Footer />\n    </PrivateRoute>\n  );\n}\n"],"names":[],"mappings":"+EAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,EAAa,UAAE,CAAQ,CAAE,EAC/C,GAAM,CAAE,MAAI,SAAE,CAAO,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAC3B,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAW,CAAA,EAAA,EAAA,WAAA,AAAW,IACtB,CAAC,EAAmB,EAAqB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACrD,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,SA+CvD,CA7CA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAI,GAGJ,GAAI,CAAC,EAHQ,AAGF,CACQ,UAAU,CAAvB,GACF,EAAO,IAAI,CAAC,UAGd,GAAmB,GACnB,MACF,CA6BA,CA3ByB,UACvB,GAAI,CAEF,IAAM,EAAa,CAAA,EAAA,EAAA,GAAG,AAAH,EAAI,EAAA,EAAE,CAAE,QAAS,EAAK,GAAG,EACtC,EAAU,MAAM,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,EAGzB,GAAQ,MAAM,IAAM,EAAQ,IAAI,GAAG,gBAAgB,CACrD,CADuD,EAClC,IAErB,GAAqB,GACJ,qBAAqB,CAAlC,GACF,EAAO,IAAI,CAAC,qBAGlB,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,gCAAiC,GAE/C,GAAqB,GACJ,qBAAqB,CAAlC,GACF,EAAO,IAAI,CAAC,oBAEhB,QAAU,CACR,GAAmB,EACrB,EACF,IAIF,EAAG,CAAC,EAAM,EAAS,EAAQ,EAAS,EAGhC,GAAW,GACN,CAAA,EAAA,EAAA,GAAA,EAAC,IADsB,EACtB,UAAI,iBAIV,AAAC,GAAqB,WAAb,CAAa,GAAS,CAK/B,IAKA,AAAC,GAAqB,AAAa,YALhB,WAKgB,EAKhC,CALqD,IATnD,CAeX,kEC/EA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAY,CAAA,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uCACd,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+CAAsC,iBAGtD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAM,CAAA,CAAA,KAGb"}