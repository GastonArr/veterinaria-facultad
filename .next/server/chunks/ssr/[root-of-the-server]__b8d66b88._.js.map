{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/lib/firebaseAdmin.js"],"sourcesContent":["// Historia de Usuario 5: Gestión de Roles de Usuario\n\nimport admin from 'firebase-admin';\n\n\nif (!admin.apps.length) {\n  try {\n    admin.initializeApp();\n  } catch (error) {\n    console.error('Error en la inicialización de Firebase Admin SDK:', error);\n  }\n}\n\n/**\n * Verifica la cookie de sesión de Firebase y devuelve el UID del usuario.\n * @param {string} sessionCookie La cadena de la cookie de sesión.\n * @returns {Promise<string|null>} El UID del usuario o null si la cookie no es válida.\n */\nexport async function getUserIdFromSession(sessionCookie) {\n  if (!sessionCookie) {\n    return null;\n  }\n  try {\n    const decodedClaims = await admin.auth().verifySessionCookie(sessionCookie, true);\n    return decodedClaims.uid;\n  } catch (error) {\n    console.error('Error al verificar la cookie de sesión:', error.code);\n    return null;\n  }\n}\n\n\nexport default admin;\n"],"names":[],"mappings":"AAAA,qDAAqD;;;;;;;AAErD;;AAGA,IAAI,CAAC,sIAAK,CAAC,IAAI,CAAC,MAAM,EAAE;IACtB,IAAI;QACF,sIAAK,CAAC,aAAa;IACrB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qDAAqD;IACrE;AACF;AAOO,eAAe,qBAAqB,aAAa;IACtD,IAAI,CAAC,eAAe;QAClB,OAAO;IACT;IACA,IAAI;QACF,MAAM,gBAAgB,MAAM,sIAAK,CAAC,IAAI,GAAG,mBAAmB,CAAC,eAAe;QAC5E,OAAO,cAAc,GAAG;IAC1B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2CAA2C,MAAM,IAAI;QACnE,OAAO;IACT;AACF;uCAGe,sIAAK","debugId":null}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/actions.js"],"sourcesContent":["// Historia de Usuario 5: Gestión de Roles de Usuario\n// Historia de Usuario 6: Completar Perfil de Usuario\n\n'use server';\n\nimport { revalidatePath } from 'next/cache';\nimport admin from '@/lib/firebaseAdmin';\n\n/**\n * @constant aplicationRoles\n * @description Define roles especiales asignados a usuarios específicos según su DNI.\n * Esto centraliza la lógica de asignación de roles de administrador o empleado.\n * Corresponde a la \"Historia de Usuario 5: Gestión de Roles de Usuario\".\n */\nconst aplicationRoles = {\n  '00000001': 'admin',      // Magali - DNI sin puntos\n  '00000002': 'peluquera',\n  '00000003': 'transporte',\n};\n\n/**\n * @function completarPerfil\n * @description Server Action para guardar los datos del perfil de un usuario y asignarle un rol.\n * Se ejecuta después de que un usuario se registra exitosamente.\n * Corresponde a las \"Historias de Usuario 5 y 6\".\n * @param {string} userId - El ID del usuario de Firebase Authentication.\n * @param {object} userData - Los datos del perfil del formulario.\n */\nexport async function completarPerfil(userId, userData) {\n  const firestore = admin.firestore();\n  const auth = admin.auth();\n\n  const { \n    nombre, \n    apellido, \n    dni, \n    telefonoPrincipal, \n    telefonoSecundario, \n    direccion, \n    barrio, \n    nombreContactoEmergencia, \n    telefonoContactoEmergencia \n  } = userData;\n  \n  if (!userId || !nombre || !apellido || !dni || !telefonoPrincipal || !direccion || !barrio || !nombreContactoEmergencia || !telefonoContactoEmergencia) {\n    console.error('Validation failed. Missing data:', { userId, ...userData });\n    return { success: false, error: 'Faltan datos esenciales para completar el perfil.' };\n  }\n\n  try {\n    // 1. Asignación de Rol (HU 5)\n    // Se verifica si el DNI del usuario corresponde a un rol especial.\n    // Si no, se le asigna el rol 'dueño' por defecto.\n    const userRole = aplicationRoles[dni] || 'dueño';\n\n    // Se establece el \"custom claim\" en Firebase Authentication. Este token de rol\n    // se usará en toda la app para controlar el acceso.\n    await auth.setCustomUserClaims(userId, { role: userRole });\n\n    // 2. Guardar Datos del Perfil en Firestore (HU 6)\n    // Se almacenan los detalles del perfil en la colección 'users'.\n    await firestore.collection('users').doc(userId).set({\n      nombre,\n      apellido,\n      dni,\n      telefonoPrincipal,\n      telefonoSecundario: telefonoSecundario || '',\n      direccion,\n      barrio,\n      nombreContactoEmergencia,\n      telefonoContactoEmergencia,\n      role: userRole,\n      profileCompleted: true,\n      createdAt: admin.firestore.FieldValue.serverTimestamp(),\n    }, { merge: true });\n\n    revalidatePath('/');\n    \n    return { success: true, role: userRole };\n\n  } catch (error) {\n    console.error('Error al completar el perfil en el servidor:', error);\n    return { success: false, error: 'Ocurrió un error en el servidor al procesar tu perfil.' };\n  }\n}\n\n/**\n * Server Action para agregar una nueva mascota a un usuario.\n */\nexport async function agregarMascota(userId, mascotaData) {\n    if (!userId) {\n        return { success: false, error: 'Usuario no autenticado.' };\n    }\n\n    const { nombre, especie, raza, fechaNacimiento, tamaño, enAdopcion } = mascotaData;\n\n    if (!nombre || !especie || !raza || !fechaNacimiento || !tamaño) {\n        return { success: false, error: 'Todos los campos, incluyendo el tamaño, son obligatorios.' };\n    }\n\n    const firestore = admin.firestore();\n\n    try {\n        const mascotaRef = await firestore.collection('users').doc(userId).collection('mascotas').add({\n            nombre,\n            especie,\n            raza,\n            fechaNacimiento,\n            tamaño,\n            enAdopcion: enAdopcion || false, \n            createdAt: new Date(),\n        });\n\n        revalidatePath('/mascotas');\n\n        return { success: true, mascotaId: mascotaRef.id };\n\n    } catch (error) {\n        console.error('Error al agregar la mascota:', error);\n        return { success: false, error: 'No se pudo registrar la mascota en la base de datos.' };\n    }\n}\n"],"names":[],"mappings":"AAAA,qDAAqD;AACrD,qDAAqD;;;;;;;;;AAIrD;AACA;;;;;;AAEA;;;;;CAKC,GACD,MAAM,kBAAkB;IACtB,YAAY;IACZ,YAAY;IACZ,YAAY;AACd;AAUO,eAAe,gBAAgB,MAAM,EAAE,QAAQ;IACpD,MAAM,YAAY,sIAAK,CAAC,SAAS;IACjC,MAAM,OAAO,sIAAK,CAAC,IAAI;IAEvB,MAAM,EACJ,MAAM,EACN,QAAQ,EACR,GAAG,EACH,iBAAiB,EACjB,kBAAkB,EAClB,SAAS,EACT,MAAM,EACN,wBAAwB,EACxB,0BAA0B,EAC3B,GAAG;IAEJ,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,YAAY,CAAC,OAAO,CAAC,qBAAqB,CAAC,aAAa,CAAC,UAAU,CAAC,4BAA4B,CAAC,4BAA4B;QACtJ,QAAQ,KAAK,CAAC,oCAAoC;YAAE;YAAQ,GAAG,QAAQ;QAAC;QACxE,OAAO;YAAE,SAAS;YAAO,OAAO;QAAoD;IACtF;IAEA,IAAI;QACF,8BAA8B;QAC9B,mEAAmE;QACnE,kDAAkD;QAClD,MAAM,WAAW,eAAe,CAAC,IAAI,IAAI;QAEzC,+EAA+E;QAC/E,oDAAoD;QACpD,MAAM,KAAK,mBAAmB,CAAC,QAAQ;YAAE,MAAM;QAAS;QAExD,kDAAkD;QAClD,gEAAgE;QAChE,MAAM,UAAU,UAAU,CAAC,SAAS,GAAG,CAAC,QAAQ,GAAG,CAAC;YAClD;YACA;YACA;YACA;YACA,oBAAoB,sBAAsB;YAC1C;YACA;YACA;YACA;YACA,MAAM;YACN,kBAAkB;YAClB,WAAW,sIAAK,CAAC,SAAS,CAAC,UAAU,CAAC,eAAe;QACvD,GAAG;YAAE,OAAO;QAAK;QAEjB,IAAA,+IAAc,EAAC;QAEf,OAAO;YAAE,SAAS;YAAM,MAAM;QAAS;IAEzC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gDAAgD;QAC9D,OAAO;YAAE,SAAS;YAAO,OAAO;QAAyD;IAC3F;AACF;AAKO,eAAe,eAAe,MAAM,EAAE,WAAW;IACpD,IAAI,CAAC,QAAQ;QACT,OAAO;YAAE,SAAS;YAAO,OAAO;QAA0B;IAC9D;IAEA,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,eAAe,EAAE,MAAM,EAAE,UAAU,EAAE,GAAG;IAEvE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,QAAQ,CAAC,mBAAmB,CAAC,QAAQ;QAC7D,OAAO;YAAE,SAAS;YAAO,OAAO;QAA4D;IAChG;IAEA,MAAM,YAAY,sIAAK,CAAC,SAAS;IAEjC,IAAI;QACA,MAAM,aAAa,MAAM,UAAU,UAAU,CAAC,SAAS,GAAG,CAAC,QAAQ,UAAU,CAAC,YAAY,GAAG,CAAC;YAC1F;YACA;YACA;YACA;YACA;YACA,YAAY,cAAc;YAC1B,WAAW,IAAI;QACnB;QAEA,IAAA,+IAAc,EAAC;QAEf,OAAO;YAAE,SAAS;YAAM,WAAW,WAAW,EAAE;QAAC;IAErD,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO;YAAE,SAAS;YAAO,OAAO;QAAuD;IAC3F;AACJ;;;IA7FsB;IA6DA;;AA7DA,+OAAA;AA6DA,+OAAA","debugId":null}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {completarPerfil as '607e2e33671e9af3b7c889b8ece695a8d12ed1593e'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/lib/session.js"],"sourcesContent":["import { cookies } from 'next/headers';\nimport admin from './firebaseAdmin';\n\n/**\n * @name getCurrentUser\n * @description Obtiene el usuario actual desde la cookie de sesión en el servidor.\n * Esta función solo debe ser usada en Componentes de Servidor o Rutas de API.\n * @returns {Promise<import('firebase-admin/auth').DecodedIdToken | null>} El token decodificado del usuario o null si no hay sesión.\n */\nexport async function getCurrentUser() {\n  const sessionCookie = cookies().get('session')?.value || '';\n\n  // Si no hay cookie, no hay usuario.\n  if (!sessionCookie) {\n    return null;\n  }\n\n  try {\n    // Verificamos la cookie de sesión con el Admin SDK.\n    // El segundo argumento `true` fuerza la comprobación de si la sesión ha sido revocada.\n    const decodedClaims = await admin.auth().verifySessionCookie(sessionCookie, true);\n    return decodedClaims;\n  } catch (error) {\n    // La cookie es inválida, ha expirado o ha sido revocada.\n    console.error(\"Error al verificar la cookie de sesión:\", error);\n    return null;\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAQO,eAAe;IACpB,MAAM,gBAAgB,IAAA,0IAAO,IAAG,GAAG,CAAC,YAAY,SAAS;IAEzD,oCAAoC;IACpC,IAAI,CAAC,eAAe;QAClB,OAAO;IACT;IAEA,IAAI;QACF,oDAAoD;QACpD,uFAAuF;QACvF,MAAM,gBAAgB,MAAM,sIAAK,CAAC,IAAI,GAAG,mBAAmB,CAAC,eAAe;QAC5E,OAAO;IACT,EAAE,OAAO,OAAO;QACd,yDAAyD;QACzD,QAAQ,KAAK,CAAC,2CAA2C;QACzD,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/GaleriaAdopciones.jsx"],"sourcesContent":["\nimport admin from '@/lib/firebaseAdmin';\nimport Image from 'next/image';\nimport Link from 'next/link';\n\n// Esta es una función de servidor que obtiene los datos directamente de Firestore.\nasync function getMascotasEnAdopcion() {\n    try {\n        const firestore = admin.firestore();\n        // ¡CONSULTA CORREGIDA! Ahora también ordena por fecha de creación.\n        const mascotasSnapshot = await firestore\n            .collectionGroup('mascotas')\n            .where('enAdopcion', '==', true)\n            .orderBy('createdAt', 'desc') // Mostramos las más recientes primero\n            .limit(8)\n            .get();\n\n        if (mascotasSnapshot.empty) {\n            return [];\n        }\n\n        const mascotas = mascotasSnapshot.docs.map(doc => ({\n            id: doc.id,\n            ...doc.data(),\n        }));\n\n        return mascotas;\n\n    } catch (error) {\n        console.error(\"Error al obtener mascotas en adopción:\", error);\n        // Si la consulta falla (por ejemplo, por el índice), devolvemos un array vacío.\n        // La consola del servidor de Next.js mostrará un error con un enlace para crear el índice.\n        return [];\n    }\n}\n\n// --- Componente de la Tarjeta de Mascota ---\nfunction MascotaCard({ mascota }) {\n    // Usamos la especie para obtener una imagen más relevante. Default a 'animal' si no está definida.\n    const especie = mascota.especie?.toLowerCase() === 'gato' ? 'cat' : 'dog';\n\n    return (\n        <Link href={`/adopciones/${mascota.id}`} className=\"group block bg-white rounded-2xl shadow-lg hover:shadow-2xl overflow-hidden transform hover:-translate-y-2 transition-all duration-300 ease-out\">\n            <div className=\"relative w-full h-56\">\n                <Image \n                    src={`https://loremflickr.com/320/320/${especie}?lock=${mascota.id}`} // loremflickr para fotos realistas y lock para que sea consistente\n                    alt={`Foto de ${mascota.nombre}`}\n                    fill\n                    style={{ objectFit: 'cover' }}\n                    className=\"transition-transform duration-300 group-hover:scale-110\"\n                />\n                {/* Overlay que aparece al hacer hover */}\n                <div className=\"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n                    <span className=\"text-white text-lg font-bold\">Ver Perfil</span>\n                </div>\n            </div>\n            <div className=\"p-5\">\n                <div className=\"flex justify-between items-start\">\n                    <h3 className=\"text-2xl font-bold text-gray-900 truncate\">{mascota.nombre}</h3>\n                    <span className={`mt-1 inline-block px-3 py-1 text-xs font-semibold rounded-full ${ \n                        mascota.sexo === 'macho' ? 'bg-blue-200 text-blue-800' :\n                        'bg-pink-200 text-pink-800'\n                    }`}>\n                        {mascota.sexo}\n                    </span>\n                </div>\n                <p className=\"text-gray-600 capitalize mb-3\">{mascota.raza}</p>\n                <span className={`inline-block px-3 py-1 text-sm font-semibold rounded-full ${ \n                    mascota.tamaño === 'grande' ? 'bg-red-200 text-red-800' :\n                    mascota.tamaño === 'mediano' ? 'bg-yellow-200 text-yellow-800' :\n                    'bg-green-200 text-green-800'\n                }`}>\n                    {mascota.tamaño}\n                </span>\n            </div>\n        </Link>\n    );\n}\n\n\n// --- Componente Principal de la Galería ---\nexport default async function GaleriaAdopciones() {\n    const mascotas = await getMascotasEnAdopcion();\n\n    return (\n        <section className=\"mb-20 md:mb-28\">\n            <div className=\"text-center mb-12\">\n                <h2 className=\"text-4xl md:text-5xl font-extrabold text-gray-800\">Una Nueva Oportunidad</h2>\n                <p className=\"text-lg text-gray-500 mt-2 max-w-2xl mx-auto\">Estos maravillosos compañeros están buscando un hogar lleno de amor. ¿Serás tú?</p>\n            </div>\n\n            {mascotas.length === 0 ? (\n                <div className=\"text-center text-gray-600 bg-gray-50 p-10 rounded-2xl shadow-inner border border-gray-200\">\n                     <p className=\"text-lg max-w-3xl mx-auto\">Por ahora no hay amiguitos buscando un nuevo hogar, ¡pero vuelve a revisar pronto!</p>\n                </div>\n            ) : (\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\">\n                    {mascotas.map(mascota => (\n                        <MascotaCard key={mascota.id} mascota={mascota} />\n                    ))}\n                </div>\n            )}\n        </section>\n    );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;;;;;AAEA,mFAAmF;AACnF,eAAe;IACX,IAAI;QACA,MAAM,YAAY,sIAAK,CAAC,SAAS;QACjC,mEAAmE;QACnE,MAAM,mBAAmB,MAAM,UAC1B,eAAe,CAAC,YAChB,KAAK,CAAC,cAAc,MAAM,MAC1B,OAAO,CAAC,aAAa,QAAQ,sCAAsC;SACnE,KAAK,CAAC,GACN,GAAG;QAER,IAAI,iBAAiB,KAAK,EAAE;YACxB,OAAO,EAAE;QACb;QAEA,MAAM,WAAW,iBAAiB,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,CAAC;gBAC/C,IAAI,IAAI,EAAE;gBACV,GAAG,IAAI,IAAI,EAAE;YACjB,CAAC;QAED,OAAO;IAEX,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,0CAA0C;QACxD,gFAAgF;QAChF,2FAA2F;QAC3F,OAAO,EAAE;IACb;AACJ;AAEA,8CAA8C;AAC9C,SAAS,YAAY,EAAE,OAAO,EAAE;IAC5B,mGAAmG;IACnG,MAAM,UAAU,QAAQ,OAAO,EAAE,kBAAkB,SAAS,QAAQ;IAEpE,qBACI,8OAAC,uKAAI;QAAC,MAAM,CAAC,YAAY,EAAE,QAAQ,EAAE,EAAE;QAAE,WAAU;;0BAC/C,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,wIAAK;wBACF,KAAK,CAAC,gCAAgC,EAAE,QAAQ,MAAM,EAAE,QAAQ,EAAE,EAAE;wBACpE,KAAK,CAAC,QAAQ,EAAE,QAAQ,MAAM,EAAE;wBAChC,IAAI;wBACJ,OAAO;4BAAE,WAAW;wBAAQ;wBAC5B,WAAU;;;;;;kCAGd,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAK,WAAU;sCAA+B;;;;;;;;;;;;;;;;;0BAGvD,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAG,WAAU;0CAA6C,QAAQ,MAAM;;;;;;0CACzE,8OAAC;gCAAK,WAAW,CAAC,+DAA+D,EAC7E,QAAQ,IAAI,KAAK,UAAU,8BAC3B,6BACF;0CACG,QAAQ,IAAI;;;;;;;;;;;;kCAGrB,8OAAC;wBAAE,WAAU;kCAAiC,QAAQ,IAAI;;;;;;kCAC1D,8OAAC;wBAAK,WAAW,CAAC,0DAA0D,EACxE,QAAQ,MAAM,KAAK,WAAW,4BAC9B,QAAQ,MAAM,KAAK,YAAY,kCAC/B,+BACF;kCACG,QAAQ,MAAM;;;;;;;;;;;;;;;;;;AAKnC;AAIe,eAAe;IAC1B,MAAM,WAAW,MAAM;IAEvB,qBACI,8OAAC;QAAQ,WAAU;;0BACf,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCAAoD;;;;;;kCAClE,8OAAC;wBAAE,WAAU;kCAA+C;;;;;;;;;;;;YAG/D,SAAS,MAAM,KAAK,kBACjB,8OAAC;gBAAI,WAAU;0BACV,cAAA,8OAAC;oBAAE,WAAU;8BAA4B;;;;;;;;;;qCAG9C,8OAAC;gBAAI,WAAU;0BACV,SAAS,GAAG,CAAC,CAAA,wBACV,8OAAC;wBAA6B,SAAS;uBAArB,QAAQ,EAAE;;;;;;;;;;;;;;;;AAMpD","debugId":null}},
    {"offset": {"line": 441, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/VistaTienda.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/components/VistaTienda.jsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/components/VistaTienda.jsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAsS,GACnU,oEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 455, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/VistaTienda.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/components/VistaTienda.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/components/VistaTienda.jsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAkR,GAC/S,gDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 469, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 477, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/Dashboard.js"],"sourcesContent":["import GaleriaAdopciones from './GaleriaAdopciones';\nimport VistaTienda from './VistaTienda';\nimport Link from 'next/link';\n\n// Este es un Componente de Servidor por defecto.\n// Puede renderizar otros componentes, tanto de Servidor como de Cliente.\nexport default function Dashboard() {\n  return (\n    <main className=\"flex-grow bg-white\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-20\">\n        {/* ========= SECCIÓN DE TURNOS (CLIENTE) ========= */}\n        <section className=\"text-center mb-20 md:mb-28\">\n            <div className=\"flex flex-col md:flex-row justify-center items-center gap-8\">\n                <Link \n                    href=\"/turnos/consulta\" \n                    className=\"w-full md:w-auto bg-violet-600 hover:bg-violet-700 text-white font-bold py-5 px-10 rounded-xl text-lg uppercase tracking-wider transition-transform transform hover:scale-105 shadow-xl hover:shadow-2xl focus:outline-none focus:ring-4 focus:ring-violet-300\"\n                >\n                    Pedir Turno Consulta\n                </Link>\n                <Link \n                    href=\"/turnos/peluqueria\" \n                    className=\"w-full md:w-auto bg-teal-500 hover:bg-teal-600 text-white font-bold py-5 px-10 rounded-xl text-lg uppercase tracking-wider transition-transform transform hover:scale-105 shadow-xl hover:shadow-2xl focus:outline-none focus:ring-4 focus:ring-teal-300\"\n                >\n                    Pedir Turno Peluquería\n                </Link>\n            </div>\n        </section>\n\n        {/* ========= SECCIÓN DE ADOPCIONES (SERVIDOR) ========= */}\n        {/* @ts-ignore -> https://github.com/vercel/next.js/issues/42292 */}\n        <GaleriaAdopciones />\n\n        {/* ========= SECCIÓN DE TIENDA (CLIENTE) ========= */}\n        <VistaTienda />\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAIe,SAAS;IACtB,qBACE,8OAAC;QAAK,WAAU;kBACd,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAQ,WAAU;8BACf,cAAA,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,uKAAI;gCACD,MAAK;gCACL,WAAU;0CACb;;;;;;0CAGD,8OAAC,uKAAI;gCACD,MAAK;gCACL,WAAU;0CACb;;;;;;;;;;;;;;;;;8BAQT,8OAAC,yJAAiB;;;;;8BAGlB,8OAAC,mJAAW;;;;;;;;;;;;;;;;AAIpB","debugId":null}},
    {"offset": {"line": 555, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/page.js"],"sourcesContent":["import { getCurrentUser } from '@/lib/session';\nimport Dashboard from '@/app/components/Dashboard';\nimport Link from 'next/link';\nimport Image from 'next/image';\n\n// Esta es ahora una página de servidor (Server Component).\n// No usa hooks de cliente y se renderiza completamente en el servidor.\nexport default async function HomePage() {\n    // Verificamos la sesión del usuario directamente en el servidor.\n    const user = await getCurrentUser();\n\n    // Si hay un usuario, mostramos el Dashboard principal.\n    if (user) {\n        // El Dashboard es otro Server Component que puede contener\n        // tanto Server Components (como GaleriaAdopciones) como Client Components (como VistaTienda).\n        return <Dashboard />;\n    }\n\n    // Si no hay usuario, mostramos la página de bienvenida (Landing Page).\n    return (\n        <div \n            className=\"relative min-h-screen flex items-center justify-center bg-cover bg-center\"\n            style={{ backgroundImage: \"url('/patron1.jpg')\" }}\n        >\n            <div className=\"absolute inset-0 bg-black opacity-30\"></div>\n            <div className=\"relative z-10 bg-white bg-opacity-80 p-8 md:p-12 rounded-xl shadow-2xl max-w-lg w-full text-center backdrop-blur-sm\">\n                <div className=\"flex justify-center mb-6\">\n                    <Image src=\"/LOGO.svg\" alt=\"Magalí Martin Veterinaria\" width={250} height={100} />\n                </div>\n                <h1 className=\"text-2xl md:text-3xl font-bold text-gray-800 mb-4\">\n                    ¡Bienvenido a la <span className=\"text-cyan-600\">Veterinaria Online</span>!\n                </h1>\n                <p className=\"text-gray-600 mb-3\">\n                    Aquí puedes encontrar la mejor atención para tus mascotas.\n                </p>\n                <p className=\"text-gray-600 mb-3\">\n                    Reservar turnos para la veterinaria y la peluquería de tus mascotas.\n                </p>\n                <p className=\"text-gray-600 mb-8\">\n                    Realizar compras y ver mascotas en adopción.\n                </p>\n                <Link href=\"/login\">\n                    <button\n                        className=\"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-3 px-6 rounded-lg text-lg transition-transform transform hover:scale-105 shadow-lg\"\n                    >\n                        Ingresar\n                    </button>\n                </Link>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;AAIe,eAAe;IAC1B,iEAAiE;IACjE,MAAM,OAAO,MAAM,IAAA,uIAAc;IAEjC,uDAAuD;IACvD,IAAI,MAAM;QACN,2DAA2D;QAC3D,8FAA8F;QAC9F,qBAAO,8OAAC,gJAAS;;;;;IACrB;IAEA,uEAAuE;IACvE,qBACI,8OAAC;QACG,WAAU;QACV,OAAO;YAAE,iBAAiB;QAAsB;;0BAEhD,8OAAC;gBAAI,WAAU;;;;;;0BACf,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC,wIAAK;4BAAC,KAAI;4BAAY,KAAI;4BAA4B,OAAO;4BAAK,QAAQ;;;;;;;;;;;kCAE/E,8OAAC;wBAAG,WAAU;;4BAAoD;0CAC7C,8OAAC;gCAAK,WAAU;0CAAgB;;;;;;4BAAyB;;;;;;;kCAE9E,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;kCAGlC,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;kCAGlC,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;kCAGlC,8OAAC,uKAAI;wBAAC,MAAK;kCACP,cAAA,8OAAC;4BACG,WAAU;sCACb;;;;;;;;;;;;;;;;;;;;;;;AAOrB","debugId":null}}]
}