module.exports=[47927,a=>{"use strict";a.s(["default",()=>h]);var b=a.i(87924),c=a.i(72131),d=a.i(49975),e=a.i(50944);a.i(69387);var f=a.i(60574),g=a.i(16121);function h({children:a}){let{user:h,loading:i}=(0,d.useAuth)(),j=(0,e.useRouter)(),k=(0,e.usePathname)(),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{if(!i){if(!h){"/login"!==k&&j.push("/login"),o(!1);return}(async()=>{try{let a=(0,f.doc)(g.db,"users",h.uid),b=await (0,f.getDoc)(a);b.exists()&&b.data().profileCompleted?m(!0):(m(!1),"/completar-perfil"!==k&&j.push("/completar-perfil"))}catch(a){console.error("Error al verificar el perfil:",a),m(!1),"/completar-perfil"!==k&&j.push("/completar-perfil")}finally{o(!1)}})()}},[h,i,j,k]),i||n)?(0,b.jsx)("div",{children:"Cargando..."}):(h||"/login"!==k)&&!l&&(l||"/completar-perfil"!==k)?null:a}},42343,a=>{"use strict";a.s(["GenIcon",()=>i],42343);var b=a.i(72131),c={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},d=b.default.createContext&&b.default.createContext(c),e=["attr","size","title"];function f(){return(f=Object.assign.bind()).apply(this,arguments)}function g(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function h(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?g(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):g(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function i(a){return c=>b.default.createElement(j,f({attr:h({},a.attr)},c),function a(c){return c&&c.map((c,d)=>b.default.createElement(c.tag,h({key:d},c.attr),a(c.child)))}(a.child))}function j(a){var g=c=>{var d,{attr:g,size:i,title:j}=a,k=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){if(b.indexOf(d)>=0)continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,e),l=i||c.size||"1em";return c.className&&(d=c.className),a.className&&(d=(d?d+" ":"")+a.className),b.default.createElement("svg",f({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},c.attr,g,k,{className:d,style:h(h({color:a.color||c.color},c.style),a.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),j&&b.default.createElement("title",null,j),a.children)};return void 0!==d?b.default.createElement(d.Consumer,null,a=>g(a)):g(c)}},88315,a=>{"use strict";a.s(["default",()=>j],88315);var b=a.i(87924),c=a.i(72131),d=a.i(49975),e=a.i(69699),f=a.i(33575),g=a.i(5050),h=(0,g.createServerReference)("40f3851fa82a1cdd976d911fc02bab21b6987feaa3",g.callServer,void 0,g.findSourceMapURL,"solicitarTurnoConsulta"),i=a.i(71682);function j({mascotas:a}){let{user:g}=(0,d.useAuth)(),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(!1),z=async a=>{if(a.preventDefault(),!g)return void u("Tu sesión ha expirado, por favor, recarga la página.");if(!j||!l||!n||!p||!r)return void u("Por favor, completa todos los campos, incluido el método de pago.");y(!0),u(""),w("");let b={clienteId:g.uid,mascotaId:j,fecha:l.toISOString().split("T")[0],turno:n,motivo:p,metodoPago:r,tipo:"consulta"};try{let a=await h(b);a.success?(w("¡Solicitud de turno enviada con éxito! Recibirás una confirmación por la misma vía."),k(""),m(null),o(""),q(""),s("")):u(a.error||"No se pudo procesar la solicitud.")}catch(a){u("Ocurrió un error inesperado al comunicarnos con el servidor.")}finally{y(!1)}},A=new Date;return(0,b.jsxs)("form",{onSubmit:z,className:"max-w-xl mx-auto bg-white p-8 rounded-2xl shadow-lg space-y-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-800",children:"Solicitar Turno para Consulta"}),t&&(0,b.jsx)("p",{className:"text-sm text-red-600 bg-red-100 p-3 rounded-md text-center",children:t}),v&&(0,b.jsx)("p",{className:"text-sm text-green-600 bg-green-100 p-3 rounded-md text-center",children:v}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"mascota",className:"block text-sm font-medium text-gray-700 mb-1",children:"Elige tu mascota"}),(0,b.jsxs)("select",{id:"mascota",value:j,onChange:a=>k(a.target.value),required:!0,className:"w-full input",children:[(0,b.jsx)("option",{value:"",children:"Selecciona una mascota"}),a.map(a=>(0,b.jsx)("option",{value:a.id,children:a.nombre},a.id))]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1. Selecciona el día"}),(0,b.jsx)(e.DayPicker,{mode:"single",selected:l,onSelect:m,locale:f.es,fromDate:A,className:"bg-violet-50 p-4 rounded-lg",modifiersClassNames:{selected:"bg-violet-600 text-white",today:"text-violet-700 font-bold"},disabled:{before:A}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"2. Selecciona el turno"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>o("manana"),className:`py-3 rounded-lg text-sm font-semibold transition-colors ${"manana"===n?"bg-violet-600 text-white shadow-md":"bg-gray-200 text-gray-700"}`,children:"Turno Mañana (8hs - 12hs)"}),(0,b.jsx)("button",{type:"button",onClick:()=>o("tarde"),className:`py-3 rounded-lg text-sm font-semibold transition-colors ${"tarde"===n?"bg-violet-600 text-white shadow-md":"bg-gray-200 text-gray-700"}`,children:"Turno Tarde (13hs - 17hs)"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"motivo",className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Motivo de la Consulta"}),(0,b.jsx)("textarea",{id:"motivo",name:"motivo",value:p,onChange:a=>q(a.target.value),rows:"4",required:!0,className:"w-full input",placeholder:"Describe brevemente el motivo de la consulta (ej. control anual, vómitos, cojera, etc.)"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"4. Elige el método de pago"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>s("efectivo"),className:`flex items-center justify-center py-3 rounded-lg text-sm font-semibold transition-all duration-200 ${"efectivo"===r?"bg-green-500 text-white shadow-lg ring-2 ring-green-300":"bg-gray-200 text-gray-700"} hover:bg-green-400 hover:text-white`,children:[(0,b.jsx)(i.FaMoneyBillWave,{className:"mr-2"}),"Efectivo"]}),(0,b.jsxs)("button",{type:"button",onClick:()=>s("mercado_pago"),className:`flex items-center justify-center py-3 rounded-lg text-sm font-semibold transition-all duration-200 ${"mercado_pago"===r?"bg-sky-500 text-white shadow-lg ring-2 ring-sky-300":"bg-gray-200 text-gray-700"} hover:bg-sky-400 hover:text-white`,children:[(0,b.jsx)(i.FaCreditCard,{className:"mr-2"}),"Mercado Pago"]})]})]}),(0,b.jsx)("button",{type:"submit",disabled:x||!l||!n||!j||!p||!r,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-full shadow-sm text-sm font-medium text-white bg-violet-600 hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:x?"Enviando Solicitud...":"Solicitar Turno"})]})}}];

//# sourceMappingURL=_15df9907._.js.map