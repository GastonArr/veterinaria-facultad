{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/PrivateRoute.js"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useRouter, usePathname } from 'next/navigation';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '@/lib/firebase'; \n\nexport default function PrivateRoute({ children }) {\n  const { user, loading } = useAuth();\n  const router = useRouter();\n  const pathname = usePathname();\n  const [isProfileComplete, setIsProfileComplete] = useState(false);\n  const [checkingProfile, setCheckingProfile] = useState(true);\n\n  useEffect(() => {\n    if (loading) return;\n    if (!user) {\n      router.push('/login');\n      return;\n    }\n\n    const checkUserProfile = async () => {\n      try {\n        const userDocRef = doc(db, 'clientes', user.uid);\n        const userDoc = await getDoc(userDocRef);\n        if (userDoc.exists() && userDoc.data().dni) {\n          setIsProfileComplete(true);\n        } else {\n          setIsProfileComplete(false);\n          if (pathname !== '/completar-perfil') {\n            router.push('/completar-perfil');\n          }\n        }\n      } catch (error) {\n        console.error(\"Error al verificar el perfil:\", error);\n      } finally {\n        setCheckingProfile(false);\n      }\n    };\n\n    checkUserProfile();\n\n  }, [user, loading, router, pathname]);\n\n  if (loading || checkingProfile) {\n    return <div>Cargando...</div>; // O un componente de carga más sofisticado\n  }\n\n  if (!user) {\n    return null; // O un fallback si el usuario no está autenticado\n  }\n\n  if (isProfileComplete || pathname === '/completar-perfil') {\n    return children;\n  } \n\n  return null;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AACA;AANA;;;;;;;AAQe,SAAS,aAAa,EAAE,QAAQ,EAAE;IAC/C,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,yIAAO;IACjC,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,IAAA,iJAAW;IAC5B,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAC;IAC3D,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IAEvD,IAAA,kNAAS,EAAC;QACR,IAAI,SAAS;QACb,IAAI,CAAC,MAAM;YACT,OAAO,IAAI,CAAC;YACZ;QACF;QAEA,MAAM,mBAAmB;YACvB,IAAI;gBACF,MAAM,aAAa,IAAA,wKAAG,EAAC,4HAAE,EAAE,YAAY,KAAK,GAAG;gBAC/C,MAAM,UAAU,MAAM,IAAA,2KAAM,EAAC;gBAC7B,IAAI,QAAQ,MAAM,MAAM,QAAQ,IAAI,GAAG,GAAG,EAAE;oBAC1C,qBAAqB;gBACvB,OAAO;oBACL,qBAAqB;oBACrB,IAAI,aAAa,qBAAqB;wBACpC,OAAO,IAAI,CAAC;oBACd;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,iCAAiC;YACjD,SAAU;gBACR,mBAAmB;YACrB;QACF;QAEA;IAEF,GAAG;QAAC;QAAM;QAAS;QAAQ;KAAS;IAEpC,IAAI,WAAW,iBAAiB;QAC9B,qBAAO,8OAAC;sBAAI;;;;;kBAAmB,2CAA2C;IAC5E;IAEA,IAAI,CAAC,MAAM;QACT,OAAO,MAAM,kDAAkD;IACjE;IAEA,IAAI,qBAAqB,aAAa,qBAAqB;QACzD,OAAO;IACT;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/Footer.jsx"],"sourcesContent":["'use client';\n\nexport default function Footer() {\n    return (\n        <footer className=\"bg-gray-800 text-white p-4 mt-auto\">\n            <div className=\"container mx-auto text-center\">\n                <p>&copy; 2024 Veterinaria Magali Martin. Todos los derechos reservados.</p>\n            </div>\n        </footer>\n    );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAEe,SAAS;IACpB,qBACI,8OAAC;QAAO,WAAU;kBACd,cAAA,8OAAC;YAAI,WAAU;sBACX,cAAA,8OAAC;0BAAE;;;;;;;;;;;;;;;;AAInB","debugId":null}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/mascotas/page.js"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport PrivateRoute from \"@/app/components/PrivateRoute\";\nimport Footer from \"@/app/components/Footer\";\nimport { useAuth } from '@/contexts/AuthContext';\nimport { collection, query, where, getDocs } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\nimport { useRouter } from 'next/navigation';\n\nexport default function MisMascotasPage() {\n  const { user } = useAuth();\n  const router = useRouter();\n  const [mascotas, setMascotas] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!user) return;\n\n    const fetchMascotas = async () => {\n      try {\n        const q = query(collection(db, 'mascotas'), where('dueño_uid', '==', user.uid));\n        const querySnapshot = await getDocs(q);\n        const listaMascotas = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n        setMascotas(listaMascotas);\n      } catch (error) {\n        console.error(\"Error al cargar las mascotas: \", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchMascotas();\n  }, [user]);\n\n  return (\n    <PrivateRoute>\n      <main className=\"container mx-auto px-4 py-8\">\n        <div className=\"flex justify-between items-center mb-8\">\n          <h1 className=\"text-3xl font-bold\">Mis Mascotas</h1>\n          <button \n            onClick={() => router.push('/mascotas/nueva')}\n            className=\"bg-violet-500 hover:bg-violet-700 text-white font-bold py-2 px-4 rounded-lg shadow-md\"\n          >\n            + Agregar Mascota\n          </button>\n        </div>\n\n        {loading ? (\n          <p>Cargando mascotas...</p>\n        ) : mascotas.length > 0 ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {mascotas.map(mascota => (\n              <div key={mascota.id} className=\"bg-white p-6 rounded-lg shadow-lg\">\n                <h2 className=\"text-2xl font-bold mb-2\">{mascota.nombre}</h2>\n                <p><strong>Especie:</strong> {mascota.especie}</p>\n                <p><strong>Edad:</strong> {mascota.edad} años</p>\n                <p><strong>Sexo:</strong> {mascota.sexo}</p>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <p className=\"text-center text-gray-500\">Aún no tienes mascotas registradas. ¡Agrega una!</p>\n        )}\n\n      </main>\n      <Footer />\n    </PrivateRoute>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AARA;;;;;;;;;AAUe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,yIAAO;IACxB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC,EAAE;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,MAAM;QAEX,MAAM,gBAAgB;YACpB,IAAI;gBACF,MAAM,IAAI,IAAA,0KAAK,EAAC,IAAA,+KAAU,EAAC,4HAAE,EAAE,aAAa,IAAA,0KAAK,EAAC,aAAa,MAAM,KAAK,GAAG;gBAC7E,MAAM,gBAAgB,MAAM,IAAA,4KAAO,EAAC;gBACpC,MAAM,gBAAgB,cAAc,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,CAAC;wBAAE,IAAI,IAAI,EAAE;wBAAE,GAAG,IAAI,IAAI,EAAE;oBAAC,CAAC;gBAClF,YAAY;YACd,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,kCAAkC;YAClD,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC;KAAK;IAET,qBACE,8OAAC,mJAAY;;0BACX,8OAAC;gBAAK,WAAU;;kCACd,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAAqB;;;;;;0CACnC,8OAAC;gCACC,SAAS,IAAM,OAAO,IAAI,CAAC;gCAC3B,WAAU;0CACX;;;;;;;;;;;;oBAKF,wBACC,8OAAC;kCAAE;;;;;+BACD,SAAS,MAAM,GAAG,kBACpB,8OAAC;wBAAI,WAAU;kCACZ,SAAS,GAAG,CAAC,CAAA,wBACZ,8OAAC;gCAAqB,WAAU;;kDAC9B,8OAAC;wCAAG,WAAU;kDAA2B,QAAQ,MAAM;;;;;;kDACvD,8OAAC;;0DAAE,8OAAC;0DAAO;;;;;;4CAAiB;4CAAE,QAAQ,OAAO;;;;;;;kDAC7C,8OAAC;;0DAAE,8OAAC;0DAAO;;;;;;4CAAc;4CAAE,QAAQ,IAAI;4CAAC;;;;;;;kDACxC,8OAAC;;0DAAE,8OAAC;0DAAO;;;;;;4CAAc;4CAAE,QAAQ,IAAI;;;;;;;;+BAJ/B,QAAQ,EAAE;;;;;;;;;6CASxB,8OAAC;wBAAE,WAAU;kCAA4B;;;;;;;;;;;;0BAI7C,8OAAC,8IAAM;;;;;;;;;;;AAGb","debugId":null}}]
}