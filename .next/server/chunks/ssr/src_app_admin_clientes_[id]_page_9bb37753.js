module.exports=[17513,a=>{"use strict";a.s(["default",()=>i],17513);var b=a.i(87924),c=a.i(72131),d=a.i(49975),e=a.i(16121);a.i(69387);var f=a.i(60574),g=a.i(50944);let h=({clientId:a,initialRating:d,onRatingChange:e})=>{let[f,g]=(0,c.useState)(d),[h,i]=(0,c.useState)(0),j=()=>{i(0)};return(0,b.jsx)("div",{className:"flex items-center",children:[1,2,3,4,5].map(c=>(0,b.jsx)("svg",{className:`w-6 h-6 cursor-pointer fill-current ${(h||f)>=c?"text-yellow-400":"text-gray-300"}`,onMouseOver:()=>{i(c)},onMouseLeave:j,onClick:()=>(b=>{g(b),e(a,b)})(c),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})},c))})},i=()=>{let{userRole:a}=(0,d.useAuth)(),i=(0,g.useRouter)(),{id:j}=(0,g.useParams)(),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(!0);(0,c.useEffect)(()=>{if("admin"!==a||!j){a&&"admin"!==a&&i.push("/");return}(async()=>{p(!0);try{let a=(0,f.doc)(e.db,"users",j),b=await (0,f.getDoc)(a);if(b.exists())l({id:b.id,...b.data()});else{console.error("No se encontró el cliente."),i.push("/admin/clientes");return}let c=(0,f.collection)(e.db,"pets"),d=(0,f.query)(c,(0,f.where)("ownerId","==",j)),g=(await (0,f.getDocs)(d)).docs.map(a=>({id:a.id,...a.data()}));n(g)}catch(a){console.error("Error al obtener los datos:",a)}p(!1)})()},[j,a,i]);let q=async(b,c)=>{if("admin"===a)try{let a=(0,f.doc)(e.db,"users",b);await (0,f.updateDoc)(a,{rating:c}),l(a=>({...a,rating:c}))}catch(a){console.error("Error al actualizar la calificación: ",a)}};return o||!a?(0,b.jsx)("p",{className:"text-center mt-8",children:"Cargando datos del cliente..."}):"admin"!==a?(0,b.jsx)("p",{className:"text-red-500 text-center mt-8",children:"No tienes permiso para ver esta página."}):k?(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("button",{onClick:()=>i.back(),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded mb-6 inline-flex items-center",children:[(0,b.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Volver"]}),(0,b.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6 md:p-8 mb-8",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center mb-4",children:[(0,b.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800 mr-4",children:k.displayName}),(0,b.jsx)("div",{className:"mt-2 sm:mt-0",children:(0,b.jsx)(h,{clientId:k.id,initialRating:k.rating||0,onRatingChange:q})})]}),(0,b.jsxs)("div",{className:"text-gray-600 space-y-2",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Email:"})," ",k.email]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Teléfono:"})," ",k.phone||"No especificado"]})]})]}),(0,b.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-gray-700",children:"Mascotas Registradas"}),(0,b.jsx)("div",{className:"bg-white shadow-md rounded my-6 overflow-x-auto",children:m.length>0?(0,b.jsxs)("table",{className:"min-w-full leading-normal",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Nombre"}),(0,b.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Especie"}),(0,b.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Raza"}),(0,b.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Edad"})]})}),(0,b.jsx)("tbody",{children:m.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:a.name||"N/A"}),(0,b.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:a.species||"N/A"}),(0,b.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:a.breed||"N/A"}),(0,b.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:a.age?`${a.age} a\xf1os`:"N/A"})]},a.id))})]}):(0,b.jsx)("div",{className:"text-center p-5",children:(0,b.jsx)("p",{className:"text-gray-500",children:"Este cliente aún no ha registrado ninguna mascota."})})})]}):(0,b.jsxs)("div",{className:"text-center mt-8",children:[(0,b.jsx)("p",{children:"No se pudo encontrar la información del cliente."}),(0,b.jsx)("button",{onClick:()=>i.push("/admin/clientes"),className:"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Volver a la lista"})]})}}];

//# sourceMappingURL=src_app_admin_clientes_%5Bid%5D_page_9bb37753.js.map