{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/HomePageClient.js/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/components/HomePageClient.js <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/components/HomePageClient.js <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAwS,GACrU,sEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/HomePageClient.js/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/components/HomePageClient.js from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/components/HomePageClient.js\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAoR,GACjT,kDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/lib/firebaseAdmin.js"],"sourcesContent":["// Historia de Usuario 5: Gestión de Roles de Usuario\n\nimport admin from 'firebase-admin';\n\n// Comprobación para asegurar que el código se ejecuta solo en el servidor.\nif (typeof window === 'undefined') {\n  if (!admin.apps.length) {\n    try {\n      // Para que el Admin SDK funcione en Vercel, necesita las credenciales de la cuenta de servicio.\n      // Estas deben ser almacenadas como una variable de entorno en el proyecto de Vercel.\n      const serviceAccount = JSON.parse(process.env.FIREBASE_SERVICE_ACCOUNT_KEY);\n\n      admin.initializeApp({\n        credential: admin.credential.cert(serviceAccount)\n      });\n\n      console.log('Firebase Admin SDK inicializado correctamente.');\n\n    } catch (error) {\n      // Este error es común si la variable de entorno no está configurada en Vercel.\n      console.error('ERROR AL INICIALIZAR FIREBASE ADMIN SDK:', error);\n      console.error('Asegúrate de haber configurado la variable de entorno FIREBASE_SERVICE_ACCOUNT_KEY en Vercel con el JSON de tu cuenta de servicio.');\n    }\n  }\n}\n\n/**\n * Verifica la cookie de sesión de Firebase y devuelve el UID del usuario.\n * @param {string} sessionCookie La cadena de la cookie de sesión.\n * @returns {Promise<string|null>} El UID del usuario o null si la cookie no es válida.\n */\nexport async function getUserIdFromSession(sessionCookie) {\n  if (!sessionCookie) {\n    return null;\n  }\n  try {\n    const decodedClaims = await admin.auth().verifySessionCookie(sessionCookie, false);\n    return decodedClaims.uid;\n  } catch (error) {\n    // Si el SDK no se inicializó, este error puede ocurrir.\n    if (error.code === 'auth/invalid-session-cookie') {\n         console.error(\"La cookie de sesión no es válida. Puede que haya expirado o el SDK de Admin no esté configurado correctamente.\")\n    } else {\n        console.error('Error al verificar la cookie de sesión:', error.code);\n    }\n    return null;\n  }\n}\n\n\nexport default admin;\n"],"names":[],"mappings":"AAAA,qDAAqD;;;;;;;AAErD;;AAEA,2EAA2E;AAC3E,wCAAmC;IACjC,IAAI,CAAC,sIAAK,CAAC,IAAI,CAAC,MAAM,EAAE;QACtB,IAAI;YACF,gGAAgG;YAChG,qFAAqF;YACrF,MAAM,iBAAiB,KAAK,KAAK,CAAC,QAAQ,GAAG,CAAC,4BAA4B;YAE1E,sIAAK,CAAC,aAAa,CAAC;gBAClB,YAAY,sIAAK,CAAC,UAAU,CAAC,IAAI,CAAC;YACpC;YAEA,QAAQ,GAAG,CAAC;QAEd,EAAE,OAAO,OAAO;YACd,+EAA+E;YAC/E,QAAQ,KAAK,CAAC,4CAA4C;YAC1D,QAAQ,KAAK,CAAC;QAChB;IACF;AACF;AAOO,eAAe,qBAAqB,aAAa;IACtD,IAAI,CAAC,eAAe;QAClB,OAAO;IACT;IACA,IAAI;QACF,MAAM,gBAAgB,MAAM,sIAAK,CAAC,IAAI,GAAG,mBAAmB,CAAC,eAAe;QAC5E,OAAO,cAAc,GAAG;IAC1B,EAAE,OAAO,OAAO;QACd,wDAAwD;QACxD,IAAI,MAAM,IAAI,KAAK,+BAA+B;YAC7C,QAAQ,KAAK,CAAC;QACnB,OAAO;YACH,QAAQ,KAAK,CAAC,2CAA2C,MAAM,IAAI;QACvE;QACA,OAAO;IACT;AACF;uCAGe,sIAAK","debugId":null}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/GaleriaAdopciones.jsx"],"sourcesContent":["\nimport admin from '@/lib/firebaseAdmin';\nimport Image from 'next/image';\nimport Link from 'next/link';\n\n// Esta es una función de servidor que obtiene los datos directamente de Firestore.\nasync function getMascotasEnAdopcion() {\n    try {\n        const firestore = admin.firestore();\n        // ¡CONSULTA CORREGIDA! Ahora también ordena por fecha de creación.\n        const mascotasSnapshot = await firestore\n            .collectionGroup('mascotas')\n            .where('enAdopcion', '==', true)\n            .orderBy('createdAt', 'desc') // Mostramos las más recientes primero\n            .limit(8)\n            .get();\n\n        if (mascotasSnapshot.empty) {\n            return [];\n        }\n\n        const mascotas = mascotasSnapshot.docs.map(doc => ({\n            id: doc.id,\n            ...doc.data(),\n        }));\n\n        return mascotas;\n\n    } catch (error) {\n        console.error(\"Error al obtener mascotas en adopción:\", error);\n        // Si la consulta falla (por ejemplo, por el índice), devolvemos un array vacío.\n        // La consola del servidor de Next.js mostrará un error con un enlace para crear el índice.\n        return [];\n    }\n}\n\n// --- Componente de la Tarjeta de Mascota ---\nfunction MascotaCard({ mascota }) {\n    // Usamos la especie para obtener una imagen más relevante. Default a 'animal' si no está definida.\n    const especie = mascota.especie?.toLowerCase() === 'gato' ? 'cat' : 'dog';\n\n    return (\n        <Link href={`/adopciones/${mascota.id}`} className=\"group block bg-white rounded-2xl shadow-lg hover:shadow-2xl overflow-hidden transform hover:-translate-y-2 transition-all duration-300 ease-out\">\n            <div className=\"relative w-full h-56\">\n                <Image \n                    src={`https://loremflickr.com/320/320/${especie}?lock=${mascota.id}`} // loremflickr para fotos realistas y lock para que sea consistente\n                    alt={`Foto de ${mascota.nombre}`}\n                    fill\n                    style={{ objectFit: 'cover' }}\n                    className=\"transition-transform duration-300 group-hover:scale-110\"\n                />\n                {/* Overlay que aparece al hacer hover */}\n                <div className=\"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n                    <span className=\"text-white text-lg font-bold\">Ver Perfil</span>\n                </div>\n            </div>\n            <div className=\"p-5\">\n                <div className=\"flex justify-between items-start\">\n                    <h3 className=\"text-2xl font-bold text-gray-900 truncate\">{mascota.nombre}</h3>\n                    <span className={`mt-1 inline-block px-3 py-1 text-xs font-semibold rounded-full ${ \n                        mascota.sexo === 'macho' ? 'bg-blue-200 text-blue-800' :\n                        'bg-pink-200 text-pink-800'\n                    }`}>\n                        {mascota.sexo}\n                    </span>\n                </div>\n                <p className=\"text-gray-600 capitalize mb-3\">{mascota.raza}</p>\n                <span className={`inline-block px-3 py-1 text-sm font-semibold rounded-full ${ \n                    mascota.tamaño === 'grande' ? 'bg-red-200 text-red-800' :\n                    mascota.tamaño === 'mediano' ? 'bg-yellow-200 text-yellow-800' :\n                    'bg-green-200 text-green-800'\n                }`}>\n                    {mascota.tamaño}\n                </span>\n            </div>\n        </Link>\n    );\n}\n\n\n// --- Componente Principal de la Galería ---\nexport default async function GaleriaAdopciones() {\n    const mascotas = await getMascotasEnAdopcion();\n\n    return (\n        <section className=\"mb-20 md:mb-28\">\n            <div className=\"text-center mb-12\">\n                <h2 className=\"text-4xl md:text-5xl font-extrabold text-gray-800\">Una Nueva Oportunidad</h2>\n                <p className=\"text-lg text-gray-500 mt-2 max-w-2xl mx-auto\">Estos maravillosos compañeros están buscando un hogar lleno de amor. ¿Serás tú?</p>\n            </div>\n\n            {mascotas.length === 0 ? (\n                <div className=\"text-center text-gray-600 bg-gray-50 p-10 rounded-2xl shadow-inner border border-gray-200\">\n                     <p className=\"text-lg max-w-3xl mx-auto\">Por ahora no hay amiguitos buscando un nuevo hogar, ¡pero vuelve a revisar pronto!</p>\n                </div>\n            ) : (\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\">\n                    {mascotas.map(mascota => (\n                        <MascotaCard key={mascota.id} mascota={mascota} />\n                    ))}\n                </div>\n            )}\n        </section>\n    );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;;;;;AAEA,mFAAmF;AACnF,eAAe;IACX,IAAI;QACA,MAAM,YAAY,sIAAK,CAAC,SAAS;QACjC,mEAAmE;QACnE,MAAM,mBAAmB,MAAM,UAC1B,eAAe,CAAC,YAChB,KAAK,CAAC,cAAc,MAAM,MAC1B,OAAO,CAAC,aAAa,QAAQ,sCAAsC;SACnE,KAAK,CAAC,GACN,GAAG;QAER,IAAI,iBAAiB,KAAK,EAAE;YACxB,OAAO,EAAE;QACb;QAEA,MAAM,WAAW,iBAAiB,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,CAAC;gBAC/C,IAAI,IAAI,EAAE;gBACV,GAAG,IAAI,IAAI,EAAE;YACjB,CAAC;QAED,OAAO;IAEX,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,0CAA0C;QACxD,gFAAgF;QAChF,2FAA2F;QAC3F,OAAO,EAAE;IACb;AACJ;AAEA,8CAA8C;AAC9C,SAAS,YAAY,EAAE,OAAO,EAAE;IAC5B,mGAAmG;IACnG,MAAM,UAAU,QAAQ,OAAO,EAAE,kBAAkB,SAAS,QAAQ;IAEpE,qBACI,8OAAC,uKAAI;QAAC,MAAM,CAAC,YAAY,EAAE,QAAQ,EAAE,EAAE;QAAE,WAAU;;0BAC/C,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,wIAAK;wBACF,KAAK,CAAC,gCAAgC,EAAE,QAAQ,MAAM,EAAE,QAAQ,EAAE,EAAE;wBACpE,KAAK,CAAC,QAAQ,EAAE,QAAQ,MAAM,EAAE;wBAChC,IAAI;wBACJ,OAAO;4BAAE,WAAW;wBAAQ;wBAC5B,WAAU;;;;;;kCAGd,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAK,WAAU;sCAA+B;;;;;;;;;;;;;;;;;0BAGvD,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAG,WAAU;0CAA6C,QAAQ,MAAM;;;;;;0CACzE,8OAAC;gCAAK,WAAW,CAAC,+DAA+D,EAC7E,QAAQ,IAAI,KAAK,UAAU,8BAC3B,6BACF;0CACG,QAAQ,IAAI;;;;;;;;;;;;kCAGrB,8OAAC;wBAAE,WAAU;kCAAiC,QAAQ,IAAI;;;;;;kCAC1D,8OAAC;wBAAK,WAAW,CAAC,0DAA0D,EACxE,QAAQ,MAAM,KAAK,WAAW,4BAC9B,QAAQ,MAAM,KAAK,YAAY,kCAC/B,+BACF;kCACG,QAAQ,MAAM;;;;;;;;;;;;;;;;;;AAKnC;AAIe,eAAe;IAC1B,MAAM,WAAW,MAAM;IAEvB,qBACI,8OAAC;QAAQ,WAAU;;0BACf,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCAAoD;;;;;;kCAClE,8OAAC;wBAAE,WAAU;kCAA+C;;;;;;;;;;;;YAG/D,SAAS,MAAM,KAAK,kBACjB,8OAAC;gBAAI,WAAU;0BACV,cAAA,8OAAC;oBAAE,WAAU;8BAA4B;;;;;;;;;;qCAG9C,8OAAC;gBAAI,WAAU;0BACV,SAAS,GAAG,CAAC,CAAA,wBACV,8OAAC;wBAA6B,SAAS;uBAArB,QAAQ,EAAE;;;;;;;;;;;;;;;;AAMpD","debugId":null}},
    {"offset": {"line": 319, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/VistaTienda.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/components/VistaTienda.jsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/components/VistaTienda.jsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAsS,GACnU,oEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 333, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/VistaTienda.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/components/VistaTienda.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/components/VistaTienda.jsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAkR,GAC/S,gDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 347, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 355, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/page.js"],"sourcesContent":["// Este es ahora un Componente de Servidor. No necesita 'use client'.\n\nimport HomePageClient from './components/HomePageClient';\nimport GaleriaAdopciones from './components/GaleriaAdopciones'; // Componente de Servidor\nimport VistaTienda from './components/VistaTienda'; // Componente de Cliente (pero lo tratamos aquí)\n\nexport default function HomePage() {\n  // Creamos un objeto con los componentes que queremos pasar al cliente\n  const serverComponents = {\n    galeria: <GaleriaAdopciones />,\n    tienda: <VistaTienda />,\n  };\n\n  // Renderizamos el componente de cliente y le pasamos los componentes de servidor como props\n  return <HomePageClient serverComponents={serverComponents} />;\n}\n"],"names":[],"mappings":"AAAA,qEAAqE;;;;;;AAErE;AACA,2PAAgE,yBAAyB;AACzF,+OAAoD,gDAAgD;;;;;AAErF,SAAS;IACtB,sEAAsE;IACtE,MAAM,mBAAmB;QACvB,uBAAS,8OAAC,yJAAiB;;;;;QAC3B,sBAAQ,8OAAC,mJAAW;;;;;IACtB;IAEA,4FAA4F;IAC5F,qBAAO,8OAAC,qJAAc;QAAC,kBAAkB;;;;;;AAC3C","debugId":null}}]
}