{"version":3,"sources":["turbopack:///[project]/src/app/components/FormularioNuevaMascota.jsx","turbopack:///[project]/src/app/data:0f4969 <text/javascript>"],"sourcesContent":["\n'use client';\n\nimport { useState } from 'react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { agregarMascota } from '@/app/actions';\nimport { Timestamp } from 'firebase/firestore'; // Importamos Timestamp\n\nexport default function FormularioNuevaMascota() {\n    const { user } = useAuth();\n    const [error, setError] = useState('');\n    const [success, setSuccess] = useState('');\n    const [loading, setLoading] = useState(false);\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n        setError('');\n        setSuccess('');\n        setLoading(true);\n\n        if (!user) {\n            setError('Debes iniciar sesión para registrar una mascota.');\n            setLoading(false);\n            return;\n        }\n\n        const formData = new FormData(event.currentTarget);\n        const mascotaData = {\n            nombre: formData.get('nombre'),\n            especie: formData.get('especie'),\n            raza: formData.get('raza'),\n            fechaNacimiento: formData.get('fechaNacimiento'),\n            sexo: formData.get('sexo'), \n            tamaño: formData.get('tamaño'),\n            enAdopcion: formData.get('enAdopcion') === 'on',\n            createdAt: Timestamp.now() \n        };\n\n\n        if (!mascotaData.nombre || !mascotaData.especie || !mascotaData.raza || !mascotaData.fechaNacimiento || !mascotaData.sexo) {\n            setError(\"Por favor, completa todos los campos obligatorios.\");\n            setLoading(false);\n            return;\n        }\n\n        try {\n            const result = await agregarMascota(user.uid, mascotaData);\n\n            if (result.success) {\n                setSuccess('¡Mascota registrada con éxito! En breve serás redirigido...');\n                event.target.reset();\n                setTimeout(() => {\n                    window.location.href = '/mascotas';\n                }, 2000);\n            } else {\n                setError(result.error || 'Ocurrió un error inesperado.');\n            }\n        } catch (err) {\n            setError(err.message);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                    <label htmlFor=\"nombre\" className=\"block text-sm font-medium text-gray-700\">Nombre</label>\n                    <input type=\"text\" name=\"nombre\" id=\"nombre\" required className=\"mt-1 block w-full input\" placeholder=\"Ej: Rocky\" disabled={loading} />\n                </div>\n                <div>\n                    <label htmlFor=\"fechaNacimiento\" className=\"block text-sm font-medium text-gray-700\">Fecha de Nacimiento</label>\n                    <input type=\"date\" name=\"fechaNacimiento\" id=\"fechaNacimiento\" required className=\"mt-1 block w-full input\" disabled={loading} />\n                </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                 <div>\n                    <label htmlFor=\"especie\" className=\"block text-sm font-medium text-gray-700\">Especie</label>\n                    <input type=\"text\" name=\"especie\" id=\"especie\" required className=\"mt-1 block w-full input\" placeholder=\"Ej: Perro\" disabled={loading} />\n                </div>\n                <div>\n                    <label htmlFor=\"raza\" className=\"block text-sm font-medium text-gray-700\">Raza</label>\n                    <input type=\"text\" name=\"raza\" id=\"raza\" required className=\"mt-1 block w-full input\" placeholder=\"Ej: Labrador\" disabled={loading} />\n                </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n               <div>\n                    <label htmlFor=\"sexo\" className=\"block text-sm font-medium text-gray-700\">Sexo</label>\n                    <select name=\"sexo\" id=\"sexo\" required className=\"mt-1 block w-full input\" disabled={loading}>\n                        <option value=\"\">Selecciona...</option>\n                        <option value=\"macho\">Macho</option>\n                        <option value=\"hembra\">Hembra</option>\n                    </select>\n                </div>\n                <div>\n                    <label htmlFor=\"tamaño\" className=\"block text-sm font-medium text-gray-700\">Tamaño</label>\n                    <select name=\"tamaño\" id=\"tamaño\" required className=\"mt-1 block w-full input\" disabled={loading}>\n                        <option value=\"pequeño\">Pequeño</option>\n                        <option value=\"mediano\">Mediano</option>\n                        <option value=\"grande\">Grande</option>\n                    </select>\n                </div>\n            </div>\n\n            <div className=\"flex items-center pt-4\">\n                <input id=\"enAdopcion\" name=\"enAdopcion\" type=\"checkbox\" className=\"h-4 w-4 text-violet-600 focus:ring-violet-500 border-gray-300 rounded\" disabled={loading} />\n                <label htmlFor=\"enAdopcion\" className=\"ml-3 block text-sm text-gray-900\">Marcar para poner en adopción</label>\n            </div>\n            \n            {error && <p className=\"text-sm text-red-600 bg-red-100 p-3 rounded-md\">{error}</p>}\n            {success && <p className=\"text-sm text-green-600 bg-green-100 p-3 rounded-md\">{success}</p>}\n\n            <div className=\"pt-6\">\n                <button \n                    type=\"submit\" \n                    disabled={loading}\n                    className=\"w-full flex justify-center py-3 px-4 border border-transparent rounded-full shadow-sm text-lg font-medium text-white bg-violet-600 hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500 transition-colors duration-300 disabled:bg-violet-400 disabled:cursor-not-allowed\"\n                >\n                    {loading ? 'Guardando...' : 'Registrar Mascota'}\n                </button>\n            </div>\n        </form>\n    );\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"60a8d1efab3c5d77cfe814777f59789d34f62988eb\":\"agregarMascota\"},\"src/app/actions.js\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var agregarMascota=/*#__PURE__*/createServerReference(\"60a8d1efab3c5d77cfe814777f59789d34f62988eb\",callServer,void 0,findSourceMapURL,\"agregarMascota\");"],"names":[],"mappings":"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"}