{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/lib/firebaseAdmin.js"],"sourcesContent":["import admin from 'firebase-admin';\n\nlet instance = null;\n\nfunction initializeAdmin() {\n  if (instance) {\n    return instance;\n  }\n\n  const projectId = process.env.FIREBASE_PROJECT_ID;\n  const clientEmail = process.env.FIREBASE_CLIENT_EMAIL;\n  const privateKey = process.env.FIREBASE_PRIVATE_KEY;\n\n  if (!projectId || !clientEmail || !privateKey) {\n    const missingVars = [];\n    if (!projectId) missingVars.push('FIREBASE_PROJECT_ID');\n    if (!clientEmail) missingVars.push('FIREBASE_CLIENT_EMAIL');\n    if (!privateKey) missingVars.push('FIREBASE_PRIVATE_KEY');\n\n    throw new Error(`Missing required Firebase environment variables: ${missingVars.join(', ')}`);\n  }\n\n  try {\n    admin.initializeApp({\n      credential: admin.credential.cert({\n        projectId,\n        clientEmail,\n        privateKey: privateKey.replace(/\\n/g, '\\n'),\n      }),\n    });\n    console.log('Firebase Admin SDK initialized successfully.');\n    instance = admin;\n    return instance;\n  } catch (error) {\n    console.error('Error initializing Firebase Admin SDK:', error);\n    throw new Error('Could not initialize Firebase Admin SDK.');\n  }\n}\n\nconst adminInstance = initializeAdmin();\n\nexport const firestore = adminInstance.firestore();\nexport const auth = adminInstance.auth();\n\nexport default adminInstance;\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,IAAI,WAAW;AAEf,SAAS;IACP,IAAI,UAAU;QACZ,OAAO;IACT;IAEA,MAAM,YAAY,QAAQ,GAAG,CAAC,mBAAmB;IACjD,MAAM,cAAc,QAAQ,GAAG,CAAC,qBAAqB;IACrD,MAAM,aAAa,QAAQ,GAAG,CAAC,oBAAoB;IAEnD,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,YAAY;QAC7C,MAAM,cAAc,EAAE;QACtB,IAAI,CAAC,WAAW,YAAY,IAAI,CAAC;QACjC,IAAI,CAAC,aAAa,YAAY,IAAI,CAAC;QACnC,IAAI,CAAC,YAAY,YAAY,IAAI,CAAC;QAElC,MAAM,IAAI,MAAM,CAAC,iDAAiD,EAAE,YAAY,IAAI,CAAC,OAAO;IAC9F;IAEA,IAAI;QACF,sIAAK,CAAC,aAAa,CAAC;YAClB,YAAY,sIAAK,CAAC,UAAU,CAAC,IAAI,CAAC;gBAChC;gBACA;gBACA,YAAY,WAAW,OAAO,CAAC,OAAO;YACxC;QACF;QACA,QAAQ,GAAG,CAAC;QACZ,WAAW,sIAAK;QAChB,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0CAA0C;QACxD,MAAM,IAAI,MAAM;IAClB;AACF;AAEA,MAAM,gBAAgB;AAEf,MAAM,YAAY,cAAc,SAAS;AACzC,MAAM,OAAO,cAAc,IAAI;uCAEvB","debugId":null}},
    {"offset": {"line": 137, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/actions/turnosActions.js"],"sourcesContent":["\"use server\";\n\nimport { revalidatePath } from \"next/cache\";\nimport { firestore } from \"@/lib/firebaseAdmin\"; // Asegurándonos que este es el admin SDK\nimport { collection, addDoc, serverTimestamp } from \"firebase/firestore\";\n\n/**\n * Guarda una nueva solicitud de turno en la base de datos.\n * @param {string} userId - El UID del cliente que solicita el turno.\n * @param {object} turnoData - Los datos del turno del formulario.\n * @returns {Promise<{success: boolean, error?: string}>}\n */\nexport async function solicitarTurno(userId, turnoData) {\n  if (!userId) {\n    return { success: false, error: \"Usuario no autenticado.\" };\n  }\n\n  const { mascotaId, motivo, fecha, tipo } = turnoData;\n\n  if (!mascotaId || !motivo || !fecha || !tipo) {\n    return { success: false, error: \"Faltan campos obligatorios.\" };\n  }\n\n  try {\n    const turnosCollection = firestore.collection(\"turnos\");\n\n    const nuevoTurno = {\n      ...turnoData,\n      clienteId: userId,\n      estado: \"pendiente\",\n      fechaSolicitud: serverTimestamp(),\n    };\n\n    await addDoc(turnosCollection, nuevoTurno);\n\n    revalidatePath(\"/turnos\"); // Opcional: revalidar la página de turnos\n    revalidatePath(\"/admin/turnos\"); // Opcional: revalidar la página de admin\n\n    return { success: true };\n  } catch (error) {\n    console.error(\"Error al solicitar turno:\", error);\n    return { success: false, error: \"No se pudo procesar la solicitud.\" };\n  }\n}\n"],"names":[],"mappings":";;;;;;AAEA;AACA,wNAAiD,yCAAyC;AAC1F;AAAA;;;;;;;AAQO,eAAe,eAAe,MAAM,EAAE,SAAS;IACpD,IAAI,CAAC,QAAQ;QACX,OAAO;YAAE,SAAS;YAAO,OAAO;QAA0B;IAC5D;IAEA,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG;IAE3C,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,SAAS,CAAC,MAAM;QAC5C,OAAO;YAAE,SAAS;YAAO,OAAO;QAA8B;IAChE;IAEA,IAAI;QACF,MAAM,mBAAmB,wIAAS,CAAC,UAAU,CAAC;QAE9C,MAAM,aAAa;YACjB,GAAG,SAAS;YACZ,WAAW;YACX,QAAQ;YACR,gBAAgB,IAAA,oLAAe;QACjC;QAEA,MAAM,IAAA,2KAAM,EAAC,kBAAkB;QAE/B,IAAA,+IAAc,EAAC,YAAY,0CAA0C;QACrE,IAAA,+IAAc,EAAC,kBAAkB,yCAAyC;QAE1E,OAAO;YAAE,SAAS;QAAK;IACzB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO;YAAE,SAAS;YAAO,OAAO;QAAoC;IACtE;AACF;;;IA/BsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/.next-internal/server/app/turnos/consulta/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {solicitarTurno as '60ee6d2b131e078c3d3c97d4d5f08185db97354768'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 231, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/turnos/consulta/page.js/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/turnos/consulta/page.js <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/turnos/consulta/page.js <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAmS,GAChU,iEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 245, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/turnos/consulta/page.js/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/turnos/consulta/page.js from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/turnos/consulta/page.js\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA+Q,GAC5S,6CACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 259, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}