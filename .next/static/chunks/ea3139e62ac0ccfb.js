(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6715,e=>{"use strict";e.s(["default",()=>n]);var t=e.i(43476),r=e.i(71645),o=e.i(73518),a=e.i(18566);e.i(36180);var l=e.i(98925),i=e.i(21052);function n(e){let{children:n}=e,{user:s,loading:c}=(0,o.useAuth)(),u=(0,a.useRouter)(),d=(0,a.usePathname)(),[m,f]=(0,r.useState)(!1),[g,b]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{if(!c){if(!s){"/login"!==d&&u.push("/login"),b(!1);return}(async()=>{try{let e=(0,l.doc)(i.db,"users",s.uid),t=await (0,l.getDoc)(e);t.exists()&&t.data().profileCompleted?f(!0):(f(!1),"/completar-perfil"!==d&&u.push("/completar-perfil"))}catch(e){console.error("Error al verificar el perfil:",e),f(!1),"/completar-perfil"!==d&&u.push("/completar-perfil")}finally{b(!1)}})()}},[s,c,u,d]),c||g)?(0,t.jsx)("div",{children:"Cargando..."}):(s||"/login"!==d)&&!m&&(m||"/completar-perfil"!==d)?null:n}},40141,e=>{"use strict";e.s(["GenIcon",()=>s],40141);var t=e.i(71645),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=t.default.createContext&&t.default.createContext(r),a=["attr","size","title"];function l(){return(l=Object.assign.bind()).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var o,a,l;o=e,a=t,l=r[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(a))in o?Object.defineProperty(o,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[a]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e){return r=>t.default.createElement(c,l({attr:n({},e.attr)},r),function e(r){return r&&r.map((r,o)=>t.default.createElement(r.tag,n({key:o},r.attr),e(r.child)))}(e.child))}function c(e){var i=r=>{var o,{attr:i,size:s,title:c}=e,u=function(e,t){if(null==e)return{};var r,o,a=function(e,t){if(null==e)return{};var r={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;r[o]=e[o]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)r=l[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,a),d=s||r.size||"1em";return r.className&&(o=r.className),e.className&&(o=(o?o+" ":"")+e.className),t.default.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,u,{className:o,style:n(n({color:e.color||r.color},r.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),c&&t.default.createElement("title",null,c),e.children)};return void 0!==o?t.default.createElement(o.Consumer,null,e=>i(e)):i(r)}},93067,e=>{"use strict";e.s(["default",()=>c],93067);var t=e.i(43476),r=e.i(71645),o=e.i(73518),a=e.i(97791),l=e.i(64211),i=e.i(95187),n=(0,i.createServerReference)("40f3851fa82a1cdd976d911fc02bab21b6987feaa3",i.callServer,void 0,i.findSourceMapURL,"solicitarTurnoConsulta"),s=e.i(11152);function c(e){let{mascotas:i}=e,{user:c}=(0,o.useAuth)(),[u,d]=(0,r.useState)(""),[m,f]=(0,r.useState)(null),[g,b]=(0,r.useState)(""),[p,x]=(0,r.useState)(""),[h,v]=(0,r.useState)(""),[y,j]=(0,r.useState)(""),[w,O]=(0,r.useState)(""),[N,S]=(0,r.useState)(!1),C=async e=>{if(e.preventDefault(),!c)return void j("Tu sesión ha expirado, por favor, recarga la página.");if(!u||!m||!g||!p||!h)return void j("Por favor, completa todos los campos, incluido el método de pago.");S(!0),j(""),O("");let t={clienteId:c.uid,mascotaId:u,fecha:m.toISOString().split("T")[0],turno:g,motivo:p,metodoPago:h,tipo:"consulta"};try{let e=await n(t);e.success?(O("¡Solicitud de turno enviada con éxito! Recibirás una confirmación por la misma vía."),d(""),f(null),b(""),x(""),v("")):j(e.error||"No se pudo procesar la solicitud.")}catch(e){j("Ocurrió un error inesperado al comunicarnos con el servidor.")}finally{S(!1)}},P=new Date;return(0,t.jsxs)("form",{onSubmit:C,className:"max-w-xl mx-auto bg-white p-8 rounded-2xl shadow-lg space-y-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-800",children:"Solicitar Turno para Consulta"}),y&&(0,t.jsx)("p",{className:"text-sm text-red-600 bg-red-100 p-3 rounded-md text-center",children:y}),w&&(0,t.jsx)("p",{className:"text-sm text-green-600 bg-green-100 p-3 rounded-md text-center",children:w}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"mascota",className:"block text-sm font-medium text-gray-700 mb-1",children:"Elige tu mascota"}),(0,t.jsxs)("select",{id:"mascota",value:u,onChange:e=>d(e.target.value),required:!0,className:"w-full input",children:[(0,t.jsx)("option",{value:"",children:"Selecciona una mascota"}),i.map(e=>(0,t.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1. Selecciona el día"}),(0,t.jsx)(a.DayPicker,{mode:"single",selected:m,onSelect:f,locale:l.es,fromDate:P,className:"bg-violet-50 p-4 rounded-lg",modifiersClassNames:{selected:"bg-violet-600 text-white",today:"text-violet-700 font-bold"},disabled:{before:P}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"2. Selecciona el turno"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>b("manana"),className:"py-3 rounded-lg text-sm font-semibold transition-colors ".concat("manana"===g?"bg-violet-600 text-white shadow-md":"bg-gray-200 text-gray-700"),children:"Turno Mañana (8hs - 12hs)"}),(0,t.jsx)("button",{type:"button",onClick:()=>b("tarde"),className:"py-3 rounded-lg text-sm font-semibold transition-colors ".concat("tarde"===g?"bg-violet-600 text-white shadow-md":"bg-gray-200 text-gray-700"),children:"Turno Tarde (13hs - 17hs)"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"motivo",className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Motivo de la Consulta"}),(0,t.jsx)("textarea",{id:"motivo",name:"motivo",value:p,onChange:e=>x(e.target.value),rows:"4",required:!0,className:"w-full input",placeholder:"Describe brevemente el motivo de la consulta (ej. control anual, vómitos, cojera, etc.)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"4. Elige el método de pago"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>v("efectivo"),className:"flex items-center justify-center py-3 rounded-lg text-sm font-semibold transition-all duration-200 ".concat("efectivo"===h?"bg-green-500 text-white shadow-lg ring-2 ring-green-300":"bg-gray-200 text-gray-700"," hover:bg-green-400 hover:text-white"),children:[(0,t.jsx)(s.FaMoneyBillWave,{className:"mr-2"}),"Efectivo"]}),(0,t.jsxs)("button",{type:"button",onClick:()=>v("mercado_pago"),className:"flex items-center justify-center py-3 rounded-lg text-sm font-semibold transition-all duration-200 ".concat("mercado_pago"===h?"bg-sky-500 text-white shadow-lg ring-2 ring-sky-300":"bg-gray-200 text-gray-700"," hover:bg-sky-400 hover:text-white"),children:[(0,t.jsx)(s.FaCreditCard,{className:"mr-2"}),"Mercado Pago"]})]})]}),(0,t.jsx)("button",{type:"submit",disabled:N||!m||!g||!u||!p||!h,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-full shadow-sm text-sm font-medium text-white bg-violet-600 hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:N?"Enviando Solicitud...":"Solicitar Turno"})]})}}]);