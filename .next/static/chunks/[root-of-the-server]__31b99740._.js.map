{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/inter_396b12ce.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"className\": \"inter_396b12ce-module__rRjk0G__className\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/inter_396b12ce.js"],"sourcesContent":["import cssModule from \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css?{%22path%22:%22layout.js%22,%22import%22:%22Inter%22,%22arguments%22:[{%22subsets%22:[%22latin%22]}],%22variableName%22:%22inter%22}\";\nconst fontData = {\n    className: cssModule.className,\n    style: {\n        fontFamily: \"'Inter', 'Inter Fallback'\",\n        fontStyle: \"normal\",\n\n    },\n};\n\nif (cssModule.variable != null) {\n    fontData.variable = cssModule.variable;\n}\n\nexport default fontData;\n"],"names":[],"mappings":";;;;AAAA;;AACA,MAAM,WAAW;IACb,WAAW,mKAAS,CAAC,SAAS;IAC9B,OAAO;QACH,YAAY;QACZ,WAAW;IAEf;AACJ;AAEA,IAAI,mKAAS,CAAC,QAAQ,IAAI,MAAM;IAC5B,SAAS,QAAQ,GAAG,mKAAS,CAAC,QAAQ;AAC1C;uCAEe","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/lib/firebaseConfig.js"],"sourcesContent":["export const firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n};"],"names":[],"mappings":";;;;AACU;AADH,MAAM,iBAAiB;IAC5B,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP","debugId":null}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/lib/firebase.js"],"sourcesContent":["import { initializeApp, getApps, getApp } from 'firebase/app';\nimport { getFirestore } from 'firebase/firestore';\nimport { getAuth } from 'firebase/auth';\nimport { firebaseConfig } from './firebaseConfig';\n\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\nconst db = getFirestore(app);\nconst auth = getAuth(app);\n\nexport { app, db, auth };"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;;;;;AAEA,MAAM,MAAM,CAAC,IAAA,8KAAO,IAAG,MAAM,GAAG,IAAA,oLAAa,EAAC,iJAAc,IAAI,IAAA,6KAAM;AACtE,MAAM,KAAK,IAAA,kLAAY,EAAC;AACxB,MAAM,OAAO,IAAA,wKAAO,EAAC","debugId":null}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/contexts/AuthContext.js"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport {\n    onAuthStateChanged,\n    GoogleAuthProvider,\n    signInWithPopup,\n    signOut as firebaseSignOut,\n    signInWithEmailAndPassword,\n    createUserWithEmailAndPassword,\n    sendPasswordResetEmail,\n    updatePassword,\n    EmailAuthProvider,\n    reauthenticateWithCredential\n} from 'firebase/auth';\nimport { auth, db } from '@/lib/firebase'; // AsegÃºrate de exportar `db` desde tu config de firebase\nimport { doc, getDoc } from 'firebase/firestore'; // Importamos funciones de Firestore\n\nconst AuthContext = createContext();\n\nexport const useAuth = () => useContext(AuthContext);\n\nexport const AuthProvider = ({ children }) => {\n    const [user, setUser] = useState(null);\n    const [loading, setLoading] = useState(true);\n    // AÃ±adimos un estado para saber si el usuario estÃ¡ logueado\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n    useEffect(() => {\n        const unsubscribe = onAuthStateChanged(auth, async (userAuth) => {\n            if (userAuth) {\n                // --- MEJORA: BUSCAMOS DATOS ADICIONALES EN FIRESTORE ---\n                const userDocRef = doc(db, 'users', userAuth.uid);\n                const userDocSnap = await getDoc(userDocRef);\n\n                if (userDocSnap.exists()) {\n                    // Si el documento existe, fusionamos los datos de auth y de la DB\n                    const userData = userDocSnap.data();\n                    setUser({ \n                        ...userAuth, \n                        ...userData // Esto aÃ±adirÃ¡ campos como `name`, `role`, etc.\n                    });\n                } else {\n                    // Si no hay documento, usamos solo los datos de auth.\n                    // PodrÃ­amos crear un documento aquÃ­ si fuera necesario al registrarse.\n                    setUser(userAuth);\n                }\n                setIsLoggedIn(true);\n            } else {\n                // Si no hay usuario de Firebase Auth, reseteamos el estado\n                setUser(null);\n                setIsLoggedIn(false);\n            }\n            setLoading(false);\n        });\n        return () => unsubscribe();\n    }, []);\n\n    const loginWithEmail = async (email, password) => {\n        try {\n            const userCredential = await signInWithEmailAndPassword(auth, email, password);\n            const idToken = await userCredential.user.getIdToken();\n\n            await fetch('/api/auth/session', {\n                method: 'POST',\n                headers: { 'Authorization': `Bearer ${idToken}` },\n            });\n            // El useEffect se encargarÃ¡ de actualizar el estado del usuario\n            return userCredential.user;\n        } catch (error) {\n            console.error(\"Error en loginWithEmail:\", error);\n            throw error;\n        }\n    };\n\n    const loginWithGoogle = async () => {\n        const provider = new GoogleAuthProvider();\n        try {\n            const result = await signInWithPopup(auth, provider);\n            const idToken = await result.user.getIdToken();\n\n            await fetch('/api/auth/session', {\n                method: 'POST',\n                headers: { 'Authorization': `Bearer ${idToken}` },\n            });\n            return result.user;\n        } catch (error) {\n            console.error(\"Error en loginWithGoogle:\", error);\n            throw error;\n        }\n    };\n\n    const signOut = async () => {\n        try {\n            await fetch('/api/auth/session', { method: 'DELETE' });\n            await firebaseSignOut(auth);\n            // El useEffect se encargarÃ¡ de limpiar el estado\n        } catch (error) {\n            console.error(\"Error en signOut:\", error);\n            throw error;\n        }\n    };\n\n    const registerWithEmailAndPassword = async (email, password) => {\n        return createUserWithEmailAndPassword(auth, email, password);\n    };\n\n    const resetPassword = (email) => {\n        return sendPasswordResetEmail(auth, email);\n    };\n\n    const changePassword = async (currentPassword, newPassword) => {\n        const credential = EmailAuthProvider.credential(user.email, currentPassword);\n        await reauthenticateWithCredential(user, credential);\n        return updatePassword(user, newPassword);\n    };\n\n    const value = {\n        user,\n        isLoggedIn, // Exponemos el booleano para mayor comodidad\n        loading,\n        loginWithGoogle,\n        loginWithEmail,\n        registerWithEmailAndPassword,\n        signOut, // Cambiado el nombre a `signOut` para consistencia\n        resetPassword,\n        changePassword,\n        logout: signOut // Exportamos `logout` como un alias de `signOut` para que el Header no se rompa\n    };\n\n    return (\n        <AuthContext.Provider value={value}>\n            {children}\n        </AuthContext.Provider>\n    );\n};\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AAYA,oNAA2C,0DAA0D;AACrG,6TAAkD,oCAAoC;AAAtF;;;AAhBA;;;;;AAkBA,MAAM,4BAAc,IAAA,8KAAa;AAE1B,MAAM,UAAU;;IAAM,OAAA,IAAA,2KAAU,EAAC;AAAW;GAAtC;AAEN,MAAM,eAAe;QAAC,EAAE,QAAQ,EAAE;;IACrC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,8DAA8D;IAC9D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,IAAA,0KAAS;kCAAC;YACN,MAAM,cAAc,IAAA,mLAAkB,EAAC,iIAAI;sDAAE,OAAO;oBAChD,IAAI,UAAU;wBACV,0DAA0D;wBAC1D,MAAM,aAAa,IAAA,yKAAG,EAAC,+HAAE,EAAE,SAAS,SAAS,GAAG;wBAChD,MAAM,cAAc,MAAM,IAAA,4KAAM,EAAC;wBAEjC,IAAI,YAAY,MAAM,IAAI;4BACtB,kEAAkE;4BAClE,MAAM,WAAW,YAAY,IAAI;4BACjC,QAAQ;gCACJ,GAAG,QAAQ;gCACX,GAAG,SAAS,kDAAkD;4BAClE;wBACJ,OAAO;4BACH,sDAAsD;4BACtD,yEAAyE;4BACzE,QAAQ;wBACZ;wBACA,cAAc;oBAClB,OAAO;wBACH,2DAA2D;wBAC3D,QAAQ;wBACR,cAAc;oBAClB;oBACA,WAAW;gBACf;;YACA;0CAAO,IAAM;;QACjB;iCAAG,EAAE;IAEL,MAAM,iBAAiB,OAAO,OAAO;QACjC,IAAI;YACA,MAAM,iBAAiB,MAAM,IAAA,2LAA0B,EAAC,iIAAI,EAAE,OAAO;YACrE,MAAM,UAAU,MAAM,eAAe,IAAI,CAAC,UAAU;YAEpD,MAAM,MAAM,qBAAqB;gBAC7B,QAAQ;gBACR,SAAS;oBAAE,iBAAiB,AAAC,UAAiB,OAAR;gBAAU;YACpD;YACA,iEAAiE;YACjE,OAAO,eAAe,IAAI;QAC9B,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,MAAM;QACV;IACJ;IAEA,MAAM,kBAAkB;QACpB,MAAM,WAAW,IAAI,mLAAkB;QACvC,IAAI;YACA,MAAM,SAAS,MAAM,IAAA,gLAAe,EAAC,iIAAI,EAAE;YAC3C,MAAM,UAAU,MAAM,OAAO,IAAI,CAAC,UAAU;YAE5C,MAAM,MAAM,qBAAqB;gBAC7B,QAAQ;gBACR,SAAS;oBAAE,iBAAiB,AAAC,UAAiB,OAAR;gBAAU;YACpD;YACA,OAAO,OAAO,IAAI;QACtB,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,6BAA6B;YAC3C,MAAM;QACV;IACJ;IAEA,MAAM,UAAU;QACZ,IAAI;YACA,MAAM,MAAM,qBAAqB;gBAAE,QAAQ;YAAS;YACpD,MAAM,IAAA,wKAAe,EAAC,iIAAI;QAC1B,kDAAkD;QACtD,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,qBAAqB;YACnC,MAAM;QACV;IACJ;IAEA,MAAM,+BAA+B,OAAO,OAAO;QAC/C,OAAO,IAAA,+LAA8B,EAAC,iIAAI,EAAE,OAAO;IACvD;IAEA,MAAM,gBAAgB,CAAC;QACnB,OAAO,IAAA,uLAAsB,EAAC,iIAAI,EAAE;IACxC;IAEA,MAAM,iBAAiB,OAAO,iBAAiB;QAC3C,MAAM,aAAa,kLAAiB,CAAC,UAAU,CAAC,KAAK,KAAK,EAAE;QAC5D,MAAM,IAAA,6LAA4B,EAAC,MAAM;QACzC,OAAO,IAAA,+KAAc,EAAC,MAAM;IAChC;IAEA,MAAM,QAAQ;QACV;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,QAAQ,QAAQ,gFAAgF;IACpG;IAEA,qBACI,6LAAC,YAAY,QAAQ;QAAC,OAAO;kBACxB;;;;;;AAGb;IAjHa;KAAA","debugId":null}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/Header.jsx"],"sourcesContent":["'use client';\n\nimport { useAuth } from '@/contexts/AuthContext';\nimport Link from 'next/link';\nimport Image from 'next/image';\n\n// FunciÃ³n para obtener iniciales para el avatar de fallback\nconst getInitials = (name) => {\n  if (!name) return '?';\n  const names = name.split(' ');\n  if (names.length === 1) return names[0].charAt(0).toUpperCase();\n  return (names[0].charAt(0) + names[names.length - 1].charAt(0)).toUpperCase();\n};\n\nexport default function Header() {\n    // CORRECCIÃ“N: Obtenemos el estado completo (isLoggedIn, user, logout) del contexto.\n    const { user, isLoggedIn, logout } = useAuth(); \n    \n    // La lÃ³gica ahora se basa en el `user` del contexto.\n    const displayName = user?.name ? user.name.split(' ')[0] : 'Usuario';\n\n    return (\n        <header className=\"bg-white shadow-sm sticky top-0 z-50 w-full\">\n            <nav className=\"max-w-screen-xl mx-auto px-6 lg:px-8\">\n                <div className=\"flex items-center justify-between h-24\">\n                    \n                    <div className=\"flex-shrink-0\">\n                        <Link href=\"/\">\n                            <Image \n                                src=\"/LOGO.svg\" \n                                alt=\"Logo de Veterinaria Magali Martin\"\n                                width={200}\n                                height={55}\n                                priority\n                            />\n                        </Link>\n                    </div>\n\n                    <div className=\"flex-grow\"></div>\n\n                    <div className=\"flex items-center gap-4 min-w-[250px] justify-end\">\n                        {/* CORRECCIÃ“N: La lÃ³gica se basa en `isLoggedIn` del contexto */}\n                        {isLoggedIn ? (\n                            <div className=\"flex items-center gap-4\">\n                                <span className=\"hidden lg:inline text-md font-medium text-gray-700\">Hola, {displayName}</span>\n                                <div className=\"flex items-center justify-center bg-violet-100 rounded-full h-14 w-14 text-violet-700 font-bold text-xl overflow-hidden\">\n                                    {/* CORRECCIÃ“N: Se usan los datos del `user` del contexto */}\n                                    {user.photoURL ? (\n                                        <Image src={user.photoURL} alt=\"Avatar del usuario\" width={56} height={56} />\n                                    ) : (\n                                        <span>{getInitials(user.name)}</span>\n                                    )}\n                                </div>\n                                <button onClick={logout} className=\"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-5 rounded-lg transition-colors text-base\">\n                                    Logout\n                                </button>\n                            </div>\n                        ) : (\n                            <Link href=\"/login\">\n                                <span className=\"bg-violet-600 hover:bg-violet-700 text-white font-bold py-3 px-6 rounded-lg transition-colors text-base\">Iniciar SesiÃ³n</span>\n                            </Link>\n                        )}\n                    </div>\n                </div>\n            </nav>\n        </header>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMA,6DAA6D;AAC7D,MAAM,cAAc,CAAC;IACnB,IAAI,CAAC,MAAM,OAAO;IAClB,MAAM,QAAQ,KAAK,KAAK,CAAC;IACzB,IAAI,MAAM,MAAM,KAAK,GAAG,OAAO,KAAK,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,WAAW;IAC7D,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,MAAM,CAAC,KAAK,KAAK,CAAC,MAAM,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,EAAE,EAAE,WAAW;AAC7E;AAEe,SAAS;;IACpB,qFAAqF;IACrF,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,EAAE,GAAG,IAAA,4IAAO;IAE5C,sDAAsD;IACtD,MAAM,cAAc,CAAA,iBAAA,2BAAA,KAAM,IAAI,IAAG,KAAK,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG;IAE3D,qBACI,6LAAC;QAAO,WAAU;kBACd,cAAA,6LAAC;YAAI,WAAU;sBACX,cAAA,6LAAC;gBAAI,WAAU;;kCAEX,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC,0KAAI;4BAAC,MAAK;sCACP,cAAA,6LAAC,2IAAK;gCACF,KAAI;gCACJ,KAAI;gCACJ,OAAO;gCACP,QAAQ;gCACR,QAAQ;;;;;;;;;;;;;;;;kCAKpB,6LAAC;wBAAI,WAAU;;;;;;kCAEf,6LAAC;wBAAI,WAAU;kCAEV,2BACG,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAK,WAAU;;wCAAqD;wCAAO;;;;;;;8CAC5E,6LAAC;oCAAI,WAAU;8CAEV,KAAK,QAAQ,iBACV,6LAAC,2IAAK;wCAAC,KAAK,KAAK,QAAQ;wCAAE,KAAI;wCAAqB,OAAO;wCAAI,QAAQ;;;;;6DAEvE,6LAAC;kDAAM,YAAY,KAAK,IAAI;;;;;;;;;;;8CAGpC,6LAAC;oCAAO,SAAS;oCAAQ,WAAU;8CAAoG;;;;;;;;;;;iDAK3I,6LAAC,0KAAI;4BAAC,MAAK;sCACP,cAAA,6LAAC;gCAAK,WAAU;0CAA0G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ1J;GArDwB;;QAEiB,4IAAO;;;KAFxB","debugId":null}},
    {"offset": {"line": 408, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/layout.js"],"sourcesContent":["'use client'\nimport { Inter } from \"next/font/google\";\nimport \"./globals.css\";\nimport { AuthProvider } from \"@/contexts/AuthContext\";\nimport Header from \"@/app/components/Header\";\n\nconst inter = Inter({ subsets: [\"latin\"] });\n\n// METADATA SE MANTIENE IGUAL\nexport const metadata = {\n  title: \"Veterinaria MagalÃ­ Martin\",\n  description: \"GestiÃ³n de turnos, adopciones y tienda online para tu mascota.\",\n};\n\nexport default function RootLayout({ children }) {\n  return (\n    <html lang=\"es\" className={inter.className}>\n      <body className={`bg-gray-50 flex flex-col min-h-screen`}>\n        {/* AuthProvider ahora envuelve toda la aplicaciÃ³n,\n            incluyendo el Header y el resto del contenido. */}\n        <AuthProvider>\n          {/* El Header ya no necesita props. ObtendrÃ¡ todo del AuthContext */}\n          <Header />\n          <main className=\"flex-grow w-full\">\n            {children}\n          </main>\n        </AuthProvider>\n      </body>\n    </html>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;AAGA;AACA;AAJA;;;;;;AASO,MAAM,WAAW;IACtB,OAAO;IACP,aAAa;AACf;AAEe,SAAS,WAAW,KAAY;QAAZ,EAAE,QAAQ,EAAE,GAAZ;IACjC,qBACE,6LAAC;QAAK,MAAK;QAAK,WAAW,uJAAK,CAAC,SAAS;kBACxC,cAAA,6LAAC;YAAK,WAAY;sBAGhB,cAAA,6LAAC,iJAAY;;kCAEX,6LAAC,iJAAM;;;;;kCACP,6LAAC;wBAAK,WAAU;kCACb;;;;;;;;;;;;;;;;;;;;;;AAMb;KAhBwB","debugId":null}}]
}