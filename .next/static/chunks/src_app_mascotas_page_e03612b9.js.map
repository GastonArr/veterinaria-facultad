{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/mascotas/page.js"],"sourcesContent":["\n'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport { collection, onSnapshot, query, orderBy } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\nimport { PawPrintIcon, PlusCircleIcon, TagIcon, CalendarIcon } from '@heroicons/react/24/solid';\n\n// Función para formatear Timestamps de Firestore a una fecha legible\nfunction formatFecha(timestamp) {\n    if (!timestamp) return 'Fecha no disponible';\n    const date = timestamp.toDate();\n    return new Intl.DateTimeFormat('es-ES', { dateStyle: 'long' }).format(date);\n}\n\n// Componente visual mejorado para cada mascota\nfunction MascotaCard({ mascota }) {\n    return (\n        <div className=\"bg-white/70 backdrop-blur-sm rounded-xl shadow-lg overflow-hidden transition-transform duration-300 hover:scale-[1.02] hover:shadow-xl\">\n            <div className={`p-5 border-l-8 ${mascota.enAdopcion ? 'border-amber-500' : 'border-violet-500'}`}>\n                <div className=\"flex items-center justify-between\">\n                    <h3 className=\"text-2xl font-bold text-gray-800\">{mascota.nombre}</h3>\n                    {mascota.enAdopcion && (\n                        <div className=\"flex items-center gap-2 bg-amber-100 text-amber-800 text-xs font-semibold px-3 py-1 rounded-full\">\n                            <TagIcon className=\"h-4 w-4\" />\n                            <span>En Adopción</span>\n                        </div>\n                    )}\n                </div>\n                <p className=\"text-md text-gray-600 font-medium capitalize\">{mascota.especie} - {mascota.raza || 'Sin raza'}</p>\n                <div className=\"flex items-center gap-2 mt-3 text-sm text-gray-500\">\n                    <CalendarIcon className=\"h-5 w-5 text-violet-400\" />\n                    <span>Nacimiento: {formatFecha(mascota.fechaNacimiento)}</span>\n                </div>\n            </div>\n             <Link href={`/mascotas/${mascota.id}/carnet`} className=\"block bg-gray-50 hover:bg-gray-100 text-center text-violet-700 font-semibold py-3 px-4 transition-colors duration-200\">\n                Ver Carnet Sanitario\n            </Link>\n        </div>\n    );\n}\n\nexport default function MascotasPage() {\n    const { user, loading: authLoading } = useAuth();\n    const router = useRouter();\n    const [mascotas, setMascotas] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        if (authLoading) return;\n        if (!user) {\n            router.replace('/login');\n            return;\n        }\n\n        const mascotasRef = collection(db, 'users', user.uid, 'mascotas');\n        const q = query(mascotasRef, orderBy('fechaRegistro', 'desc'));\n\n        const unsubscribe = onSnapshot(q, (snapshot) => {\n            const mascotasData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n            setMascotas(mascotasData);\n            setLoading(false);\n        }, (error) => {\n            console.error(\"Error al obtener las mascotas:\", error);\n            toast.error(\"No se pudieron cargar las mascotas.\");\n            setLoading(false);\n        });\n\n        return () => unsubscribe();\n    }, [user, authLoading, router]);\n\n    if (loading || authLoading) {\n        return (\n            <div className=\"flex justify-center items-center h-screen bg-violet-100\">\n                <div className=\"text-center\">\n                    <PawPrintIcon className=\"animate-spin h-12 w-12 text-violet-600 mx-auto\" />\n                    <p className=\"text-violet-800 font-semibold mt-2\">Cargando tus mascotas...</p>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"min-h-screen bg-violet-200 font-sans\">\n            <main className=\"container mx-auto px-4 py-8\">\n                <div className=\"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4\">\n                    <h1 className=\"text-4xl font-extrabold text-gray-800 tracking-tight\">Mis Mascotas</h1>\n                    <Link href=\"/mascotas/nueva\" className=\"inline-flex items-center gap-2 bg-violet-600 hover:bg-violet-700 text-white font-bold py-2 px-4 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105\">\n                        <PlusCircleIcon className=\"h-6 w-6\" />\n                        <span>Agregar Mascota</span>\n                    </Link>\n                </div>\n\n                {mascotas.length === 0 ? (\n                    <div className=\"text-center bg-white/60 backdrop-blur-sm p-12 rounded-2xl shadow-lg mt-10\">\n                        <PawPrintIcon className=\"mx-auto h-16 w-16 text-violet-400\" />\n                        <h2 className=\"mt-6 text-2xl font-bold text-gray-800\">Aún no has registrado ninguna mascota.</h2>\n                        <p className=\"text-gray-600 mt-2 mb-8 max-w-prose mx-auto\">¡Tu compañero fiel merece estar aquí! Añádelo para llevar un control de su salud y solicitar turnos de forma sencilla.</p>\n                        <Link href=\"/mascotas/nueva\" className=\"inline-block bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full text-lg shadow-xl transition-transform duration-200 hover:scale-105\">\n                            Registrar mi Primera Mascota\n                        </Link>\n                    </div>\n                ) : (\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                        {mascotas.map(mascota => (\n                            <MascotaCard key={mascota.id} mascota={mascota} />\n                        ))}\n                    </div>\n                )}\n            </main>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}