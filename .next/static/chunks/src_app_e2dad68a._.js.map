{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/PrivateRoute.js"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useRouter, usePathname } from 'next/navigation';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\n\nexport default function PrivateRoute({ children }) {\n  const { user, loading } = useAuth();\n  const router = useRouter();\n  const pathname = usePathname();\n  const [isProfileComplete, setIsProfileComplete] = useState(false);\n  const [checkingProfile, setCheckingProfile] = useState(true);\n\n  useEffect(() => {\n    if (loading) return;\n\n\n    if (!user) {\n      if (pathname !== '/login') {\n        router.push('/login');\n      }\n\n      setCheckingProfile(false);\n      return;\n    }\n\n    const checkUserProfile = async () => {\n      try {\n\n        const userDocRef = doc(db, 'users', user.uid);\n        const userDoc = await getDoc(userDocRef);\n        \n\n        if (userDoc.exists() && userDoc.data().profileCompleted) {\n          setIsProfileComplete(true);\n        } else {\n          setIsProfileComplete(false);\n          if (pathname !== '/completar-perfil') {\n            router.push('/completar-perfil');\n          }\n        }\n      } catch (error) {\n        console.error(\"Error al verificar el perfil:\", error);\n\n        setIsProfileComplete(false);\n        if (pathname !== '/completar-perfil') {\n          router.push('/completar-perfil');\n        }\n      } finally {\n        setCheckingProfile(false);\n      }\n    };\n\n    checkUserProfile();\n\n  }, [user, loading, router, pathname]);\n\n  \n  if (loading || checkingProfile) {\n    return <div>Cargando...</div>; \n  }\n\n  \n  if (!user && pathname === '/login'){\n    return children;\n  }\n\n\n  if (isProfileComplete) {\n    return children;\n  }\n  \n  \n  if (!isProfileComplete && pathname === '/completar-perfil') {\n    return children;\n  }\n\n \n  return null;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AACA;;;AANA;;;;;;AAQe,SAAS,aAAa,KAAY;QAAZ,EAAE,QAAQ,EAAE,GAAZ;;IACnC,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,4IAAO;IACjC,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAC;IAC3D,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IAEvD,IAAA,0KAAS;kCAAC;YACR,IAAI,SAAS;YAGb,IAAI,CAAC,MAAM;gBACT,IAAI,aAAa,UAAU;oBACzB,OAAO,IAAI,CAAC;gBACd;gBAEA,mBAAmB;gBACnB;YACF;YAEA,MAAM;2DAAmB;oBACvB,IAAI;wBAEF,MAAM,aAAa,IAAA,yKAAG,EAAC,+HAAE,EAAE,SAAS,KAAK,GAAG;wBAC5C,MAAM,UAAU,MAAM,IAAA,4KAAM,EAAC;wBAG7B,IAAI,QAAQ,MAAM,MAAM,QAAQ,IAAI,GAAG,gBAAgB,EAAE;4BACvD,qBAAqB;wBACvB,OAAO;4BACL,qBAAqB;4BACrB,IAAI,aAAa,qBAAqB;gCACpC,OAAO,IAAI,CAAC;4BACd;wBACF;oBACF,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,iCAAiC;wBAE/C,qBAAqB;wBACrB,IAAI,aAAa,qBAAqB;4BACpC,OAAO,IAAI,CAAC;wBACd;oBACF,SAAU;wBACR,mBAAmB;oBACrB;gBACF;;YAEA;QAEF;iCAAG;QAAC;QAAM;QAAS;QAAQ;KAAS;IAGpC,IAAI,WAAW,iBAAiB;QAC9B,qBAAO,6LAAC;sBAAI;;;;;;IACd;IAGA,IAAI,CAAC,QAAQ,aAAa,UAAS;QACjC,OAAO;IACT;IAGA,IAAI,mBAAmB;QACrB,OAAO;IACT;IAGA,IAAI,CAAC,qBAAqB,aAAa,qBAAqB;QAC1D,OAAO;IACT;IAGA,OAAO;AACT;GAzEwB;;QACI,4IAAO;QAClB,kJAAS;QACP,oJAAW;;;KAHN","debugId":null}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/mascotas/page.jsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { collection, query, where, getDocs, orderBy } from 'firebase/firestore';\nimport { db } from '@/lib/firebase'; \nimport PrivateRoute from '@/app/components/PrivateRoute';\nimport { FaPlusCircle, FaHeart } from 'react-icons/fa';\n\nconst MascotaCard = ({ mascota }) => {\n    const fechaNac = new Date(mascota.fechaNacimiento).toLocaleDateString('es-AR');\n    return (\n        <div className=\"bg-white rounded-xl shadow-lg overflow-hidden transform hover:-translate-y-1 transition-transform duration-300 relative\">\n            {mascota.enAdopcion && (\n                <div className=\"absolute top-3 right-3 bg-pink-500 text-white text-xs font-bold px-3 py-1 rounded-full flex items-center gap-1\">\n                    <FaHeart />\n                    <span>En Adopción</span>\n                </div>\n            )}\n            <div className=\"p-6\">\n                <h3 className=\"text-2xl font-bold text-gray-800 mb-2\">{mascota.nombre}</h3>\n                <p className=\"text-md text-gray-600\"><span className=\"font-semibold\">Especie:</span> {mascota.especie}</p>\n                <p className=\"text-md text-gray-600\"><span className=\"font-semibold\">Raza:</span> {mascota.raza}</p>\n                <p className=\"text-md text-gray-600\"><span className=\"font-semibold\">Nacimiento:</span> {fechaNac}</p>\n            </div>\n            <div className=\"bg-gray-50 p-4 flex justify-around\">\n                <Link href={`/mascotas/${mascota.id}/carnet`}>\n                    <span className=\"text-sm font-medium text-violet-600 hover:text-violet-800 transition-colors\">Ver Carnet</span>\n                </Link>\n                <button className=\"text-sm font-medium text-blue-600 hover:text-blue-800 transition-colors\">Editar</button>\n            </div>\n        </div>\n    );\n};\n\nconst MisMascotasContent = () => {\n    const { user } = useAuth();\n    const [mascotas, setMascotas] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        if (!user) return;\n\n        const fetchMascotas = async () => {\n            try {\n                const mascotasRef = collection(db, 'users', user.uid, 'mascotas');\n                const q = query(mascotasRef, orderBy('createdAt', 'desc'));\n                const snapshot = await getDocs(q);\n                const mascotasData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n                setMascotas(mascotasData);\n            } catch (error) {\n                console.error(\"Error al obtener las mascotas:\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchMascotas();\n    }, [user]);\n\n    if (loading) {\n        return <div className=\"flex justify-center items-center h-screen\"><div className=\"loader\"></div></div>; \n    }\n\n    return (\n        <div className=\"bg-gray-50 p-4 sm:p-6 lg:p-8\">\n            <div className=\"max-w-7xl mx-auto\">\n                 <div className=\"bg-white shadow-lg rounded-2xl p-6 sm:p-8\">\n                    {/* Cabecera con navegación y título */}\n                    <div className=\"flex items-center mb-8\">\n                        <Link href=\"/\" legacyBehavior>\n                            <a className=\"flex items-center text-gray-600 hover:text-gray-900 transition-colors mr-6\">\n                                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" /></svg>\n                                <span className=\"ml-1 font-medium\">Volver</span>\n                            </a>\n                        </Link>\n                        <h1 className=\"text-2xl font-bold text-gray-800 whitespace-nowrap\">Mis Mascotas</h1>\n                        <div className=\"w-full ml-6 border-b-2 border-dotted border-gray-300\"></div>\n                        <Link href=\"/mascotas/nueva\" legacyBehavior>\n                            <a className=\"ml-6 flex-shrink-0 inline-flex items-center gap-2 bg-violet-600 hover:bg-violet-700 text-white font-bold py-2 px-4 rounded-full transition-transform duration-300 transform hover:scale-105 shadow-lg\">\n                                <FaPlusCircle />\n                                Añadir\n                            </a>\n                        </Link>\n                    </div>\n\n                    {mascotas.length > 0 ? (\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n                            {mascotas.map(mascota => (\n                                <MascotaCard key={mascota.id} mascota={mascota} />\n                            ))}\n                        </div>\n                    ) : (\n                         <div className=\"text-center py-12\">\n                            <h3 className=\"text-2xl font-semibold text-gray-800\">Aún no tienes mascotas registradas</h3>\n                            <p className=\"mt-4 text-gray-600\">¡No esperes más! Añade a tu primer compañero.</p>\n                            <div className=\"mt-8\">\n                                <Link href=\"/mascotas/nueva\" legacyBehavior>\n                                    <a className=\"bg-violet-600 hover:bg-violet-700 text-white font-bold py-3 px-6 rounded-full transition-transform duration-300 transform hover:scale-105 shadow-lg\">\n                                        Registrar mi Primera Mascota\n                                    </a>\n                                </Link>\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default function MisMascotasPage() {\n    return (\n        <PrivateRoute>\n            <MisMascotasContent />\n        </PrivateRoute>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}