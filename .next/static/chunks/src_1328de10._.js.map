{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/lib/firebaseConfig.js"],"sourcesContent":["export const firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n};"],"names":[],"mappings":";;;;AACU;AADH,MAAM,iBAAiB;IAC5B,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP","debugId":null}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/lib/firebase.js"],"sourcesContent":["import { initializeApp, getApps, getApp } from 'firebase/app';\nimport { getFirestore } from 'firebase/firestore';\nimport { getAuth } from 'firebase/auth';\nimport { firebaseConfig } from './firebaseConfig';\n\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\nconst db = getFirestore(app);\nconst auth = getAuth(app);\n\nexport { app, db, auth };"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;;;;;AAEA,MAAM,MAAM,CAAC,IAAA,8KAAO,IAAG,MAAM,GAAG,IAAA,oLAAa,EAAC,iJAAc,IAAI,IAAA,6KAAM;AACtE,MAAM,KAAK,IAAA,kLAAY,EAAC;AACxB,MAAM,OAAO,IAAA,wKAAO,EAAC","debugId":null}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/contexts/AuthContext.js"],"sourcesContent":["\n'use client';\n\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport { \n    onAuthStateChanged,\n    GoogleAuthProvider,\n    signInWithPopup,\n    signOut,\n    signInWithEmailAndPassword,\n    sendPasswordResetEmail \n} from 'firebase/auth';\nimport { auth } from '@/lib/firebase';\nimport { useRouter } from 'next/navigation'; // Importamos useRouter\n\nconst AuthContext = createContext();\n\nexport const useAuth = () => useContext(AuthContext);\n\nexport const AuthProvider = ({ children }) => {\n    const [user, setUser] = useState(null);\n    const [userRole, setUserRole] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const router = useRouter();\n\n    const loginWithGoogle = async () => {\n        const provider = new GoogleAuthProvider();\n        try {\n            const result = await signInWithPopup(auth, provider);\n            // El useEffect se encargará del resto.\n            return result;\n        } catch (error) {\n            console.error(\"Error durante el inicio de sesión con Google:\", error);\n        }\n    };\n\n    const loginWithEmail = async (email, password) => {\n        try {\n            const result = await signInWithEmailAndPassword(auth, email, password);\n            // El useEffect se encargará del resto.\n            return result;\n        } catch (error) {\n            console.error(\"Error durante el inicio de sesión con email y contraseña:\", error);\n            throw error;\n        }\n    };\n\n    const resetPassword = async (email) => {\n        try {\n            await sendPasswordResetEmail(auth, email);\n        } catch (error) {\n            console.error(\"Error al enviar el correo de restablecimiento de contraseña:\", error);\n            throw error;\n        }\n    };\n\n    const logout = async () => {\n        try {\n            await signOut(auth);\n            // El useEffect se encargará de limpiar la cookie de sesión.\n            router.push('/login'); // Redirigir a login después de cerrar sesión.\n        } catch (error) {\n            console.error(\"Error durante el cierre de sesión:\", error);\n        }\n    };\n\n    useEffect(() => {\n        const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\n            setLoading(true);\n            if (currentUser) {\n                try {\n                    // 1. Obtener el token de ID del usuario actual\n                    const idToken = await currentUser.getIdToken();\n\n                    // 2. Enviar el token a nuestra API para crear la cookie de sesión\n                    await fetch('/api/auth/session', {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                        },\n                        body: JSON.stringify({ idToken }),\n                    });\n\n                    const idTokenResult = await currentUser.getIdTokenResult(true);\n                    const roleFromClaim = idTokenResult.claims.role;\n                    \n                    setUser(currentUser);\n                    setUserRole(roleFromClaim || 'dueño');\n\n                } catch (error) {\n                    console.error(\"Error al gestionar la sesión del usuario:\", error);\n                    setUser(currentUser);\n                    setUserRole('dueño');\n                }\n            } else {\n                // 3. Si no hay usuario, notificar a la API para que borre la cookie\n                await fetch('/api/auth/session', { method: 'DELETE' });\n                setUser(null);\n                setUserRole(null);\n            }\n            setLoading(false);\n        });\n\n        return () => unsubscribe();\n    }, []);\n\n    const value = {\n        user,\n        userRole, \n        loading,\n        loginWithGoogle,\n        loginWithEmail,\n        resetPassword,\n        logout,\n    };\n\n    return (\n        <AuthContext.Provider value={value}>\n            {children}\n        </AuthContext.Provider>\n    );\n};\n"],"names":[],"mappings":";;;;;;;AAGA;AACA;AAAA;AAQA;AACA,4OAA6C,uBAAuB;;;AAZpE;;;;;AAcA,MAAM,4BAAc,IAAA,8KAAa;AAE1B,MAAM,UAAU;;IAAM,OAAA,IAAA,2KAAU,EAAC;AAAW;GAAtC;AAEN,MAAM,eAAe;QAAC,EAAE,QAAQ,EAAE;;IACrC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,kBAAkB;QACpB,MAAM,WAAW,IAAI,mLAAkB;QACvC,IAAI;YACA,MAAM,SAAS,MAAM,IAAA,gLAAe,EAAC,iIAAI,EAAE;YAC3C,uCAAuC;YACvC,OAAO;QACX,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,iDAAiD;QACnE;IACJ;IAEA,MAAM,iBAAiB,OAAO,OAAO;QACjC,IAAI;YACA,MAAM,SAAS,MAAM,IAAA,2LAA0B,EAAC,iIAAI,EAAE,OAAO;YAC7D,uCAAuC;YACvC,OAAO;QACX,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,6DAA6D;YAC3E,MAAM;QACV;IACJ;IAEA,MAAM,gBAAgB,OAAO;QACzB,IAAI;YACA,MAAM,IAAA,uLAAsB,EAAC,iIAAI,EAAE;QACvC,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,gEAAgE;YAC9E,MAAM;QACV;IACJ;IAEA,MAAM,SAAS;QACX,IAAI;YACA,MAAM,IAAA,wKAAO,EAAC,iIAAI;YAClB,4DAA4D;YAC5D,OAAO,IAAI,CAAC,WAAW,8CAA8C;QACzE,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,sCAAsC;QACxD;IACJ;IAEA,IAAA,0KAAS;kCAAC;YACN,MAAM,cAAc,IAAA,mLAAkB,EAAC,iIAAI;sDAAE,OAAO;oBAChD,WAAW;oBACX,IAAI,aAAa;wBACb,IAAI;4BACA,+CAA+C;4BAC/C,MAAM,UAAU,MAAM,YAAY,UAAU;4BAE5C,kEAAkE;4BAClE,MAAM,MAAM,qBAAqB;gCAC7B,QAAQ;gCACR,SAAS;oCACL,gBAAgB;gCACpB;gCACA,MAAM,KAAK,SAAS,CAAC;oCAAE;gCAAQ;4BACnC;4BAEA,MAAM,gBAAgB,MAAM,YAAY,gBAAgB,CAAC;4BACzD,MAAM,gBAAgB,cAAc,MAAM,CAAC,IAAI;4BAE/C,QAAQ;4BACR,YAAY,iBAAiB;wBAEjC,EAAE,OAAO,OAAO;4BACZ,QAAQ,KAAK,CAAC,6CAA6C;4BAC3D,QAAQ;4BACR,YAAY;wBAChB;oBACJ,OAAO;wBACH,oEAAoE;wBACpE,MAAM,MAAM,qBAAqB;4BAAE,QAAQ;wBAAS;wBACpD,QAAQ;wBACR,YAAY;oBAChB;oBACA,WAAW;gBACf;;YAEA;0CAAO,IAAM;;QACjB;iCAAG,EAAE;IAEL,MAAM,QAAQ;QACV;QACA;QACA;QACA;QACA;QACA;QACA;IACJ;IAEA,qBACI,6LAAC,YAAY,QAAQ;QAAC,OAAO;kBACxB;;;;;;AAGb;IAtGa;;QAIM,kJAAS;;;KAJf","debugId":null}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/Header.jsx"],"sourcesContent":["\n'use client';\nimport Link from 'next/link';\nimport { useAuth } from '@/contexts/AuthContext';\n\nconst Header = () => {\n  const { user, loading, logout, userRole } = useAuth();\n\n  return (\n    <header className=\"bg-white text-gray-800 p-4 flex flex-wrap justify-between items-center shadow-md sticky top-0 z-50 w-full gap-y-3 sm:gap-y-0\">\n\n      {/* 1. Título a la Izquierda */}\n      <div className=\"flex-shrink-0 mr-4\">\n        <Link href=\"/\" className=\"text-xl md:text-2xl font-bold text-gray-900 hover:text-violet-700 transition-colors\">\n          Veterinaria Magali Martin\n        </Link>\n      </div>\n\n      {/* 2. Navegación Principal (SIEMPRE VISIBLE si el usuario está logueado) */}\n      {user && (\n          <nav className=\"w-full sm:w-auto flex-grow flex justify-center items-center order-3 sm:order-2\">\n              <div className=\"flex justify-center items-center space-x-3 md:space-x-4 border-t sm:border-t-0 pt-3 sm:pt-0 w-full sm:w-auto\">\n                <Link href=\"/mis-datos\" className=\"text-xs md:text-sm font-medium hover:text-violet-600 transition-colors uppercase tracking-wider\">\n                  Mis Datos\n                </Link>\n                <span className=\"text-gray-300\">|</span>\n                <Link href=\"/mascotas\" className=\"text-xs md:text-sm font-medium hover:text-violet-600 transition-colors uppercase tracking-wider\">\n                  Mis Mascotas\n                </Link>\n                <span className=\"text-gray-300\">|</span>\n                <Link href=\"/mis-turnos\" className=\"text-xs md:text-sm font-medium hover:text-violet-600 transition-colors uppercase tracking-wider\">\n                  Mis Turnos\n                </Link>\n              </div>\n          </nav>\n      )}\n\n      {/* 3. Acciones a la Derecha */}\n      <div className=\"flex-shrink-0 flex items-center order-2 sm:order-3\">\n        {loading ? (\n          <div className=\"h-8 w-24 bg-gray-200 rounded-full animate-pulse\"></div>\n        ) : user ? (\n          <div className=\"flex items-center\">\n            {userRole === 'admin' && (\n                <Link href=\"/admin\" className=\"bg-gray-100 text-gray-600 font-semibold px-3 py-2 rounded-full text-xs hover:bg-gray-200 transition-colors mr-2\">\n                  Admin\n                </Link>\n            )}\n            <button onClick={logout} className=\"bg-violet-600 hover:bg-violet-700 text-white font-semibold px-3 sm:px-4 py-2 rounded-full transition-colors text-sm\">\n              Salir\n            </button>\n          </div>\n        ) : (\n          <Link href=\"/login\" className=\"bg-violet-600 hover:bg-violet-700 text-white font-semibold px-4 py-2 rounded-full transition-colors\">\n            Iniciar Sesión\n          </Link>\n        )}\n      </div>\n    </header>\n  );\n};\n\nexport default Header;\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAFA;;;AAIA,MAAM,SAAS;;IACb,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,4IAAO;IAEnD,qBACE,6LAAC;QAAO,WAAU;;0BAGhB,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,0KAAI;oBAAC,MAAK;oBAAI,WAAU;8BAAsF;;;;;;;;;;;YAMhH,sBACG,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,0KAAI;4BAAC,MAAK;4BAAa,WAAU;sCAAkG;;;;;;sCAGpI,6LAAC;4BAAK,WAAU;sCAAgB;;;;;;sCAChC,6LAAC,0KAAI;4BAAC,MAAK;4BAAY,WAAU;sCAAkG;;;;;;sCAGnI,6LAAC;4BAAK,WAAU;sCAAgB;;;;;;sCAChC,6LAAC,0KAAI;4BAAC,MAAK;4BAAc,WAAU;sCAAkG;;;;;;;;;;;;;;;;;0BAQ/I,6LAAC;gBAAI,WAAU;0BACZ,wBACC,6LAAC;oBAAI,WAAU;;;;;+DACb,qBACF,6LAAC;oBAAI,WAAU;;wBACZ,aAAa,yBACV,6LAAC,0KAAI;4BAAC,MAAK;4BAAS,WAAU;sCAAkH;;;;;;sCAIpJ,6LAAC;4BAAO,SAAS;4BAAQ,WAAU;sCAAsH;;;;;;;;;;;6EAK3J,6LAAC,0KAAI;oBAAC,MAAK;oBAAS,WAAU;8BAAsG;;;;;;;;;;;;;;;;;AAO9I;GAvDM;;QACwC,4IAAO;;;KAD/C;uCAyDS","debugId":null}},
    {"offset": {"line": 364, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/Footer.jsx"],"sourcesContent":["'use client';\n\nexport default function Footer() {\n    return (\n        <footer className=\"bg-gray-800 text-white p-4 mt-auto\">\n            <div className=\"container mx-auto text-center\">\n                <p>&copy; 2024 Veterinaria Magali Martin. Todos los derechos reservados.</p>\n            </div>\n        </footer>\n    );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAEe,SAAS;IACpB,qBACI,6LAAC;QAAO,WAAU;kBACd,cAAA,6LAAC;YAAI,WAAU;sBACX,cAAA,6LAAC;0BAAE;;;;;;;;;;;;;;;;AAInB;KARwB","debugId":null}},
    {"offset": {"line": 404, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/ConnectionStatus.jsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { getFirestore, doc, getDoc } from \"firebase/firestore\";\nimport { app } from '@/lib/firebase';\n\nconst ConnectionStatus = () => {\n  const [isConnected, setIsConnected] = useState(true);\n\n  useEffect(() => {\n    const checkConnection = async () => {\n      // Asegúrate de que este código solo se ejecute en el lado del cliente\n      if (typeof window !== \"undefined\") {\n        try {\n          const db = getFirestore(app);\n          // Intentamos leer un documento que no existe para verificar la conexión.\n          // Esto es una operación de bajo costo que no consume lecturas si el documento no se encuentra.\n          const docRef = doc(db, \"_connection_test\", \"_doc\");\n          await getDoc(docRef);\n          setIsConnected(true);\n        } catch (error) {\n          setIsConnected(false);\n        }\n      }\n    };\n\n    const interval = setInterval(() => {\n      checkConnection();\n    }, 5000); // Verificamos la conexión cada 5 segundos\n\n    // Verificación inicial\n    checkConnection();\n\n    return () => {\n      clearInterval(interval);\n    };\n  }, []);\n\n  return (\n    <div className={`fixed bottom-4 right-4 text-xs text-white py-1 px-3 rounded-full ${isConnected ? 'bg-green-600' : 'bg-red-600'}`}>\n      {isConnected ? 'Online' : 'Offline'}\n    </div>\n  );\n};\n\nexport default ConnectionStatus;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;;;AAJA;;;;AAMA,MAAM,mBAAmB;;IACvB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,IAAA,0KAAS;sCAAC;YACR,MAAM;8DAAkB;oBACtB,sEAAsE;oBACtE,wCAAmC;wBACjC,IAAI;4BACF,MAAM,KAAK,IAAA,kLAAY,EAAC,gIAAG;4BAC3B,yEAAyE;4BACzE,+FAA+F;4BAC/F,MAAM,SAAS,IAAA,yKAAG,EAAC,IAAI,oBAAoB;4BAC3C,MAAM,IAAA,4KAAM,EAAC;4BACb,eAAe;wBACjB,EAAE,OAAO,OAAO;4BACd,eAAe;wBACjB;oBACF;gBACF;;YAEA,MAAM,WAAW;uDAAY;oBAC3B;gBACF;sDAAG,OAAO,0CAA0C;YAEpD,uBAAuB;YACvB;YAEA;8CAAO;oBACL,cAAc;gBAChB;;QACF;qCAAG,EAAE;IAEL,qBACE,6LAAC;QAAI,WAAW,AAAC,oEAA+G,OAA5C,cAAc,iBAAiB;kBAChH,cAAc,WAAW;;;;;;AAGhC;GArCM;KAAA;uCAuCS","debugId":null}}]
}