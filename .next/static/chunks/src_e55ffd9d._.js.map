{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/lib/firebase.js"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID\n};\n\n// Initialize Firebase\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\nconst db = getFirestore(app);\nconst auth = getAuth(app);\n\nexport { app, db, auth };\n"],"names":[],"mappings":";;;;;;;;AAKU;AALV;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,sBAAsB;AACtB,MAAM,MAAM,CAAC,IAAA,8KAAO,IAAG,MAAM,GAAG,IAAA,oLAAa,EAAC,kBAAkB,IAAA,6KAAM;AACtE,MAAM,KAAK,IAAA,kLAAY,EAAC;AACxB,MAAM,OAAO,IAAA,wKAAO,EAAC","debugId":null}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/contexts/AuthContext.js"],"sourcesContent":["\n'use client';\n\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport { onAuthStateChanged, GoogleAuthProvider, signInWithPopup, signOut } from 'firebase/auth';\nimport { auth } from '@/lib/firebase';\n\nconst AuthContext = createContext();\n\nexport const useAuth = () => useContext(AuthContext);\n\nexport const AuthProvider = ({ children }) => {\n    const [user, setUser] = useState(null);\n    const [userRole, setUserRole] = useState(null);\n    const [loading, setLoading] = useState(true);\n\n    const loginWithGoogle = () => {\n        const provider = new GoogleAuthProvider();\n        return signInWithPopup(auth, provider);\n    };\n\n    const logout = () => {\n        return signOut(auth);\n    };\n\n    useEffect(() => {\n        const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\n            setLoading(true);\n            if (currentUser) {\n                const idTokenResult = await currentUser.getIdTokenResult(true); // Forzar la actualización del token\n                // La lógica de roles ahora es más segura y se basa en Custom Claims\n                const isAdmin = idTokenResult.claims.admin === true;\n                setUser(currentUser);\n                setUserRole(isAdmin ? 'admin' : 'dueño');\n            } else {\n                setUser(null);\n                setUserRole(null);\n            }\n            setLoading(false);\n        });\n\n        return () => unsubscribe();\n    }, []);\n\n    const value = {\n        user,\n        userRole, // Exponemos el rol del usuario\n        loading,\n        loginWithGoogle,\n        logout,\n    };\n\n    return (\n        <AuthContext.Provider value={value}>\n            {children}\n        </AuthContext.Provider>\n    );\n};\n"],"names":[],"mappings":";;;;;;;AAGA;AACA;AAAA;AACA;;;AAJA;;;;AAMA,MAAM,4BAAc,IAAA,8KAAa;AAE1B,MAAM,UAAU;;IAAM,OAAA,IAAA,2KAAU,EAAC;AAAW;GAAtC;AAEN,MAAM,eAAe;QAAC,EAAE,QAAQ,EAAE;;IACrC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,MAAM,kBAAkB;QACpB,MAAM,WAAW,IAAI,mLAAkB;QACvC,OAAO,IAAA,gLAAe,EAAC,iIAAI,EAAE;IACjC;IAEA,MAAM,SAAS;QACX,OAAO,IAAA,wKAAO,EAAC,iIAAI;IACvB;IAEA,IAAA,0KAAS;kCAAC;YACN,MAAM,cAAc,IAAA,mLAAkB,EAAC,iIAAI;sDAAE,OAAO;oBAChD,WAAW;oBACX,IAAI,aAAa;wBACb,MAAM,gBAAgB,MAAM,YAAY,gBAAgB,CAAC,OAAO,oCAAoC;wBACpG,oEAAoE;wBACpE,MAAM,UAAU,cAAc,MAAM,CAAC,KAAK,KAAK;wBAC/C,QAAQ;wBACR,YAAY,UAAU,UAAU;oBACpC,OAAO;wBACH,QAAQ;wBACR,YAAY;oBAChB;oBACA,WAAW;gBACf;;YAEA;0CAAO,IAAM;;QACjB;iCAAG,EAAE;IAEL,MAAM,QAAQ;QACV;QACA;QACA;QACA;QACA;IACJ;IAEA,qBACI,6LAAC,YAAY,QAAQ;QAAC,OAAO;kBACxB;;;;;;AAGb;IA9Ca;KAAA","debugId":null}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/Header.jsx"],"sourcesContent":["\n'use client';\nimport Link from 'next/link';\nimport { useAuth } from '@/contexts/AuthContext';\n\nconst Header = () => {\n  const { user, loading, logout, userRole } = useAuth();\n\n  return (\n    <header className=\"bg-gray-800 text-white p-4 flex justify-between items-center\">\n      <div className=\"flex items-center\">\n        <Link href=\"/\">\n          <h1 className=\"text-xl font-bold\">Veterinaria</h1>\n        </Link>\n      </div>\n      <nav>\n        <ul className=\"flex space-x-4\">\n          {loading ? (\n            <p>Cargando...</p>\n          ) : user ? (\n            <>\n              <li>\n                <span className=\"mr-4\">Hola, {user.displayName || user.email}</span>\n              </li>\n              {userRole === 'admin' && (\n                <li>\n                  <Link href=\"/admin\">\n                    <span className=\"hover:text-gray-300\">Administración</span>\n                  </Link>\n                </li>\n              )}\n              <li>\n                <button onClick={logout} className=\"hover:text-gray-300\">\n                  Cerrar Sesión\n                </button>\n              </li>\n            </>\n          ) : (\n            <li>\n              <Link href=\"/login\">\n                <span className=\"hover:text-gray-300\">Iniciar Sesión</span>\n              </Link>\n            </li>\n          )}\n        </ul>\n      </nav>\n    </header>\n  );\n};\n\nexport default Header;\n\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAFA;;;AAIA,MAAM,SAAS;;IACb,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,4IAAO;IAEnD,qBACE,6LAAC;QAAO,WAAU;;0BAChB,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,0KAAI;oBAAC,MAAK;8BACT,cAAA,6LAAC;wBAAG,WAAU;kCAAoB;;;;;;;;;;;;;;;;0BAGtC,6LAAC;0BACC,cAAA,6LAAC;oBAAG,WAAU;8BACX,wBACC,6LAAC;kCAAE;;;;;mEACD,qBACF;;0CACE,6LAAC;0CACC,cAAA,6LAAC;oCAAK,WAAU;;wCAAO;wCAAO,KAAK,WAAW,IAAI,KAAK,KAAK;;;;;;;;;;;;4BAE7D,aAAa,yBACZ,6LAAC;0CACC,cAAA,6LAAC,0KAAI;oCAAC,MAAK;8CACT,cAAA,6LAAC;wCAAK,WAAU;kDAAsB;;;;;;;;;;;;;;;;0CAI5C,6LAAC;0CACC,cAAA,6LAAC;oCAAO,SAAS;oCAAQ,WAAU;8CAAsB;;;;;;;;;;;;qDAM7D,6LAAC;kCACC,cAAA,6LAAC,0KAAI;4BAAC,MAAK;sCACT,cAAA,6LAAC;gCAAK,WAAU;0CAAsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQtD;GA3CM;;QACwC,4IAAO;;;KAD/C;uCA6CS","debugId":null}},
    {"offset": {"line": 287, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/Hero.jsx"],"sourcesContent":["'use client';\n\nexport default function Hero() {\n    return (\n        <section className=\"bg-violet-400 text-white text-center p-20\">\n            <h2 className=\"text-4xl font-bold mb-4\">Bienvenidos a la Veterinaria Magali Martin</h2>\n            <p className=\"text-xl\">Cuidando de tus mascotas con amor y profesionalismo.</p>\n        </section>\n    );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAEe,SAAS;IACpB,qBACI,6LAAC;QAAQ,WAAU;;0BACf,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;0BACxC,6LAAC;gBAAE,WAAU;0BAAU;;;;;;;;;;;;AAGnC;KAPwB","debugId":null}},
    {"offset": {"line": 331, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/components/ConnectionStatus.jsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { getFirestore, doc, getDoc } from \"firebase/firestore\";\nimport { app } from '@/lib/firebase';\n\nconst ConnectionStatus = () => {\n  const [isConnected, setIsConnected] = useState(true);\n\n  useEffect(() => {\n    const checkConnection = async () => {\n      // Asegúrate de que este código solo se ejecute en el lado del cliente\n      if (typeof window !== \"undefined\") {\n        try {\n          const db = getFirestore(app);\n          // Intentamos leer un documento que no existe para verificar la conexión.\n          // Esto es una operación de bajo costo que no consume lecturas si el documento no se encuentra.\n          const docRef = doc(db, \"_connection_test\", \"_doc\");\n          await getDoc(docRef);\n          setIsConnected(true);\n        } catch (error) {\n          setIsConnected(false);\n        }\n      }\n    };\n\n    const interval = setInterval(() => {\n      checkConnection();\n    }, 5000); // Verificamos la conexión cada 5 segundos\n\n    // Verificación inicial\n    checkConnection();\n\n    return () => {\n      clearInterval(interval);\n    };\n  }, []);\n\n  return (\n    <div className={`fixed bottom-4 right-4 text-xs text-white py-1 px-3 rounded-full ${isConnected ? 'bg-green-600' : 'bg-red-600'}`}>\n      {isConnected ? 'Online' : 'Offline'}\n    </div>\n  );\n};\n\nexport default ConnectionStatus;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;;;AAJA;;;;AAMA,MAAM,mBAAmB;;IACvB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,IAAA,0KAAS;sCAAC;YACR,MAAM;8DAAkB;oBACtB,sEAAsE;oBACtE,wCAAmC;wBACjC,IAAI;4BACF,MAAM,KAAK,IAAA,kLAAY,EAAC,gIAAG;4BAC3B,yEAAyE;4BACzE,+FAA+F;4BAC/F,MAAM,SAAS,IAAA,yKAAG,EAAC,IAAI,oBAAoB;4BAC3C,MAAM,IAAA,4KAAM,EAAC;4BACb,eAAe;wBACjB,EAAE,OAAO,OAAO;4BACd,eAAe;wBACjB;oBACF;gBACF;;YAEA,MAAM,WAAW;uDAAY;oBAC3B;gBACF;sDAAG,OAAO,0CAA0C;YAEpD,uBAAuB;YACvB;YAEA;8CAAO;oBACL,cAAc;gBAChB;;QACF;qCAAG,EAAE;IAEL,qBACE,6LAAC;QAAI,WAAW,AAAC,oEAA+G,OAA5C,cAAc,iBAAiB;kBAChH,cAAc,WAAW;;;;;;AAGhC;GArCM;KAAA;uCAuCS","debugId":null}}]
}