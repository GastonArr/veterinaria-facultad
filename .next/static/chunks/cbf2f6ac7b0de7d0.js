(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6715,e=>{"use strict";e.s(["default",()=>s]);var t=e.i(43476),r=e.i(71645),a=e.i(73518),o=e.i(18566);e.i(36180);var l=e.i(98925),i=e.i(21052);function s(e){let{children:s}=e,{user:n,loading:c}=(0,a.useAuth)(),d=(0,o.useRouter)(),u=(0,o.usePathname)(),[m,g]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{if(!c){if(!n){"/login"!==u&&d.push("/login"),f(!1);return}(async()=>{try{let e=(0,l.doc)(i.db,"users",n.uid),t=await (0,l.getDoc)(e);t.exists()&&t.data().profileCompleted?g(!0):(g(!1),"/completar-perfil"!==u&&d.push("/completar-perfil"))}catch(e){console.error("Error al verificar el perfil:",e),g(!1),"/completar-perfil"!==u&&d.push("/completar-perfil")}finally{f(!1)}})()}},[n,c,d,u]),c||p)?(0,t.jsx)("div",{children:"Cargando..."}):(n||"/login"!==u)&&!m&&(m||"/completar-perfil"!==u)?null:s}},40141,e=>{"use strict";e.s(["GenIcon",()=>n],40141);var t=e.i(71645),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=t.default.createContext&&t.default.createContext(r),o=["attr","size","title"];function l(){return(l=Object.assign.bind()).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var a,o,l;a=e,o=t,l=r[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(o))in a?Object.defineProperty(a,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[o]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function n(e){return r=>t.default.createElement(c,l({attr:s({},e.attr)},r),function e(r){return r&&r.map((r,a)=>t.default.createElement(r.tag,s({key:a},r.attr),e(r.child)))}(e.child))}function c(e){var i=r=>{var a,{attr:i,size:n,title:c}=e,d=function(e,t){if(null==e)return{};var r,a,o=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)r=l[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,o),u=n||r.size||"1em";return r.className&&(a=r.className),e.className&&(a=(a?a+" ":"")+e.className),t.default.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,d,{className:a,style:s(s({color:e.color||r.color},r.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&t.default.createElement("title",null,c),e.children)};return void 0!==a?t.default.createElement(a.Consumer,null,e=>i(e)):i(r)}},73583,e=>{"use strict";e.s(["default",()=>c],73583);var t=e.i(43476),r=e.i(71645),a=e.i(73518),o=e.i(97791),l=e.i(64211),i=e.i(95187),s=(0,i.createServerReference)("40f04a978b523f8db9a71e69d2ff55b681f0c487bd",i.callServer,void 0,i.findSourceMapURL,"solicitarTurnoPeluqueria"),n=e.i(11152);function c(e){let{mascotas:i,ocupacion:c,disabledDays:d,maxTurnosManana:u,maxTurnosTarde:m}=e,{user:g}=(0,a.useAuth)(),[p,f]=(0,r.useState)(""),[b,x]=(0,r.useState)(null),[h,y]=(0,r.useState)(""),[v,j]=(0,r.useState)({cepillado:!1,rapado:!1,corteTijera:!1}),[w,N]=(0,r.useState)(!1),[S,O]=(0,r.useState)(""),[k,C]=(0,r.useState)(""),[P,T]=(0,r.useState)(""),[E,D]=(0,r.useState)(!1),[F,I]=(0,r.useState)(!1),[R,A]=(0,r.useState)(!1),M=d.map(e=>"string"==typeof e?new Date(e+"T12:00:00"):e);(0,r.useEffect)(()=>{if(b){let e=c[b.toISOString().split("T")[0]];I(e&&e.manana>=u),A(e&&e.tarde>=m),("manana"===h&&F||"tarde"===h&&R)&&y("")}},[b,c,u,m,h,F,R]);let q=e=>j(t=>({...t,[e.target.name]:e.target.checked})),z=async e=>{if(e.preventDefault(),!g||!p||!b||!h||!S)return void C("Por favor, completa todos los campos, incluido el método de pago.");D(!0),C(""),T("");let t=Object.keys(v).filter(e=>v[e]),r=i.find(e=>e.id===p),a={clienteId:g.uid,mascotaId:p,tamañoMascota:null==r?void 0:r.tamaño,fecha:b.toISOString().split("T")[0],turno:h,servicios:t,transporte:w,metodoPago:S,tipo:"peluqueria"};try{let e=await s(a);e.success?(T("¡Solicitud de turno enviada con éxito! Nos pondremos en contacto para confirmar."),f(""),x(null),y(""),N(!1),O(""),j({cepillado:!1,rapado:!1,corteTijera:!1})):C(e.error||"No se pudo procesar la solicitud.")}catch(e){C("Ocurrió un error inesperado.")}finally{D(!1)}};return(0,t.jsxs)("form",{onSubmit:z,className:"max-w-xl mx-auto bg-white p-8 rounded-2xl shadow-xl space-y-7",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-800",children:"Solicitar Turno de Peluquería"}),k&&(0,t.jsx)("p",{className:"text-sm text-red-600 bg-red-100 p-3 rounded-md text-center font-semibold",children:k}),P&&(0,t.jsx)("p",{className:"text-sm text-green-700 bg-green-100 p-3 rounded-md text-center font-semibold",children:P}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"mascota",className:"block text-sm font-medium text-gray-700 mb-1",children:"Elige tu mascota"}),(0,t.jsxs)("select",{id:"mascota",value:p,onChange:e=>f(e.target.value),required:!0,className:"w-full input",children:[(0,t.jsx)("option",{value:"",children:"Selecciona una mascota"}),i.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.nombre," (",e.tamaño,")"]},e.id))]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1. Selecciona el día"}),(0,t.jsx)(o.DayPicker,{mode:"single",selected:b,onSelect:x,locale:l.es,disabled:M,className:"bg-violet-50 p-4 rounded-lg",modifiersClassNames:{selected:"bg-violet-600 text-white",today:"text-violet-700 font-bold"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"2. Selecciona el turno disponible"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>y("manana"),disabled:F||!b,className:"py-3 rounded-lg text-sm font-semibold transition-all duration-200 ".concat("manana"===h?"bg-violet-600 text-white shadow-lg ring-2 ring-violet-400":"bg-gray-200 text-gray-700"," ").concat(F||!b?"bg-gray-100 text-gray-400 cursor-not-allowed opacity-70":"hover:bg-violet-500 hover:text-white"),children:"Turno Mañana (8hs - 12hs)"}),(0,t.jsx)("button",{type:"button",onClick:()=>y("tarde"),disabled:R||!b,className:"py-3 rounded-lg text-sm font-semibold transition-all duration-200 ".concat("tarde"===h?"bg-violet-600 text-white shadow-lg ring-2 ring-violet-400":"bg-gray-200 text-gray-700"," ").concat(R||!b?"bg-gray-100 text-gray-400 cursor-not-allowed opacity-70":"hover:bg-violet-500 hover:text-white"),children:"Turno Tarde (13hs - 17hs)"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"3. Elige el método de pago"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>O("efectivo"),className:"flex items-center justify-center py-3 rounded-lg text-sm font-semibold transition-all duration-200 ".concat("efectivo"===S?"bg-green-500 text-white shadow-lg ring-2 ring-green-300":"bg-gray-200 text-gray-700"," hover:bg-green-400 hover:text-white"),children:[(0,t.jsx)(n.FaMoneyBillWave,{className:"mr-2"}),"Efectivo"]}),(0,t.jsxs)("button",{type:"button",onClick:()=>O("mercado_pago"),className:"flex items-center justify-center py-3 rounded-lg text-sm font-semibold transition-all duration-200 ".concat("mercado_pago"===S?"bg-sky-500 text-white shadow-lg ring-2 ring-sky-300":"bg-gray-200 text-gray-700"," hover:bg-sky-400 hover:text-white"),children:[(0,t.jsx)(n.FaCreditCard,{className:"mr-2"}),"Mercado Pago"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Servicios Adicionales (Opcional)"}),(0,t.jsxs)("div",{className:"space-y-2 bg-gray-50 p-4 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{id:"cepillado",name:"cepillado",type:"checkbox",checked:v.cepillado,onChange:q,className:"h-4 w-4 text-violet-600 focus:ring-violet-500 border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"cepillado",className:"ml-3 block text-sm text-gray-800",children:"Cepillado"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{id:"rapado",name:"rapado",type:"checkbox",checked:v.rapado,onChange:q,className:"h-4 w-4 text-violet-600 focus:ring-violet-500 border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"rapado",className:"ml-3 block text-sm text-gray-800",children:"Rapado Parejo"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{id:"corteTijera",name:"corteTijera",type:"checkbox",checked:v.corteTijera,onChange:q,className:"h-4 w-4 text-violet-600 focus:ring-violet-500 border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"corteTijera",className:"ml-3 block text-sm text-gray-800",children:"Corte a Tijera"})]})]})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex items-center bg-gray-50 p-4 rounded-lg",children:[(0,t.jsx)("input",{id:"transporte",name:"transporte",type:"checkbox",checked:w,onChange:e=>N(e.target.checked),className:"h-4 w-4 text-violet-600 focus:ring-violet-500 border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"transporte",className:"ml-3 block text-sm font-medium text-gray-800",children:"¿Necesitas transporte? (Opcional)"})]})}),(0,t.jsx)("button",{type:"submit",disabled:E||!b||!h||!p||!S,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-full shadow-sm text-sm font-medium text-white bg-violet-600 hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:E?"Enviando Solicitud...":"Solicitar Turno"})]})}}]);