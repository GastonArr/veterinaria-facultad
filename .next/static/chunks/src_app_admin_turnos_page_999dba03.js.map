{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/veterinariamagali/src/app/admin/turnos/page.js"],"sourcesContent":["\n'use client';\nimport { useState, useEffect } from 'react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { db } from '@/lib/firebase'; // <-- CORREGIDO\nimport { collection, getDocs, query, where, Timestamp } from 'firebase/firestore';\n\nconst TurnosPage = () => {\n  const { userRole } = useAuth();\n  const [turnos, setTurnos] = useState({ hoy: [], futuros: [], pasados: [] });\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchTurnos = async () => {\n      try {\n        const turnosCollection = collection(db, 'turns'); // <-- CORREGIDO\n        const hoy = new Date();\n        const inicioHoy = new Date(hoy.setHours(0, 0, 0, 0));\n        const finHoy = new Date(hoy.setHours(23, 59, 59, 999));\n\n        const qHoy = query(turnosCollection, where('date', '>=', Timestamp.fromDate(inicioHoy)), where('date', '<=', Timestamp.fromDate(finHoy)));\n        const qFuturos = query(turnosCollection, where('date', '>', Timestamp.fromDate(finHoy)));\n        const qPasados = query(turnosCollection, where('date', '<', Timestamp.fromDate(inicioHoy)));\n\n        const [hoySnapshot, futurosSnapshot, pasadosSnapshot] = await Promise.all([\n          getDocs(qHoy),\n          getDocs(qFuturos),\n          getDocs(qPasados)\n        ]);\n\n        setTurnos({\n          hoy: hoySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })),\n          futuros: futurosSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })),\n          pasados: pasadosSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }))\n        });\n\n      } catch (error) {\n        console.error(\"Error al obtener los turnos: \", error);\n      }\n      setLoading(false);\n    };\n\n    if (userRole === 'admin') {\n      fetchTurnos();\n    }\n  }, [userRole]);\n\n  if (userRole !== 'admin') {\n    return (\n      <div className=\"flex justify-center items-center h-full\">\n        <p className=\"text-red-500\">No tienes permiso para ver esta página.</p>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return <p>Cargando turnos...</p>;\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <h1 className=\"text-3xl font-bold mb-8\">Gestión de Turnos</h1>\n      \n      {/* Turnos de Hoy */}\n      <div className=\"mb-12\">\n        <h2 className=\"text-2xl font-semibold mb-4\">Turnos de Hoy</h2>\n        {turnos.hoy.length > 0 ? (\n          <div className=\"bg-white shadow-md rounded\">\n            <table className=\"min-w-full leading-normal\">\n              {/* ... encabezado de la tabla ... */}\n              <tbody>\n                {turnos.hoy.map(turno => (\n                  <tr key={turno.id}>\n                    {/* ... celdas de la tabla ... */}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        ) : <p>No hay turnos para hoy.</p>}\n      </div>\n\n      {/* Turnos Futuros */}\n      <div className=\"mb-12\">\n        <h2 className=\"text-2xl font-semibold mb-4\">Turnos Futuros</h2>\n        {/* ... similar a turnos de hoy ... */}\n      </div>\n\n      {/* Turnos Pasados */}\n      <div>\n        <h2 className=\"text-2xl font-semibold mb-4\">Turnos Pasados</h2>\n        {/* ... similar a turnos de hoy ... */}\n      </div>\n\n    </div>\n  );\n};\n\nexport default TurnosPage;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA,oNAAqC,gBAAgB;AACrD;AAAA;;;AAJA;;;;;AAMA,MAAM,aAAa;;IACjB,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,4IAAO;IAC5B,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;QAAE,KAAK,EAAE;QAAE,SAAS,EAAE;QAAE,SAAS,EAAE;IAAC;IACzE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;gCAAC;YACR,MAAM;oDAAc;oBAClB,IAAI;wBACF,MAAM,mBAAmB,IAAA,gLAAU,EAAC,+HAAE,EAAE,UAAU,gBAAgB;wBAClE,MAAM,MAAM,IAAI;wBAChB,MAAM,YAAY,IAAI,KAAK,IAAI,QAAQ,CAAC,GAAG,GAAG,GAAG;wBACjD,MAAM,SAAS,IAAI,KAAK,IAAI,QAAQ,CAAC,IAAI,IAAI,IAAI;wBAEjD,MAAM,OAAO,IAAA,2KAAK,EAAC,kBAAkB,IAAA,2KAAK,EAAC,QAAQ,MAAM,+KAAS,CAAC,QAAQ,CAAC,aAAa,IAAA,2KAAK,EAAC,QAAQ,MAAM,+KAAS,CAAC,QAAQ,CAAC;wBAChI,MAAM,WAAW,IAAA,2KAAK,EAAC,kBAAkB,IAAA,2KAAK,EAAC,QAAQ,KAAK,+KAAS,CAAC,QAAQ,CAAC;wBAC/E,MAAM,WAAW,IAAA,2KAAK,EAAC,kBAAkB,IAAA,2KAAK,EAAC,QAAQ,KAAK,+KAAS,CAAC,QAAQ,CAAC;wBAE/E,MAAM,CAAC,aAAa,iBAAiB,gBAAgB,GAAG,MAAM,QAAQ,GAAG,CAAC;4BACxE,IAAA,6KAAO,EAAC;4BACR,IAAA,6KAAO,EAAC;4BACR,IAAA,6KAAO,EAAC;yBACT;wBAED,UAAU;4BACR,KAAK,YAAY,IAAI,CAAC,GAAG;oEAAC,CAAA,MAAO,CAAC;wCAAE,IAAI,IAAI,EAAE;wCAAE,GAAG,IAAI,IAAI,EAAE;oCAAC,CAAC;;4BAC/D,SAAS,gBAAgB,IAAI,CAAC,GAAG;oEAAC,CAAA,MAAO,CAAC;wCAAE,IAAI,IAAI,EAAE;wCAAE,GAAG,IAAI,IAAI,EAAE;oCAAC,CAAC;;4BACvE,SAAS,gBAAgB,IAAI,CAAC,GAAG;oEAAC,CAAA,MAAO,CAAC;wCAAE,IAAI,IAAI,EAAE;wCAAE,GAAG,IAAI,IAAI,EAAE;oCAAC,CAAC;;wBACzE;oBAEF,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,iCAAiC;oBACjD;oBACA,WAAW;gBACb;;YAEA,IAAI,aAAa,SAAS;gBACxB;YACF;QACF;+BAAG;QAAC;KAAS;IAEb,IAAI,aAAa,SAAS;QACxB,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAE,WAAU;0BAAe;;;;;;;;;;;IAGlC;IAEA,IAAI,SAAS;QACX,qBAAO,6LAAC;sBAAE;;;;;;IACZ;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;0BAGxC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAA8B;;;;;;oBAC3C,OAAO,GAAG,CAAC,MAAM,GAAG,kBACnB,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAM,WAAU;sCAEf,cAAA,6LAAC;0CACE,OAAO,GAAG,CAAC,GAAG,CAAC,CAAA,sBACd,6LAAC,UAAQ,MAAM,EAAE;;;;;;;;;;;;;;;;;;;iFAOvB,6LAAC;kCAAE;;;;;;;;;;;;0BAIT,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAG,WAAU;8BAA8B;;;;;;;;;;;0BAK9C,6LAAC;0BACC,cAAA,6LAAC;oBAAG,WAAU;8BAA8B;;;;;;;;;;;;;;;;;AAMpD;GAzFM;;QACiB,4IAAO;;;KADxB;uCA2FS","debugId":null}}]
}