(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,57862,e=>{"use strict";e.s(["default",()=>d],57862);var t=e.i(43476),r=e.i(71645),s=e.i(73518),a=e.i(21052);e.i(36180);var l=e.i(98925),i=e.i(18566);let n=e=>{let{clientId:s,initialRating:a,onRatingChange:l}=e,[i,n]=(0,r.useState)(a),[d,c]=(0,r.useState)(0),o=()=>{c(0)};return(0,t.jsx)("div",{className:"flex items-center",children:[1,2,3,4,5].map(e=>(0,t.jsx)("svg",{className:"w-6 h-6 cursor-pointer fill-current ".concat((d||i)>=e?"text-yellow-400":"text-gray-300"),onMouseOver:()=>{c(e)},onMouseLeave:o,onClick:()=>(e=>{n(e),l(s,e)})(e),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})},e))})},d=()=>{let{userRole:e}=(0,s.useAuth)(),d=(0,i.useRouter)(),{id:c}=(0,i.useParams)(),[o,x]=(0,r.useState)(null),[m,h]=(0,r.useState)([]),[g,b]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if("admin"!==e||!c){e&&"admin"!==e&&d.push("/");return}(async()=>{b(!0);try{let e=(0,l.doc)(a.db,"users",c),t=await (0,l.getDoc)(e);if(t.exists())x({id:t.id,...t.data()});else{console.error("No se encontró el cliente."),d.push("/admin/clientes");return}let r=(0,l.collection)(a.db,"pets"),s=(0,l.query)(r,(0,l.where)("ownerId","==",c)),i=(await (0,l.getDocs)(s)).docs.map(e=>({id:e.id,...e.data()}));h(i)}catch(e){console.error("Error al obtener los datos:",e)}b(!1)})()},[c,e,d]);let p=async(t,r)=>{if("admin"===e)try{let e=(0,l.doc)(a.db,"users",t);await (0,l.updateDoc)(e,{rating:r}),x(e=>({...e,rating:r}))}catch(e){console.error("Error al actualizar la calificación: ",e)}};return g||!e?(0,t.jsx)("p",{className:"text-center mt-8",children:"Cargando datos del cliente..."}):"admin"!==e?(0,t.jsx)("p",{className:"text-red-500 text-center mt-8",children:"No tienes permiso para ver esta página."}):o?(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("button",{onClick:()=>d.back(),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded mb-6 inline-flex items-center",children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Volver"]}),(0,t.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6 md:p-8 mb-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center mb-4",children:[(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800 mr-4",children:o.displayName}),(0,t.jsx)("div",{className:"mt-2 sm:mt-0",children:(0,t.jsx)(n,{clientId:o.id,initialRating:o.rating||0,onRatingChange:p})})]}),(0,t.jsxs)("div",{className:"text-gray-600 space-y-2",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Email:"})," ",o.email]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Teléfono:"})," ",o.phone||"No especificado"]})]})]}),(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-gray-700",children:"Mascotas Registradas"}),(0,t.jsx)("div",{className:"bg-white shadow-md rounded my-6 overflow-x-auto",children:m.length>0?(0,t.jsxs)("table",{className:"min-w-full leading-normal",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Nombre"}),(0,t.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Especie"}),(0,t.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Raza"}),(0,t.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Edad"})]})}),(0,t.jsx)("tbody",{children:m.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:e.name||"N/A"}),(0,t.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:e.species||"N/A"}),(0,t.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:e.breed||"N/A"}),(0,t.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:e.age?"".concat(e.age," años"):"N/A"})]},e.id))})]}):(0,t.jsx)("div",{className:"text-center p-5",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Este cliente aún no ha registrado ninguna mascota."})})})]}):(0,t.jsxs)("div",{className:"text-center mt-8",children:[(0,t.jsx)("p",{children:"No se pudo encontrar la información del cliente."}),(0,t.jsx)("button",{onClick:()=>d.push("/admin/clientes"),className:"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Volver a la lista"})]})}}]);